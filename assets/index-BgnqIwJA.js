function Wv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Hv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qv={exports:{}},gc={},Kv={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tl=Symbol.for("react.element"),iI=Symbol.for("react.portal"),sI=Symbol.for("react.fragment"),oI=Symbol.for("react.strict_mode"),aI=Symbol.for("react.profiler"),lI=Symbol.for("react.provider"),uI=Symbol.for("react.context"),cI=Symbol.for("react.forward_ref"),dI=Symbol.for("react.suspense"),hI=Symbol.for("react.memo"),fI=Symbol.for("react.lazy"),qm=Symbol.iterator;function pI(t){return t===null||typeof t!="object"?null:(t=qm&&t[qm]||t["@@iterator"],typeof t=="function"?t:null)}var Gv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qv=Object.assign,Yv={};function fo(t,e,n){this.props=t,this.context=e,this.refs=Yv,this.updater=n||Gv}fo.prototype.isReactComponent={};fo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Xv(){}Xv.prototype=fo.prototype;function xf(t,e,n){this.props=t,this.context=e,this.refs=Yv,this.updater=n||Gv}var Sf=xf.prototype=new Xv;Sf.constructor=xf;Qv(Sf,fo.prototype);Sf.isPureReactComponent=!0;var Km=Array.isArray,Jv=Object.prototype.hasOwnProperty,Rf={current:null},Zv={key:!0,ref:!0,__self:!0,__source:!0};function e_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Jv.call(e,r)&&!Zv.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:tl,type:t,key:s,ref:o,props:i,_owner:Rf.current}}function mI(t,e){return{$$typeof:tl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Af(t){return typeof t=="object"&&t!==null&&t.$$typeof===tl}function gI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gm=/\/+/g;function pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gI(""+t.key):e.toString(36)}function su(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case tl:case iI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+pd(o,0):r,Km(i)?(n="",t!=null&&(n=t.replace(Gm,"$&/")+"/"),su(i,e,n,"",function(c){return c})):i!=null&&(Af(i)&&(i=mI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gm,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Km(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+pd(s,l);o+=su(s,e,n,u,i)}else if(u=pI(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+pd(s,l++),o+=su(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ll(t,e,n){if(t==null)return t;var r=[],i=0;return su(t,r,"","",function(s){return e.call(n,s,i++)}),r}function yI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Wt={current:null},ou={transition:null},vI={ReactCurrentDispatcher:Wt,ReactCurrentBatchConfig:ou,ReactCurrentOwner:Rf};function t_(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Ll,forEach:function(t,e,n){Ll(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ll(t,function(){e++}),e},toArray:function(t){return Ll(t,function(e){return e})||[]},only:function(t){if(!Af(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=fo;me.Fragment=sI;me.Profiler=aI;me.PureComponent=xf;me.StrictMode=oI;me.Suspense=dI;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vI;me.act=t_;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Qv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Rf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Jv.call(e,u)&&!Zv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:tl,type:t.type,key:i,ref:s,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:uI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lI,_context:t},t.Consumer=t};me.createElement=e_;me.createFactory=function(t){var e=e_.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:cI,render:t}};me.isValidElement=Af;me.lazy=function(t){return{$$typeof:fI,_payload:{_status:-1,_result:t},_init:yI}};me.memo=function(t,e){return{$$typeof:hI,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=ou.transition;ou.transition={};try{t()}finally{ou.transition=e}};me.unstable_act=t_;me.useCallback=function(t,e){return Wt.current.useCallback(t,e)};me.useContext=function(t){return Wt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Wt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Wt.current.useEffect(t,e)};me.useId=function(){return Wt.current.useId()};me.useImperativeHandle=function(t,e,n){return Wt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Wt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Wt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Wt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Wt.current.useReducer(t,e,n)};me.useRef=function(t){return Wt.current.useRef(t)};me.useState=function(t){return Wt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Wt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Wt.current.useTransition()};me.version="18.3.1";Kv.exports=me;var O=Kv.exports;const n_=Hv(O),_I=Wv({__proto__:null,default:n_},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wI=O,EI=Symbol.for("react.element"),TI=Symbol.for("react.fragment"),II=Object.prototype.hasOwnProperty,xI=wI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,SI={key:!0,ref:!0,__self:!0,__source:!0};function r_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)II.call(e,r)&&!SI.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:EI,type:t,key:s,ref:o,props:i,_owner:xI.current}}gc.Fragment=TI;gc.jsx=r_;gc.jsxs=r_;qv.exports=gc;var p=qv.exports,th={},i_={exports:{}},dn={},s_={exports:{}},o_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,ie){var se=q.length;q.push(ie);e:for(;0<se;){var Te=se-1>>>1,fe=q[Te];if(0<i(fe,ie))q[Te]=ie,q[se]=fe,se=Te;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var ie=q[0],se=q.pop();if(se!==ie){q[0]=se;e:for(var Te=0,fe=q.length,Ie=fe>>>1;Te<Ie;){var ft=2*(Te+1)-1,ze=q[ft],tt=ft+1,$=q[tt];if(0>i(ze,se))tt<fe&&0>i($,ze)?(q[Te]=$,q[tt]=se,Te=tt):(q[Te]=ze,q[ft]=se,Te=ft);else if(tt<fe&&0>i($,se))q[Te]=$,q[tt]=se,Te=tt;else break e}}return ie}function i(q,ie){var se=q.sortIndex-ie.sortIndex;return se!==0?se:q.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,m=null,g=3,E=!1,R=!1,P=!1,D=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(q){for(var ie=n(c);ie!==null;){if(ie.callback===null)r(c);else if(ie.startTime<=q)r(c),ie.sortIndex=ie.expirationTime,e(u,ie);else break;ie=n(c)}}function V(q){if(P=!1,A(q),!R)if(n(u)!==null)R=!0,fn(U);else{var ie=n(c);ie!==null&&vt(V,ie.startTime-q)}}function U(q,ie){R=!1,P&&(P=!1,x(v),v=-1),E=!0;var se=g;try{for(A(ie),m=n(u);m!==null&&(!(m.expirationTime>ie)||q&&!S());){var Te=m.callback;if(typeof Te=="function"){m.callback=null,g=m.priorityLevel;var fe=Te(m.expirationTime<=ie);ie=t.unstable_now(),typeof fe=="function"?m.callback=fe:m===n(u)&&r(u),A(ie)}else r(u);m=n(u)}if(m!==null)var Ie=!0;else{var ft=n(c);ft!==null&&vt(V,ft.startTime-ie),Ie=!1}return Ie}finally{m=null,g=se,E=!1}}var B=!1,y=null,v=-1,T=5,I=-1;function S(){return!(t.unstable_now()-I<T)}function N(){if(y!==null){var q=t.unstable_now();I=q;var ie=!0;try{ie=y(!0,q)}finally{ie?C():(B=!1,y=null)}}else B=!1}var C;if(typeof _=="function")C=function(){_(N)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,at=Ae.port2;Ae.port1.onmessage=N,C=function(){at.postMessage(null)}}else C=function(){D(N,0)};function fn(q){y=q,B||(B=!0,C())}function vt(q,ie){v=D(function(){q(t.unstable_now())},ie)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){R||E||(R=!0,fn(U))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(q){switch(g){case 1:case 2:case 3:var ie=3;break;default:ie=g}var se=g;g=ie;try{return q()}finally{g=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,ie){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=g;g=q;try{return ie()}finally{g=se}},t.unstable_scheduleCallback=function(q,ie,se){var Te=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Te+se:Te):se=Te,q){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=se+fe,q={id:h++,callback:ie,priorityLevel:q,startTime:se,expirationTime:fe,sortIndex:-1},se>Te?(q.sortIndex=se,e(c,q),n(u)===null&&q===n(c)&&(P?(x(v),v=-1):P=!0,vt(V,se-Te))):(q.sortIndex=fe,e(u,q),R||E||(R=!0,fn(U))),q},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(q){var ie=g;return function(){var se=g;g=ie;try{return q.apply(this,arguments)}finally{g=se}}}})(o_);s_.exports=o_;var RI=s_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AI=O,un=RI;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a_=new Set,Sa={};function is(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for(Sa[t]=e,t=0;t<e.length;t++)a_.add(e[t])}var vr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nh=Object.prototype.hasOwnProperty,CI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Qm={},Ym={};function PI(t){return nh.call(Ym,t)?!0:nh.call(Qm,t)?!1:CI.test(t)?Ym[t]=!0:(Qm[t]=!0,!1)}function kI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function NI(t,e,n,r){if(e===null||typeof e>"u"||kI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cf=/[\-:]([a-z])/g;function Pf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cf,Pf);Rt[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cf,Pf);Rt[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cf,Pf);Rt[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function kf(t,e,n,r){var i=Rt.hasOwnProperty(e)?Rt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(NI(e,n,i,r)&&(n=null),r||i===null?PI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ar=AI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Vl=Symbol.for("react.element"),Ss=Symbol.for("react.portal"),Rs=Symbol.for("react.fragment"),Nf=Symbol.for("react.strict_mode"),rh=Symbol.for("react.profiler"),l_=Symbol.for("react.provider"),u_=Symbol.for("react.context"),Df=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),bf=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),c_=Symbol.for("react.offscreen"),Xm=Symbol.iterator;function zo(t){return t===null||typeof t!="object"?null:(t=Xm&&t[Xm]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,md;function ea(t){if(md===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);md=e&&e[1]||""}return`
`+md+t}var gd=!1;function yd(t,e){if(!t||gd)return"";gd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{gd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ea(t):""}function DI(t){switch(t.tag){case 5:return ea(t.type);case 16:return ea("Lazy");case 13:return ea("Suspense");case 19:return ea("SuspenseList");case 0:case 2:case 15:return t=yd(t.type,!1),t;case 11:return t=yd(t.type.render,!1),t;case 1:return t=yd(t.type,!0),t;default:return""}}function oh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Rs:return"Fragment";case Ss:return"Portal";case rh:return"Profiler";case Nf:return"StrictMode";case ih:return"Suspense";case sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case u_:return(t.displayName||"Context")+".Consumer";case l_:return(t._context.displayName||"Context")+".Provider";case Df:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bf:return e=t.displayName||null,e!==null?e:oh(t.type)||"Memo";case Br:e=t._payload,t=t._init;try{return oh(t(e))}catch{}}return null}function bI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oh(e);case 8:return e===Nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function d_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OI(t){var e=d_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ml(t){t._valueTracker||(t._valueTracker=OI(t))}function h_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=d_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ah(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Jm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=hi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f_(t,e){e=e.checked,e!=null&&kf(t,"checked",e,!1)}function lh(t,e){f_(t,e);var n=hi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?uh(t,e.type,n):e.hasOwnProperty("defaultValue")&&uh(t,e.type,hi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zm(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function uh(t,e,n){(e!=="number"||Au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ta=Array.isArray;function js(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+hi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ch(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(ta(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:hi(n)}}function p_(t,e){var n=hi(e.value),r=hi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jl,g_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jl=jl||document.createElement("div"),jl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ra(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var da={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LI=["Webkit","ms","Moz","O"];Object.keys(da).forEach(function(t){LI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),da[e]=da[t]})});function y_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||da.hasOwnProperty(t)&&da[t]?(""+e).trim():e+"px"}function v_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=y_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var VI=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hh(t,e){if(e){if(VI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=null;function Of(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mh=null,Us=null,Fs=null;function ng(t){if(t=il(t)){if(typeof mh!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Ec(e),mh(t.stateNode,t.type,e))}}function __(t){Us?Fs?Fs.push(t):Fs=[t]:Us=t}function w_(){if(Us){var t=Us,e=Fs;if(Fs=Us=null,ng(t),e)for(t=0;t<e.length;t++)ng(e[t])}}function E_(t,e){return t(e)}function T_(){}var vd=!1;function I_(t,e,n){if(vd)return t(e,n);vd=!0;try{return E_(t,e,n)}finally{vd=!1,(Us!==null||Fs!==null)&&(T_(),w_())}}function Aa(t,e){var n=t.stateNode;if(n===null)return null;var r=Ec(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var gh=!1;if(vr)try{var $o={};Object.defineProperty($o,"passive",{get:function(){gh=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{gh=!1}function MI(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var ha=!1,Cu=null,Pu=!1,yh=null,jI={onError:function(t){ha=!0,Cu=t}};function UI(t,e,n,r,i,s,o,l,u){ha=!1,Cu=null,MI.apply(jI,arguments)}function FI(t,e,n,r,i,s,o,l,u){if(UI.apply(this,arguments),ha){if(ha){var c=Cu;ha=!1,Cu=null}else throw Error(H(198));Pu||(Pu=!0,yh=c)}}function ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function x_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rg(t){if(ss(t)!==t)throw Error(H(188))}function BI(t){var e=t.alternate;if(!e){if(e=ss(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return rg(i),t;if(s===r)return rg(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function S_(t){return t=BI(t),t!==null?R_(t):null}function R_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=R_(t);if(e!==null)return e;t=t.sibling}return null}var A_=un.unstable_scheduleCallback,ig=un.unstable_cancelCallback,zI=un.unstable_shouldYield,$I=un.unstable_requestPaint,et=un.unstable_now,WI=un.unstable_getCurrentPriorityLevel,Lf=un.unstable_ImmediatePriority,C_=un.unstable_UserBlockingPriority,ku=un.unstable_NormalPriority,HI=un.unstable_LowPriority,P_=un.unstable_IdlePriority,yc=null,qn=null;function qI(t){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(yc,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:QI,KI=Math.log,GI=Math.LN2;function QI(t){return t>>>=0,t===0?32:31-(KI(t)/GI|0)|0}var Ul=64,Fl=4194304;function na(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=na(l):(s&=o,s!==0&&(r=na(s)))}else o=n&~i,o!==0?r=na(o):s!==0&&(r=na(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bn(e),i=1<<n,r|=t[n],e&=~i;return r}function YI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=YI(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function k_(){var t=Ul;return Ul<<=1,!(Ul&4194240)&&(Ul=64),t}function _d(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function nl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=n}function JI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Vf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ne=0;function N_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var D_,Mf,b_,O_,L_,_h=!1,Bl=[],Zr=null,ei=null,ti=null,Ca=new Map,Pa=new Map,$r=[],ZI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sg(t,e){switch(t){case"focusin":case"focusout":Zr=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pa.delete(e.pointerId)}}function Wo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=il(e),e!==null&&Mf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function ex(t,e,n,r,i){switch(e){case"focusin":return Zr=Wo(Zr,t,e,n,r,i),!0;case"dragenter":return ei=Wo(ei,t,e,n,r,i),!0;case"mouseover":return ti=Wo(ti,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ca.set(s,Wo(Ca.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pa.set(s,Wo(Pa.get(s)||null,t,e,n,r,i)),!0}return!1}function V_(t){var e=Mi(t.target);if(e!==null){var n=ss(e);if(n!==null){if(e=n.tag,e===13){if(e=x_(n),e!==null){t.blockedOn=e,L_(t.priority,function(){b_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ph=r,n.target.dispatchEvent(r),ph=null}else return e=il(n),e!==null&&Mf(e),t.blockedOn=n,!1;e.shift()}return!0}function og(t,e,n){au(t)&&n.delete(e)}function tx(){_h=!1,Zr!==null&&au(Zr)&&(Zr=null),ei!==null&&au(ei)&&(ei=null),ti!==null&&au(ti)&&(ti=null),Ca.forEach(og),Pa.forEach(og)}function Ho(t,e){t.blockedOn===e&&(t.blockedOn=null,_h||(_h=!0,un.unstable_scheduleCallback(un.unstable_NormalPriority,tx)))}function ka(t){function e(i){return Ho(i,t)}if(0<Bl.length){Ho(Bl[0],t);for(var n=1;n<Bl.length;n++){var r=Bl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Zr!==null&&Ho(Zr,t),ei!==null&&Ho(ei,t),ti!==null&&Ho(ti,t),Ca.forEach(e),Pa.forEach(e),n=0;n<$r.length;n++)r=$r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$r.length&&(n=$r[0],n.blockedOn===null);)V_(n),n.blockedOn===null&&$r.shift()}var Bs=Ar.ReactCurrentBatchConfig,Du=!0;function nx(t,e,n,r){var i=Ne,s=Bs.transition;Bs.transition=null;try{Ne=1,jf(t,e,n,r)}finally{Ne=i,Bs.transition=s}}function rx(t,e,n,r){var i=Ne,s=Bs.transition;Bs.transition=null;try{Ne=4,jf(t,e,n,r)}finally{Ne=i,Bs.transition=s}}function jf(t,e,n,r){if(Du){var i=wh(t,e,n,r);if(i===null)Pd(t,e,r,bu,n),sg(t,r);else if(ex(i,t,e,n,r))r.stopPropagation();else if(sg(t,r),e&4&&-1<ZI.indexOf(t)){for(;i!==null;){var s=il(i);if(s!==null&&D_(s),s=wh(t,e,n,r),s===null&&Pd(t,e,r,bu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pd(t,e,r,null,n)}}var bu=null;function wh(t,e,n,r){if(bu=null,t=Of(r),t=Mi(t),t!==null)if(e=ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=x_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bu=t,null}function M_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(WI()){case Lf:return 1;case C_:return 4;case ku:case HI:return 16;case P_:return 536870912;default:return 16}default:return 16}}var Qr=null,Uf=null,lu=null;function j_(){if(lu)return lu;var t,e=Uf,n=e.length,r,i="value"in Qr?Qr.value:Qr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return lu=i.slice(t,1<r?1-r:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zl(){return!0}function ag(){return!1}function hn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zl:ag,this.isPropagationStopped=ag,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),e}var po={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ff=hn(po),rl=Ge({},po,{view:0,detail:0}),ix=hn(rl),wd,Ed,qo,vc=Ge({},rl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(wd=t.screenX-qo.screenX,Ed=t.screenY-qo.screenY):Ed=wd=0,qo=t),wd)},movementY:function(t){return"movementY"in t?t.movementY:Ed}}),lg=hn(vc),sx=Ge({},vc,{dataTransfer:0}),ox=hn(sx),ax=Ge({},rl,{relatedTarget:0}),Td=hn(ax),lx=Ge({},po,{animationName:0,elapsedTime:0,pseudoElement:0}),ux=hn(lx),cx=Ge({},po,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dx=hn(cx),hx=Ge({},po,{data:0}),ug=hn(hx),fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},px={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mx[t])?!!e[t]:!1}function Bf(){return gx}var yx=Ge({},rl,{key:function(t){if(t.key){var e=fx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?px[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bf,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),vx=hn(yx),_x=Ge({},vc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cg=hn(_x),wx=Ge({},rl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bf}),Ex=hn(wx),Tx=Ge({},po,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ix=hn(Tx),xx=Ge({},vc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Sx=hn(xx),Rx=[9,13,27,32],zf=vr&&"CompositionEvent"in window,fa=null;vr&&"documentMode"in document&&(fa=document.documentMode);var Ax=vr&&"TextEvent"in window&&!fa,U_=vr&&(!zf||fa&&8<fa&&11>=fa),dg=" ",hg=!1;function F_(t,e){switch(t){case"keyup":return Rx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var As=!1;function Cx(t,e){switch(t){case"compositionend":return B_(e);case"keypress":return e.which!==32?null:(hg=!0,dg);case"textInput":return t=e.data,t===dg&&hg?null:t;default:return null}}function Px(t,e){if(As)return t==="compositionend"||!zf&&F_(t,e)?(t=j_(),lu=Uf=Qr=null,As=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return U_&&e.locale!=="ko"?null:e.data;default:return null}}var kx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kx[t.type]:e==="textarea"}function z_(t,e,n,r){__(r),e=Ou(e,"onChange"),0<e.length&&(n=new Ff("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pa=null,Na=null;function Nx(t){Z_(t,0)}function _c(t){var e=ks(t);if(h_(e))return t}function Dx(t,e){if(t==="change")return e}var $_=!1;if(vr){var Id;if(vr){var xd="oninput"in document;if(!xd){var pg=document.createElement("div");pg.setAttribute("oninput","return;"),xd=typeof pg.oninput=="function"}Id=xd}else Id=!1;$_=Id&&(!document.documentMode||9<document.documentMode)}function mg(){pa&&(pa.detachEvent("onpropertychange",W_),Na=pa=null)}function W_(t){if(t.propertyName==="value"&&_c(Na)){var e=[];z_(e,Na,t,Of(t)),I_(Nx,e)}}function bx(t,e,n){t==="focusin"?(mg(),pa=e,Na=n,pa.attachEvent("onpropertychange",W_)):t==="focusout"&&mg()}function Ox(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _c(Na)}function Lx(t,e){if(t==="click")return _c(e)}function Vx(t,e){if(t==="input"||t==="change")return _c(e)}function Mx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ln=typeof Object.is=="function"?Object.is:Mx;function Da(t,e){if(Ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!nh.call(e,i)||!Ln(t[i],e[i]))return!1}return!0}function gg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function yg(t,e){var n=gg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gg(n)}}function H_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function q_(){for(var t=window,e=Au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Au(t.document)}return e}function $f(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function jx(t){var e=q_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&H_(n.ownerDocument.documentElement,n)){if(r!==null&&$f(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=yg(n,s);var o=yg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ux=vr&&"documentMode"in document&&11>=document.documentMode,Cs=null,Eh=null,ma=null,Th=!1;function vg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Th||Cs==null||Cs!==Au(r)||(r=Cs,"selectionStart"in r&&$f(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ma&&Da(ma,r)||(ma=r,r=Ou(Eh,"onSelect"),0<r.length&&(e=new Ff("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Cs)))}function $l(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ps={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},Sd={},K_={};vr&&(K_=document.createElement("div").style,"AnimationEvent"in window||(delete Ps.animationend.animation,delete Ps.animationiteration.animation,delete Ps.animationstart.animation),"TransitionEvent"in window||delete Ps.transitionend.transition);function wc(t){if(Sd[t])return Sd[t];if(!Ps[t])return t;var e=Ps[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in K_)return Sd[t]=e[n];return t}var G_=wc("animationend"),Q_=wc("animationiteration"),Y_=wc("animationstart"),X_=wc("transitionend"),J_=new Map,_g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vi(t,e){J_.set(t,e),is(e,[t])}for(var Rd=0;Rd<_g.length;Rd++){var Ad=_g[Rd],Fx=Ad.toLowerCase(),Bx=Ad[0].toUpperCase()+Ad.slice(1);vi(Fx,"on"+Bx)}vi(G_,"onAnimationEnd");vi(Q_,"onAnimationIteration");vi(Y_,"onAnimationStart");vi("dblclick","onDoubleClick");vi("focusin","onFocus");vi("focusout","onBlur");vi(X_,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zx=new Set("cancel close invalid load scroll toggle".split(" ").concat(ra));function wg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,FI(r,e,void 0,t),t.currentTarget=null}function Z_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;wg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;wg(i,l,c),s=u}}}if(Pu)throw t=yh,Pu=!1,yh=null,t}function Ue(t,e){var n=e[Ah];n===void 0&&(n=e[Ah]=new Set);var r=t+"__bubble";n.has(r)||(e0(e,t,2,!1),n.add(r))}function Cd(t,e,n){var r=0;e&&(r|=4),e0(n,t,r,e)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function ba(t){if(!t[Wl]){t[Wl]=!0,a_.forEach(function(n){n!=="selectionchange"&&(zx.has(n)||Cd(n,!1,t),Cd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wl]||(e[Wl]=!0,Cd("selectionchange",!1,e))}}function e0(t,e,n,r){switch(M_(e)){case 1:var i=nx;break;case 4:i=rx;break;default:i=jf}n=i.bind(null,e,n,t),i=void 0,!gh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Mi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}I_(function(){var c=s,h=Of(n),m=[];e:{var g=J_.get(t);if(g!==void 0){var E=Ff,R=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":E=vx;break;case"focusin":R="focus",E=Td;break;case"focusout":R="blur",E=Td;break;case"beforeblur":case"afterblur":E=Td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=ox;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=Ex;break;case G_:case Q_:case Y_:E=ux;break;case X_:E=Ix;break;case"scroll":E=ix;break;case"wheel":E=Sx;break;case"copy":case"cut":case"paste":E=dx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=cg}var P=(e&4)!==0,D=!P&&t==="scroll",x=P?g!==null?g+"Capture":null:g;P=[];for(var _=c,A;_!==null;){A=_;var V=A.stateNode;if(A.tag===5&&V!==null&&(A=V,x!==null&&(V=Aa(_,x),V!=null&&P.push(Oa(_,V,A)))),D)break;_=_.return}0<P.length&&(g=new E(g,R,null,n,h),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",g&&n!==ph&&(R=n.relatedTarget||n.fromElement)&&(Mi(R)||R[_r]))break e;if((E||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,E?(R=n.relatedTarget||n.toElement,E=c,R=R?Mi(R):null,R!==null&&(D=ss(R),R!==D||R.tag!==5&&R.tag!==6)&&(R=null)):(E=null,R=c),E!==R)){if(P=lg,V="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(P=cg,V="onPointerLeave",x="onPointerEnter",_="pointer"),D=E==null?g:ks(E),A=R==null?g:ks(R),g=new P(V,_+"leave",E,n,h),g.target=D,g.relatedTarget=A,V=null,Mi(h)===c&&(P=new P(x,_+"enter",R,n,h),P.target=A,P.relatedTarget=D,V=P),D=V,E&&R)t:{for(P=E,x=R,_=0,A=P;A;A=ws(A))_++;for(A=0,V=x;V;V=ws(V))A++;for(;0<_-A;)P=ws(P),_--;for(;0<A-_;)x=ws(x),A--;for(;_--;){if(P===x||x!==null&&P===x.alternate)break t;P=ws(P),x=ws(x)}P=null}else P=null;E!==null&&Eg(m,g,E,P,!1),R!==null&&D!==null&&Eg(m,D,R,P,!0)}}e:{if(g=c?ks(c):window,E=g.nodeName&&g.nodeName.toLowerCase(),E==="select"||E==="input"&&g.type==="file")var U=Dx;else if(fg(g))if($_)U=Vx;else{U=Ox;var B=bx}else(E=g.nodeName)&&E.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(U=Lx);if(U&&(U=U(t,c))){z_(m,U,n,h);break e}B&&B(t,g,c),t==="focusout"&&(B=g._wrapperState)&&B.controlled&&g.type==="number"&&uh(g,"number",g.value)}switch(B=c?ks(c):window,t){case"focusin":(fg(B)||B.contentEditable==="true")&&(Cs=B,Eh=c,ma=null);break;case"focusout":ma=Eh=Cs=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,vg(m,n,h);break;case"selectionchange":if(Ux)break;case"keydown":case"keyup":vg(m,n,h)}var y;if(zf)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else As?F_(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(U_&&n.locale!=="ko"&&(As||v!=="onCompositionStart"?v==="onCompositionEnd"&&As&&(y=j_()):(Qr=h,Uf="value"in Qr?Qr.value:Qr.textContent,As=!0)),B=Ou(c,v),0<B.length&&(v=new ug(v,t,null,n,h),m.push({event:v,listeners:B}),y?v.data=y:(y=B_(n),y!==null&&(v.data=y)))),(y=Ax?Cx(t,n):Px(t,n))&&(c=Ou(c,"onBeforeInput"),0<c.length&&(h=new ug("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:c}),h.data=y))}Z_(m,e)})}function Oa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ou(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Aa(t,n),s!=null&&r.unshift(Oa(t,s,i)),s=Aa(t,e),s!=null&&r.push(Oa(t,s,i))),t=t.return}return r}function ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Aa(n,s),u!=null&&o.unshift(Oa(n,u,l))):i||(u=Aa(n,s),u!=null&&o.push(Oa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var $x=/\r\n?/g,Wx=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace($x,`
`).replace(Wx,"")}function Hl(t,e,n){if(e=Tg(e),Tg(t)!==e&&n)throw Error(H(425))}function Lu(){}var Ih=null,xh=null;function Sh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rh=typeof setTimeout=="function"?setTimeout:void 0,Hx=typeof clearTimeout=="function"?clearTimeout:void 0,Ig=typeof Promise=="function"?Promise:void 0,qx=typeof queueMicrotask=="function"?queueMicrotask:typeof Ig<"u"?function(t){return Ig.resolve(null).then(t).catch(Kx)}:Rh;function Kx(t){setTimeout(function(){throw t})}function kd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ka(e)}function ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function xg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var mo=Math.random().toString(36).slice(2),Hn="__reactFiber$"+mo,La="__reactProps$"+mo,_r="__reactContainer$"+mo,Ah="__reactEvents$"+mo,Gx="__reactListeners$"+mo,Qx="__reactHandles$"+mo;function Mi(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_r]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=xg(t);t!==null;){if(n=t[Hn])return n;t=xg(t)}return e}t=n,n=t.parentNode}return null}function il(t){return t=t[Hn]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ks(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Ec(t){return t[La]||null}var Ch=[],Ns=-1;function _i(t){return{current:t}}function Be(t){0>Ns||(t.current=Ch[Ns],Ch[Ns]=null,Ns--)}function Ve(t,e){Ns++,Ch[Ns]=t.current,t.current=e}var fi={},Mt=_i(fi),Yt=_i(!1),Hi=fi;function Qs(t,e){var n=t.type.contextTypes;if(!n)return fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Xt(t){return t=t.childContextTypes,t!=null}function Vu(){Be(Yt),Be(Mt)}function Sg(t,e,n){if(Mt.current!==fi)throw Error(H(168));Ve(Mt,e),Ve(Yt,n)}function t0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,bI(t)||"Unknown",i));return Ge({},n,r)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,Hi=Mt.current,Ve(Mt,t),Ve(Yt,Yt.current),!0}function Rg(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=t0(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,Be(Yt),Be(Mt),Ve(Mt,t)):Be(Yt),Ve(Yt,n)}var ar=null,Tc=!1,Nd=!1;function n0(t){ar===null?ar=[t]:ar.push(t)}function Yx(t){Tc=!0,n0(t)}function wi(){if(!Nd&&ar!==null){Nd=!0;var t=0,e=Ne;try{var n=ar;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ar=null,Tc=!1}catch(i){throw ar!==null&&(ar=ar.slice(t+1)),A_(Lf,wi),i}finally{Ne=e,Nd=!1}}return null}var Ds=[],bs=0,ju=null,Uu=0,gn=[],yn=0,qi=null,lr=1,ur="";function Di(t,e){Ds[bs++]=Uu,Ds[bs++]=ju,ju=t,Uu=e}function r0(t,e,n){gn[yn++]=lr,gn[yn++]=ur,gn[yn++]=qi,qi=t;var r=lr;t=ur;var i=32-bn(r)-1;r&=~(1<<i),n+=1;var s=32-bn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,lr=1<<32-bn(e)+i|n<<i|r,ur=s+t}else lr=1<<s|n<<i|r,ur=t}function Wf(t){t.return!==null&&(Di(t,1),r0(t,1,0))}function Hf(t){for(;t===ju;)ju=Ds[--bs],Ds[bs]=null,Uu=Ds[--bs],Ds[bs]=null;for(;t===qi;)qi=gn[--yn],gn[yn]=null,ur=gn[--yn],gn[yn]=null,lr=gn[--yn],gn[yn]=null}var ln=null,on=null,He=!1,Dn=null;function i0(t,e){var n=vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ag(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ln=t,on=ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ln=t,on=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qi!==null?{id:lr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ln=t,on=null,!0):!1;default:return!1}}function Ph(t){return(t.mode&1)!==0&&(t.flags&128)===0}function kh(t){if(He){var e=on;if(e){var n=e;if(!Ag(t,e)){if(Ph(t))throw Error(H(418));e=ni(n.nextSibling);var r=ln;e&&Ag(t,e)?i0(r,n):(t.flags=t.flags&-4097|2,He=!1,ln=t)}}else{if(Ph(t))throw Error(H(418));t.flags=t.flags&-4097|2,He=!1,ln=t}}}function Cg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ln=t}function ql(t){if(t!==ln)return!1;if(!He)return Cg(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sh(t.type,t.memoizedProps)),e&&(e=on)){if(Ph(t))throw s0(),Error(H(418));for(;e;)i0(t,e),e=ni(e.nextSibling)}if(Cg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){on=ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}on=null}}else on=ln?ni(t.stateNode.nextSibling):null;return!0}function s0(){for(var t=on;t;)t=ni(t.nextSibling)}function Ys(){on=ln=null,He=!1}function qf(t){Dn===null?Dn=[t]:Dn.push(t)}var Xx=Ar.ReactCurrentBatchConfig;function Ko(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function Kl(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pg(t){var e=t._init;return e(t._payload)}function o0(t){function e(x,_){if(t){var A=x.deletions;A===null?(x.deletions=[_],x.flags|=16):A.push(_)}}function n(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function r(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function i(x,_){return x=oi(x,_),x.index=0,x.sibling=null,x}function s(x,_,A){return x.index=A,t?(A=x.alternate,A!==null?(A=A.index,A<_?(x.flags|=2,_):A):(x.flags|=2,_)):(x.flags|=1048576,_)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,_,A,V){return _===null||_.tag!==6?(_=jd(A,x.mode,V),_.return=x,_):(_=i(_,A),_.return=x,_)}function u(x,_,A,V){var U=A.type;return U===Rs?h(x,_,A.props.children,V,A.key):_!==null&&(_.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Br&&Pg(U)===_.type)?(V=i(_,A.props),V.ref=Ko(x,_,A),V.return=x,V):(V=gu(A.type,A.key,A.props,null,x.mode,V),V.ref=Ko(x,_,A),V.return=x,V)}function c(x,_,A,V){return _===null||_.tag!==4||_.stateNode.containerInfo!==A.containerInfo||_.stateNode.implementation!==A.implementation?(_=Ud(A,x.mode,V),_.return=x,_):(_=i(_,A.children||[]),_.return=x,_)}function h(x,_,A,V,U){return _===null||_.tag!==7?(_=$i(A,x.mode,V,U),_.return=x,_):(_=i(_,A),_.return=x,_)}function m(x,_,A){if(typeof _=="string"&&_!==""||typeof _=="number")return _=jd(""+_,x.mode,A),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Vl:return A=gu(_.type,_.key,_.props,null,x.mode,A),A.ref=Ko(x,null,_),A.return=x,A;case Ss:return _=Ud(_,x.mode,A),_.return=x,_;case Br:var V=_._init;return m(x,V(_._payload),A)}if(ta(_)||zo(_))return _=$i(_,x.mode,A,null),_.return=x,_;Kl(x,_)}return null}function g(x,_,A,V){var U=_!==null?_.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return U!==null?null:l(x,_,""+A,V);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Vl:return A.key===U?u(x,_,A,V):null;case Ss:return A.key===U?c(x,_,A,V):null;case Br:return U=A._init,g(x,_,U(A._payload),V)}if(ta(A)||zo(A))return U!==null?null:h(x,_,A,V,null);Kl(x,A)}return null}function E(x,_,A,V,U){if(typeof V=="string"&&V!==""||typeof V=="number")return x=x.get(A)||null,l(_,x,""+V,U);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Vl:return x=x.get(V.key===null?A:V.key)||null,u(_,x,V,U);case Ss:return x=x.get(V.key===null?A:V.key)||null,c(_,x,V,U);case Br:var B=V._init;return E(x,_,A,B(V._payload),U)}if(ta(V)||zo(V))return x=x.get(A)||null,h(_,x,V,U,null);Kl(_,V)}return null}function R(x,_,A,V){for(var U=null,B=null,y=_,v=_=0,T=null;y!==null&&v<A.length;v++){y.index>v?(T=y,y=null):T=y.sibling;var I=g(x,y,A[v],V);if(I===null){y===null&&(y=T);break}t&&y&&I.alternate===null&&e(x,y),_=s(I,_,v),B===null?U=I:B.sibling=I,B=I,y=T}if(v===A.length)return n(x,y),He&&Di(x,v),U;if(y===null){for(;v<A.length;v++)y=m(x,A[v],V),y!==null&&(_=s(y,_,v),B===null?U=y:B.sibling=y,B=y);return He&&Di(x,v),U}for(y=r(x,y);v<A.length;v++)T=E(y,x,v,A[v],V),T!==null&&(t&&T.alternate!==null&&y.delete(T.key===null?v:T.key),_=s(T,_,v),B===null?U=T:B.sibling=T,B=T);return t&&y.forEach(function(S){return e(x,S)}),He&&Di(x,v),U}function P(x,_,A,V){var U=zo(A);if(typeof U!="function")throw Error(H(150));if(A=U.call(A),A==null)throw Error(H(151));for(var B=U=null,y=_,v=_=0,T=null,I=A.next();y!==null&&!I.done;v++,I=A.next()){y.index>v?(T=y,y=null):T=y.sibling;var S=g(x,y,I.value,V);if(S===null){y===null&&(y=T);break}t&&y&&S.alternate===null&&e(x,y),_=s(S,_,v),B===null?U=S:B.sibling=S,B=S,y=T}if(I.done)return n(x,y),He&&Di(x,v),U;if(y===null){for(;!I.done;v++,I=A.next())I=m(x,I.value,V),I!==null&&(_=s(I,_,v),B===null?U=I:B.sibling=I,B=I);return He&&Di(x,v),U}for(y=r(x,y);!I.done;v++,I=A.next())I=E(y,x,v,I.value,V),I!==null&&(t&&I.alternate!==null&&y.delete(I.key===null?v:I.key),_=s(I,_,v),B===null?U=I:B.sibling=I,B=I);return t&&y.forEach(function(N){return e(x,N)}),He&&Di(x,v),U}function D(x,_,A,V){if(typeof A=="object"&&A!==null&&A.type===Rs&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Vl:e:{for(var U=A.key,B=_;B!==null;){if(B.key===U){if(U=A.type,U===Rs){if(B.tag===7){n(x,B.sibling),_=i(B,A.props.children),_.return=x,x=_;break e}}else if(B.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Br&&Pg(U)===B.type){n(x,B.sibling),_=i(B,A.props),_.ref=Ko(x,B,A),_.return=x,x=_;break e}n(x,B);break}else e(x,B);B=B.sibling}A.type===Rs?(_=$i(A.props.children,x.mode,V,A.key),_.return=x,x=_):(V=gu(A.type,A.key,A.props,null,x.mode,V),V.ref=Ko(x,_,A),V.return=x,x=V)}return o(x);case Ss:e:{for(B=A.key;_!==null;){if(_.key===B)if(_.tag===4&&_.stateNode.containerInfo===A.containerInfo&&_.stateNode.implementation===A.implementation){n(x,_.sibling),_=i(_,A.children||[]),_.return=x,x=_;break e}else{n(x,_);break}else e(x,_);_=_.sibling}_=Ud(A,x.mode,V),_.return=x,x=_}return o(x);case Br:return B=A._init,D(x,_,B(A._payload),V)}if(ta(A))return R(x,_,A,V);if(zo(A))return P(x,_,A,V);Kl(x,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,_!==null&&_.tag===6?(n(x,_.sibling),_=i(_,A),_.return=x,x=_):(n(x,_),_=jd(A,x.mode,V),_.return=x,x=_),o(x)):n(x,_)}return D}var Xs=o0(!0),a0=o0(!1),Fu=_i(null),Bu=null,Os=null,Kf=null;function Gf(){Kf=Os=Bu=null}function Qf(t){var e=Fu.current;Be(Fu),t._currentValue=e}function Nh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zs(t,e){Bu=t,Kf=Os=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Kf!==t)if(t={context:t,memoizedValue:e,next:null},Os===null){if(Bu===null)throw Error(H(308));Os=t,Bu.dependencies={lanes:0,firstContext:t}}else Os=Os.next=t;return e}var ji=null;function Yf(t){ji===null?ji=[t]:ji.push(t)}function l0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Yf(e)):(n.next=i.next,i.next=n),e.interleaved=n,wr(t,r)}function wr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zr=!1;function Xf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function u0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,wr(t,n)}return i=r.interleaved,i===null?(e.next=e,Yf(r)):(e.next=i.next,i.next=e),r.interleaved=e,wr(t,n)}function cu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vf(t,n)}}function kg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,r){var i=t.updateQueue;zr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,h=c=u=null,l=s;do{var g=l.lane,E=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:E,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var R=t,P=l;switch(g=e,E=n,P.tag){case 1:if(R=P.payload,typeof R=="function"){m=R.call(E,m,g);break e}m=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=P.payload,g=typeof R=="function"?R.call(E,m,g):R,g==null)break e;m=Ge({},m,g);break e;case 2:zr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else E={eventTime:E,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=E,u=m):h=h.next=E,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Gi|=o,t.lanes=o,t.memoizedState=m}}function Ng(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var sl={},Kn=_i(sl),Va=_i(sl),Ma=_i(sl);function Ui(t){if(t===sl)throw Error(H(174));return t}function Jf(t,e){switch(Ve(Ma,e),Ve(Va,t),Ve(Kn,sl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dh(e,t)}Be(Kn),Ve(Kn,e)}function Js(){Be(Kn),Be(Va),Be(Ma)}function c0(t){Ui(Ma.current);var e=Ui(Kn.current),n=dh(e,t.type);e!==n&&(Ve(Va,t),Ve(Kn,n))}function Zf(t){Va.current===t&&(Be(Kn),Be(Va))}var qe=_i(0);function $u(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dd=[];function ep(){for(var t=0;t<Dd.length;t++)Dd[t]._workInProgressVersionPrimary=null;Dd.length=0}var du=Ar.ReactCurrentDispatcher,bd=Ar.ReactCurrentBatchConfig,Ki=0,Ke=null,ct=null,mt=null,Wu=!1,ga=!1,ja=0,Jx=0;function Nt(){throw Error(H(321))}function tp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ln(t[n],e[n]))return!1;return!0}function np(t,e,n,r,i,s){if(Ki=s,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,du.current=t===null||t.memoizedState===null?nS:rS,t=n(r,i),ga){s=0;do{if(ga=!1,ja=0,25<=s)throw Error(H(301));s+=1,mt=ct=null,e.updateQueue=null,du.current=iS,t=n(r,i)}while(ga)}if(du.current=Hu,e=ct!==null&&ct.next!==null,Ki=0,mt=ct=Ke=null,Wu=!1,e)throw Error(H(300));return t}function rp(){var t=ja!==0;return ja=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ke.memoizedState=mt=t:mt=mt.next=t,mt}function Tn(){if(ct===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=mt===null?Ke.memoizedState:mt.next;if(e!==null)mt=e,ct=t;else{if(t===null)throw Error(H(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},mt===null?Ke.memoizedState=mt=t:mt=mt.next=t}return mt}function Ua(t,e){return typeof e=="function"?e(t):e}function Od(t){var e=Tn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=ct,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((Ki&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ke.lanes|=h,Gi|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Ln(r,e.memoizedState)||(Qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ke.lanes|=s,Gi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ld(t){var e=Tn(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ln(s,e.memoizedState)||(Qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function d0(){}function h0(t,e){var n=Ke,r=Tn(),i=e(),s=!Ln(r.memoizedState,i);if(s&&(r.memoizedState=i,Qt=!0),r=r.queue,ip(m0.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||mt!==null&&mt.memoizedState.tag&1){if(n.flags|=2048,Fa(9,p0.bind(null,n,r,i,e),void 0,null),gt===null)throw Error(H(349));Ki&30||f0(n,e,i)}return i}function f0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function p0(t,e,n,r){e.value=n,e.getSnapshot=r,g0(e)&&y0(t)}function m0(t,e,n){return n(function(){g0(e)&&y0(t)})}function g0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ln(t,n)}catch{return!0}}function y0(t){var e=wr(t,1);e!==null&&On(e,t,1,-1)}function Dg(t){var e=Wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ua,lastRenderedState:t},e.queue=t,t=t.dispatch=tS.bind(null,Ke,t),[e.memoizedState,t]}function Fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function v0(){return Tn().memoizedState}function hu(t,e,n,r){var i=Wn();Ke.flags|=t,i.memoizedState=Fa(1|e,n,void 0,r===void 0?null:r)}function Ic(t,e,n,r){var i=Tn();r=r===void 0?null:r;var s=void 0;if(ct!==null){var o=ct.memoizedState;if(s=o.destroy,r!==null&&tp(r,o.deps)){i.memoizedState=Fa(e,n,s,r);return}}Ke.flags|=t,i.memoizedState=Fa(1|e,n,s,r)}function bg(t,e){return hu(8390656,8,t,e)}function ip(t,e){return Ic(2048,8,t,e)}function _0(t,e){return Ic(4,2,t,e)}function w0(t,e){return Ic(4,4,t,e)}function E0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function T0(t,e,n){return n=n!=null?n.concat([t]):null,Ic(4,4,E0.bind(null,e,t),n)}function sp(){}function I0(t,e){var n=Tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function x0(t,e){var n=Tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&tp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function S0(t,e,n){return Ki&21?(Ln(n,e)||(n=k_(),Ke.lanes|=n,Gi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function Zx(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=bd.transition;bd.transition={};try{t(!1),e()}finally{Ne=n,bd.transition=r}}function R0(){return Tn().memoizedState}function eS(t,e,n){var r=si(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},A0(t))C0(e,n);else if(n=l0(t,e,n,r),n!==null){var i=zt();On(n,t,r,i),P0(n,e,r)}}function tS(t,e,n){var r=si(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(A0(t))C0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Ln(l,o)){var u=e.interleaved;u===null?(i.next=i,Yf(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=l0(t,e,i,r),n!==null&&(i=zt(),On(n,t,r,i),P0(n,e,r))}}function A0(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function C0(t,e){ga=Wu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function P0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vf(t,n)}}var Hu={readContext:En,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},nS={readContext:En,useCallback:function(t,e){return Wn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:bg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hu(4194308,4,E0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hu(4194308,4,t,e)},useInsertionEffect:function(t,e){return hu(4,2,t,e)},useMemo:function(t,e){var n=Wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=eS.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=Wn();return t={current:t},e.memoizedState=t},useState:Dg,useDebugValue:sp,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=Dg(!1),e=t[0];return t=Zx.bind(null,t[1]),Wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,i=Wn();if(He){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),gt===null)throw Error(H(349));Ki&30||f0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bg(m0.bind(null,r,s,t),[t]),r.flags|=2048,Fa(9,p0.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wn(),e=gt.identifierPrefix;if(He){var n=ur,r=lr;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Jx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},rS={readContext:En,useCallback:I0,useContext:En,useEffect:ip,useImperativeHandle:T0,useInsertionEffect:_0,useLayoutEffect:w0,useMemo:x0,useReducer:Od,useRef:v0,useState:function(){return Od(Ua)},useDebugValue:sp,useDeferredValue:function(t){var e=Tn();return S0(e,ct.memoizedState,t)},useTransition:function(){var t=Od(Ua)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:d0,useSyncExternalStore:h0,useId:R0,unstable_isNewReconciler:!1},iS={readContext:En,useCallback:I0,useContext:En,useEffect:ip,useImperativeHandle:T0,useInsertionEffect:_0,useLayoutEffect:w0,useMemo:x0,useReducer:Ld,useRef:v0,useState:function(){return Ld(Ua)},useDebugValue:sp,useDeferredValue:function(t){var e=Tn();return ct===null?e.memoizedState=t:S0(e,ct.memoizedState,t)},useTransition:function(){var t=Ld(Ua)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:d0,useSyncExternalStore:h0,useId:R0,unstable_isNewReconciler:!1};function Pn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var xc={isMounted:function(t){return(t=t._reactInternals)?ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=zt(),i=si(t),s=mr(r,i);s.payload=e,n!=null&&(s.callback=n),e=ri(t,s,i),e!==null&&(On(e,t,i,r),cu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=zt(),i=si(t),s=mr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ri(t,s,i),e!==null&&(On(e,t,i,r),cu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=zt(),r=si(t),i=mr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ri(t,i,r),e!==null&&(On(e,t,r,n),cu(e,t,r))}};function Og(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Da(n,r)||!Da(i,s):!0}function k0(t,e,n){var r=!1,i=fi,s=e.contextType;return typeof s=="object"&&s!==null?s=En(s):(i=Xt(e)?Hi:Mt.current,r=e.contextTypes,s=(r=r!=null)?Qs(t,i):fi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=xc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Lg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&xc.enqueueReplaceState(e,e.state,null)}function bh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Xf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=En(s):(s=Xt(e)?Hi:Mt.current,i.context=Qs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&xc.enqueueReplaceState(i,i.state,null),zu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",r=e;do n+=DI(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Vd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Oh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var sS=typeof WeakMap=="function"?WeakMap:Map;function N0(t,e,n){n=mr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ku||(Ku=!0,Wh=r),Oh(t,e)},n}function D0(t,e,n){n=mr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Oh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Oh(t,e),typeof r!="function"&&(ii===null?ii=new Set([this]):ii.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new sS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_S.bind(null,t,e,n),e.then(t,t))}function Mg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function jg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=mr(-1,1),e.tag=2,ri(n,e,1))),n.lanes|=1),t)}var oS=Ar.ReactCurrentOwner,Qt=!1;function Bt(t,e,n,r){e.child=t===null?a0(e,null,n,r):Xs(e,t.child,n,r)}function Ug(t,e,n,r,i){n=n.render;var s=e.ref;return zs(e,i),r=np(t,e,n,r,s,i),n=rp(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(He&&n&&Wf(e),e.flags|=1,Bt(t,e,r,i),e.child)}function Fg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!fp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,b0(t,e,s,r,i)):(t=gu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Da,n(o,r)&&t.ref===e.ref)return Er(t,e,i)}return e.flags|=1,t=oi(s,r),t.ref=e.ref,t.return=e,e.child=t}function b0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Da(s,r)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Er(t,e,i)}return Lh(t,e,n,r,i)}function O0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(Vs,rn),rn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(Vs,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(Vs,rn),rn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ve(Vs,rn),rn|=r;return Bt(t,e,i,n),e.child}function L0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Lh(t,e,n,r,i){var s=Xt(n)?Hi:Mt.current;return s=Qs(e,s),zs(e,i),n=np(t,e,n,r,s,i),r=rp(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Er(t,e,i)):(He&&r&&Wf(e),e.flags|=1,Bt(t,e,n,i),e.child)}function Bg(t,e,n,r,i){if(Xt(n)){var s=!0;Mu(e)}else s=!1;if(zs(e,i),e.stateNode===null)fu(t,e),k0(e,n,r),bh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=En(c):(c=Xt(n)?Hi:Mt.current,c=Qs(e,c));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&Lg(e,o,r,c),zr=!1;var g=e.memoizedState;o.state=g,zu(e,r,o,i),u=e.memoizedState,l!==r||g!==u||Yt.current||zr?(typeof h=="function"&&(Dh(e,n,h,r),u=e.memoizedState),(l=zr||Og(e,n,l,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,u0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Pn(e.type,l),o.props=c,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=En(u):(u=Xt(n)?Hi:Mt.current,u=Qs(e,u));var E=n.getDerivedStateFromProps;(h=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&Lg(e,o,r,u),zr=!1,g=e.memoizedState,o.state=g,zu(e,r,o,i);var R=e.memoizedState;l!==m||g!==R||Yt.current||zr?(typeof E=="function"&&(Dh(e,n,E,r),R=e.memoizedState),(c=zr||Og(e,n,c,r,g,R,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,R,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,R,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=R),o.props=r,o.state=R,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Vh(t,e,n,r,s,i)}function Vh(t,e,n,r,i,s){L0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Rg(e,n,!1),Er(t,e,s);r=e.stateNode,oS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xs(e,t.child,null,s),e.child=Xs(e,null,l,s)):Bt(t,e,l,s),e.memoizedState=r.state,i&&Rg(e,n,!0),e.child}function V0(t){var e=t.stateNode;e.pendingContext?Sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sg(t,e.context,!1),Jf(t,e.containerInfo)}function zg(t,e,n,r,i){return Ys(),qf(i),e.flags|=256,Bt(t,e,n,r),e.child}var Mh={dehydrated:null,treeContext:null,retryLane:0};function jh(t){return{baseLanes:t,cachePool:null,transitions:null}}function M0(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(qe,i&1),t===null)return kh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ac(o,r,0,null),t=$i(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=jh(n),e.memoizedState=Mh,t):op(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return aS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=oi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=oi(l,s):(s=$i(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?jh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Mh,r}return s=t.child,t=s.sibling,r=oi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function op(t,e){return e=Ac({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Gl(t,e,n,r){return r!==null&&qf(r),Xs(e,t.child,null,n),t=op(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function aS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Vd(Error(H(422))),Gl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ac({mode:"visible",children:r.children},i,0,null),s=$i(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Xs(e,t.child,null,o),e.child.memoizedState=jh(o),e.memoizedState=Mh,s);if(!(e.mode&1))return Gl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(H(419)),r=Vd(s,r,void 0),Gl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Qt||l){if(r=gt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wr(t,i),On(r,t,i,-1))}return hp(),r=Vd(Error(H(421))),Gl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=wS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,on=ni(i.nextSibling),ln=e,He=!0,Dn=null,t!==null&&(gn[yn++]=lr,gn[yn++]=ur,gn[yn++]=qi,lr=t.id,ur=t.overflow,qi=e),e=op(e,r.children),e.flags|=4096,e)}function $g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nh(t.return,e,n)}function Md(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function j0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Bt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$g(t,n,e);else if(t.tag===19)$g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$u(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Md(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$u(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Md(e,!0,n,null,s);break;case"together":Md(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function fu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Er(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Gi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function lS(t,e,n){switch(e.tag){case 3:V0(e),Ys();break;case 5:c0(e);break;case 1:Xt(e.type)&&Mu(e);break;case 4:Jf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(Fu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?M0(t,e,n):(Ve(qe,qe.current&1),t=Er(t,e,n),t!==null?t.sibling:null);Ve(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return j0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,O0(t,e,n)}return Er(t,e,n)}var U0,Uh,F0,B0;U0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Uh=function(){};F0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ui(Kn.current);var s=null;switch(n){case"input":i=ah(t,i),r=ah(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=ch(t,i),r=ch(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Lu)}hh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Sa.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Sa.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ue("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};B0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Go(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function uS(t,e,n){var r=e.pendingProps;switch(Hf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(e),null;case 1:return Xt(e.type)&&Vu(),Dt(e),null;case 3:return r=e.stateNode,Js(),Be(Yt),Be(Mt),ep(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ql(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(Kh(Dn),Dn=null))),Uh(t,e),Dt(e),null;case 5:Zf(e);var i=Ui(Ma.current);if(n=e.type,t!==null&&e.stateNode!=null)F0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return Dt(e),null}if(t=Ui(Kn.current),ql(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[La]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<ra.length;i++)Ue(ra[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Jm(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":eg(r,s),Ue("invalid",r)}hh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Hl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Hl(r.textContent,l,t),i=["children",""+l]):Sa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Ml(r),Zm(r,s,!0);break;case"textarea":Ml(r),tg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Lu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Hn]=e,t[La]=r,U0(t,e,!1,!1),e.stateNode=t;e:{switch(o=fh(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<ra.length;i++)Ue(ra[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":Jm(t,r),i=ah(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":eg(t,r),i=ch(t,r),Ue("invalid",t);break;default:i=r}hh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?v_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&g_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ra(t,u):typeof u=="number"&&Ra(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Sa.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ue("scroll",t):u!=null&&kf(t,s,u,o))}switch(n){case"input":Ml(t),Zm(t,r,!1);break;case"textarea":Ml(t),tg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+hi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?js(t,!!r.multiple,s,!1):r.defaultValue!=null&&js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Lu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Dt(e),null;case 6:if(t&&e.stateNode!=null)B0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=Ui(Ma.current),Ui(Kn.current),ql(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=ln,t!==null))switch(t.tag){case 3:Hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return Dt(e),null;case 13:if(Be(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&on!==null&&e.mode&1&&!(e.flags&128))s0(),Ys(),e.flags|=98560,s=!1;else if(s=ql(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[Hn]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Dt(e),s=!1}else Dn!==null&&(Kh(Dn),Dn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?dt===0&&(dt=3):hp())),e.updateQueue!==null&&(e.flags|=4),Dt(e),null);case 4:return Js(),Uh(t,e),t===null&&ba(e.stateNode.containerInfo),Dt(e),null;case 10:return Qf(e.type._context),Dt(e),null;case 17:return Xt(e.type)&&Vu(),Dt(e),null;case 19:if(Be(qe),s=e.memoizedState,s===null)return Dt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Go(s,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$u(t),o!==null){for(e.flags|=128,Go(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&et()>eo&&(e.flags|=128,r=!0,Go(s,!1),e.lanes=4194304)}else{if(!r)if(t=$u(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Go(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!He)return Dt(e),null}else 2*et()-s.renderingStartTime>eo&&n!==1073741824&&(e.flags|=128,r=!0,Go(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=et(),e.sibling=null,n=qe.current,Ve(qe,r?n&1|2:n&1),e):(Dt(e),null);case 22:case 23:return dp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(Dt(e),e.subtreeFlags&6&&(e.flags|=8192)):Dt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function cS(t,e){switch(Hf(e),e.tag){case 1:return Xt(e.type)&&Vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),Be(Yt),Be(Mt),ep(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Zf(e),null;case 13:if(Be(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(qe),null;case 4:return Js(),null;case 10:return Qf(e.type._context),null;case 22:case 23:return dp(),null;case 24:return null;default:return null}}var Ql=!1,Lt=!1,dS=typeof WeakSet=="function"?WeakSet:Set,X=null;function Ls(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function Fh(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var Wg=!1;function hS(t,e){if(Ih=Du,t=q_(),$f(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,m=t,g=null;t:for(;;){for(var E;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(E=m.firstChild)!==null;)g=m,m=E;for(;;){if(m===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++h===r&&(u=o),(E=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=E}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(xh={focusedElem:t,selectionRange:n},Du=!1,X=e;X!==null;)if(e=X,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,X=t;else for(;X!==null;){e=X;try{var R=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var P=R.memoizedProps,D=R.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?P:Pn(e.type,P),D);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(V){Xe(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}return R=Wg,Wg=!1,R}function ya(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Fh(e,n,s)}i=i.next}while(i!==r)}}function Sc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Bh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function z0(t){var e=t.alternate;e!==null&&(t.alternate=null,z0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[La],delete e[Ah],delete e[Gx],delete e[Qx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $0(t){return t.tag===5||t.tag===3||t.tag===4}function Hg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lu));else if(r!==4&&(t=t.child,t!==null))for(zh(t,e,n),t=t.sibling;t!==null;)zh(t,e,n),t=t.sibling}function $h(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($h(t,e,n),t=t.sibling;t!==null;)$h(t,e,n),t=t.sibling}var Et=null,kn=!1;function jr(t,e,n){for(n=n.child;n!==null;)W0(t,e,n),n=n.sibling}function W0(t,e,n){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(yc,n)}catch{}switch(n.tag){case 5:Lt||Ls(n,e);case 6:var r=Et,i=kn;Et=null,jr(t,e,n),Et=r,kn=i,Et!==null&&(kn?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(kn?(t=Et,n=n.stateNode,t.nodeType===8?kd(t.parentNode,n):t.nodeType===1&&kd(t,n),ka(t)):kd(Et,n.stateNode));break;case 4:r=Et,i=kn,Et=n.stateNode.containerInfo,kn=!0,jr(t,e,n),Et=r,kn=i;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Fh(n,e,o),i=i.next}while(i!==r)}jr(t,e,n);break;case 1:if(!Lt&&(Ls(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Xe(n,e,l)}jr(t,e,n);break;case 21:jr(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,jr(t,e,n),Lt=r):jr(t,e,n);break;default:jr(t,e,n)}}function qg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dS),e.forEach(function(r){var i=ES.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Et=l.stateNode,kn=!1;break e;case 3:Et=l.stateNode.containerInfo,kn=!0;break e;case 4:Et=l.stateNode.containerInfo,kn=!0;break e}l=l.return}if(Et===null)throw Error(H(160));W0(s,o,i),Et=null,kn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Xe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H0(e,t),e=e.sibling}function H0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cn(e,t),$n(t),r&4){try{ya(3,t,t.return),Sc(3,t)}catch(P){Xe(t,t.return,P)}try{ya(5,t,t.return)}catch(P){Xe(t,t.return,P)}}break;case 1:Cn(e,t),$n(t),r&512&&n!==null&&Ls(n,n.return);break;case 5:if(Cn(e,t),$n(t),r&512&&n!==null&&Ls(n,n.return),t.flags&32){var i=t.stateNode;try{Ra(i,"")}catch(P){Xe(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&f_(i,s),fh(l,o);var c=fh(l,s);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?v_(i,m):h==="dangerouslySetInnerHTML"?g_(i,m):h==="children"?Ra(i,m):kf(i,h,m,c)}switch(l){case"input":lh(i,s);break;case"textarea":p_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var E=s.value;E!=null?js(i,!!s.multiple,E,!1):g!==!!s.multiple&&(s.defaultValue!=null?js(i,!!s.multiple,s.defaultValue,!0):js(i,!!s.multiple,s.multiple?[]:"",!1))}i[La]=s}catch(P){Xe(t,t.return,P)}}break;case 6:if(Cn(e,t),$n(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Xe(t,t.return,P)}}break;case 3:if(Cn(e,t),$n(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(P){Xe(t,t.return,P)}break;case 4:Cn(e,t),$n(t);break;case 13:Cn(e,t),$n(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(up=et())),r&4&&qg(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(c=Lt)||h,Cn(e,t),Lt=c):Cn(e,t),$n(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(X=t,h=t.child;h!==null;){for(m=X=h;X!==null;){switch(g=X,E=g.child,g.tag){case 0:case 11:case 14:case 15:ya(4,g,g.return);break;case 1:Ls(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,R.props=e.memoizedProps,R.state=e.memoizedState,R.componentWillUnmount()}catch(P){Xe(r,n,P)}}break;case 5:Ls(g,g.return);break;case 22:if(g.memoizedState!==null){Gg(m);continue}}E!==null?(E.return=g,X=E):Gg(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=y_("display",o))}catch(P){Xe(t,t.return,P)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(P){Xe(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Cn(e,t),$n(t),r&4&&qg(t);break;case 21:break;default:Cn(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($0(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ra(i,""),r.flags&=-33);var s=Hg(t);$h(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Hg(t);zh(t,l,o);break;default:throw Error(H(161))}}catch(u){Xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function fS(t,e,n){X=t,q0(t)}function q0(t,e,n){for(var r=(t.mode&1)!==0;X!==null;){var i=X,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ql;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Lt;l=Ql;var c=Lt;if(Ql=o,(Lt=u)&&!c)for(X=i;X!==null;)o=X,u=o.child,o.tag===22&&o.memoizedState!==null?Qg(i):u!==null?(u.return=o,X=u):Qg(i);for(;s!==null;)X=s,q0(s),s=s.sibling;X=i,Ql=l,Lt=c}Kg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,X=s):Kg(t)}}function Kg(t){for(;X!==null;){var e=X;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||Sc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Pn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ng(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ng(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&ka(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}Lt||e.flags&512&&Bh(e)}catch(g){Xe(e,e.return,g)}}if(e===t){X=null;break}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}}function Gg(t){for(;X!==null;){var e=X;if(e===t){X=null;break}var n=e.sibling;if(n!==null){n.return=e.return,X=n;break}X=e.return}}function Qg(t){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sc(4,e)}catch(u){Xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Xe(e,i,u)}}var s=e.return;try{Bh(e)}catch(u){Xe(e,s,u)}break;case 5:var o=e.return;try{Bh(e)}catch(u){Xe(e,o,u)}}}catch(u){Xe(e,e.return,u)}if(e===t){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var pS=Math.ceil,qu=Ar.ReactCurrentDispatcher,ap=Ar.ReactCurrentOwner,_n=Ar.ReactCurrentBatchConfig,xe=0,gt=null,st=null,xt=0,rn=0,Vs=_i(0),dt=0,Ba=null,Gi=0,Rc=0,lp=0,va=null,Kt=null,up=0,eo=1/0,or=null,Ku=!1,Wh=null,ii=null,Yl=!1,Yr=null,Gu=0,_a=0,Hh=null,pu=-1,mu=0;function zt(){return xe&6?et():pu!==-1?pu:pu=et()}function si(t){return t.mode&1?xe&2&&xt!==0?xt&-xt:Xx.transition!==null?(mu===0&&(mu=k_()),mu):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:M_(t.type)),t):1}function On(t,e,n,r){if(50<_a)throw _a=0,Hh=null,Error(H(185));nl(t,n,r),(!(xe&2)||t!==gt)&&(t===gt&&(!(xe&2)&&(Rc|=n),dt===4&&Wr(t,xt)),Jt(t,r),n===1&&xe===0&&!(e.mode&1)&&(eo=et()+500,Tc&&wi()))}function Jt(t,e){var n=t.callbackNode;XI(t,e);var r=Nu(t,t===gt?xt:0);if(r===0)n!==null&&ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ig(n),e===1)t.tag===0?Yx(Yg.bind(null,t)):n0(Yg.bind(null,t)),qx(function(){!(xe&6)&&wi()}),n=null;else{switch(N_(r)){case 1:n=Lf;break;case 4:n=C_;break;case 16:n=ku;break;case 536870912:n=P_;break;default:n=ku}n=ew(n,K0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function K0(t,e){if(pu=-1,mu=0,xe&6)throw Error(H(327));var n=t.callbackNode;if($s()&&t.callbackNode!==n)return null;var r=Nu(t,t===gt?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qu(t,r);else{e=r;var i=xe;xe|=2;var s=Q0();(gt!==t||xt!==e)&&(or=null,eo=et()+500,zi(t,e));do try{yS();break}catch(l){G0(t,l)}while(!0);Gf(),qu.current=s,xe=i,st!==null?e=0:(gt=null,xt=0,e=dt)}if(e!==0){if(e===2&&(i=vh(t),i!==0&&(r=i,e=qh(t,i))),e===1)throw n=Ba,zi(t,0),Wr(t,r),Jt(t,et()),n;if(e===6)Wr(t,r);else{if(i=t.current.alternate,!(r&30)&&!mS(i)&&(e=Qu(t,r),e===2&&(s=vh(t),s!==0&&(r=s,e=qh(t,s))),e===1))throw n=Ba,zi(t,0),Wr(t,r),Jt(t,et()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:bi(t,Kt,or);break;case 3:if(Wr(t,r),(r&130023424)===r&&(e=up+500-et(),10<e)){if(Nu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){zt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rh(bi.bind(null,t,Kt,or),e);break}bi(t,Kt,or);break;case 4:if(Wr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-bn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*pS(r/1960))-r,10<r){t.timeoutHandle=Rh(bi.bind(null,t,Kt,or),r);break}bi(t,Kt,or);break;case 5:bi(t,Kt,or);break;default:throw Error(H(329))}}}return Jt(t,et()),t.callbackNode===n?K0.bind(null,t):null}function qh(t,e){var n=va;return t.current.memoizedState.isDehydrated&&(zi(t,e).flags|=256),t=Qu(t,e),t!==2&&(e=Kt,Kt=n,e!==null&&Kh(e)),t}function Kh(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function mS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ln(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wr(t,e){for(e&=~lp,e&=~Rc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bn(e),r=1<<n;t[n]=-1,e&=~r}}function Yg(t){if(xe&6)throw Error(H(327));$s();var e=Nu(t,0);if(!(e&1))return Jt(t,et()),null;var n=Qu(t,e);if(t.tag!==0&&n===2){var r=vh(t);r!==0&&(e=r,n=qh(t,r))}if(n===1)throw n=Ba,zi(t,0),Wr(t,e),Jt(t,et()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bi(t,Kt,or),Jt(t,et()),null}function cp(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(eo=et()+500,Tc&&wi())}}function Qi(t){Yr!==null&&Yr.tag===0&&!(xe&6)&&$s();var e=xe;xe|=1;var n=_n.transition,r=Ne;try{if(_n.transition=null,Ne=1,t)return t()}finally{Ne=r,_n.transition=n,xe=e,!(xe&6)&&wi()}}function dp(){rn=Vs.current,Be(Vs)}function zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Hx(n)),st!==null)for(n=st.return;n!==null;){var r=n;switch(Hf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vu();break;case 3:Js(),Be(Yt),Be(Mt),ep();break;case 5:Zf(r);break;case 4:Js();break;case 13:Be(qe);break;case 19:Be(qe);break;case 10:Qf(r.type._context);break;case 22:case 23:dp()}n=n.return}if(gt=t,st=t=oi(t.current,null),xt=rn=e,dt=0,Ba=null,lp=Rc=Gi=0,Kt=va=null,ji!==null){for(e=0;e<ji.length;e++)if(n=ji[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ji=null}return t}function G0(t,e){do{var n=st;try{if(Gf(),du.current=Hu,Wu){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wu=!1}if(Ki=0,mt=ct=Ke=null,ga=!1,ja=0,ap.current=null,n===null||n.return===null){dt=1,Ba=e,st=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=xt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var E=Mg(o);if(E!==null){E.flags&=-257,jg(E,o,l,s,e),E.mode&1&&Vg(s,c,e),e=E,u=c;var R=e.updateQueue;if(R===null){var P=new Set;P.add(u),e.updateQueue=P}else R.add(u);break e}else{if(!(e&1)){Vg(s,c,e),hp();break e}u=Error(H(426))}}else if(He&&l.mode&1){var D=Mg(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),jg(D,o,l,s,e),qf(Zs(u,l));break e}}s=u=Zs(u,l),dt!==4&&(dt=2),va===null?va=[s]:va.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=N0(s,u,e);kg(s,x);break e;case 1:l=u;var _=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(ii===null||!ii.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var V=D0(s,l,e);kg(s,V);break e}}s=s.return}while(s!==null)}X0(n)}catch(U){e=U,st===n&&n!==null&&(st=n=n.return);continue}break}while(!0)}function Q0(){var t=qu.current;return qu.current=Hu,t===null?Hu:t}function hp(){(dt===0||dt===3||dt===2)&&(dt=4),gt===null||!(Gi&268435455)&&!(Rc&268435455)||Wr(gt,xt)}function Qu(t,e){var n=xe;xe|=2;var r=Q0();(gt!==t||xt!==e)&&(or=null,zi(t,e));do try{gS();break}catch(i){G0(t,i)}while(!0);if(Gf(),xe=n,qu.current=r,st!==null)throw Error(H(261));return gt=null,xt=0,dt}function gS(){for(;st!==null;)Y0(st)}function yS(){for(;st!==null&&!zI();)Y0(st)}function Y0(t){var e=Z0(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?X0(t):st=e,ap.current=null}function X0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=cS(n,e),n!==null){n.flags&=32767,st=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,st=null;return}}else if(n=uS(n,e,rn),n!==null){st=n;return}if(e=e.sibling,e!==null){st=e;return}st=e=t}while(e!==null);dt===0&&(dt=5)}function bi(t,e,n){var r=Ne,i=_n.transition;try{_n.transition=null,Ne=1,vS(t,e,n,r)}finally{_n.transition=i,Ne=r}return null}function vS(t,e,n,r){do $s();while(Yr!==null);if(xe&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(JI(t,s),t===gt&&(st=gt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yl||(Yl=!0,ew(ku,function(){return $s(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_n.transition,_n.transition=null;var o=Ne;Ne=1;var l=xe;xe|=4,ap.current=null,hS(t,n),H0(n,t),jx(xh),Du=!!Ih,xh=Ih=null,t.current=n,fS(n),$I(),xe=l,Ne=o,_n.transition=s}else t.current=n;if(Yl&&(Yl=!1,Yr=t,Gu=i),s=t.pendingLanes,s===0&&(ii=null),qI(n.stateNode),Jt(t,et()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,t=Wh,Wh=null,t;return Gu&1&&t.tag!==0&&$s(),s=t.pendingLanes,s&1?t===Hh?_a++:(_a=0,Hh=t):_a=0,wi(),null}function $s(){if(Yr!==null){var t=N_(Gu),e=_n.transition,n=Ne;try{if(_n.transition=null,Ne=16>t?16:t,Yr===null)var r=!1;else{if(t=Yr,Yr=null,Gu=0,xe&6)throw Error(H(331));var i=xe;for(xe|=4,X=t.current;X!==null;){var s=X,o=s.child;if(X.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(X=c;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:ya(8,h,s)}var m=h.child;if(m!==null)m.return=h,X=m;else for(;X!==null;){h=X;var g=h.sibling,E=h.return;if(z0(h),h===c){X=null;break}if(g!==null){g.return=E,X=g;break}X=E}}}var R=s.alternate;if(R!==null){var P=R.child;if(P!==null){R.child=null;do{var D=P.sibling;P.sibling=null,P=D}while(P!==null)}}X=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,X=o;else e:for(;X!==null;){if(s=X,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ya(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,X=x;break e}X=s.return}}var _=t.current;for(X=_;X!==null;){o=X;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,X=A;else e:for(o=_;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Sc(9,l)}}catch(U){Xe(l,l.return,U)}if(l===o){X=null;break e}var V=l.sibling;if(V!==null){V.return=l.return,X=V;break e}X=l.return}}if(xe=i,wi(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(yc,t)}catch{}r=!0}return r}finally{Ne=n,_n.transition=e}}return!1}function Xg(t,e,n){e=Zs(n,e),e=N0(t,e,1),t=ri(t,e,1),e=zt(),t!==null&&(nl(t,1,e),Jt(t,e))}function Xe(t,e,n){if(t.tag===3)Xg(t,t,n);else for(;e!==null;){if(e.tag===3){Xg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ii===null||!ii.has(r))){t=Zs(n,t),t=D0(e,t,1),e=ri(e,t,1),t=zt(),e!==null&&(nl(e,1,t),Jt(e,t));break}}e=e.return}}function _S(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&n,gt===t&&(xt&n)===n&&(dt===4||dt===3&&(xt&130023424)===xt&&500>et()-up?zi(t,0):lp|=n),Jt(t,e)}function J0(t,e){e===0&&(t.mode&1?(e=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):e=1);var n=zt();t=wr(t,e),t!==null&&(nl(t,e,n),Jt(t,n))}function wS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),J0(t,n)}function ES(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),J0(t,n)}var Z0;Z0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,lS(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,He&&e.flags&1048576&&r0(e,Uu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;fu(t,e),t=e.pendingProps;var i=Qs(e,Mt.current);zs(e,n),i=np(null,e,r,t,i,n);var s=rp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(r)?(s=!0,Mu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xf(e),i.updater=xc,e.stateNode=i,i._reactInternals=e,bh(e,r,t,n),e=Vh(null,e,r,!0,s,n)):(e.tag=0,He&&s&&Wf(e),Bt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(fu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=IS(r),t=Pn(r,t),i){case 0:e=Lh(null,e,r,t,n);break e;case 1:e=Bg(null,e,r,t,n);break e;case 11:e=Ug(null,e,r,t,n);break e;case 14:e=Fg(null,e,r,Pn(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Lh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Bg(t,e,r,i,n);case 3:e:{if(V0(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,u0(t,e),zu(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Zs(Error(H(423)),e),e=zg(t,e,r,n,i);break e}else if(r!==i){i=Zs(Error(H(424)),e),e=zg(t,e,r,n,i);break e}else for(on=ni(e.stateNode.containerInfo.firstChild),ln=e,He=!0,Dn=null,n=a0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),r===i){e=Er(t,e,n);break e}Bt(t,e,r,n)}e=e.child}return e;case 5:return c0(e),t===null&&kh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Sh(r,i)?o=null:s!==null&&Sh(r,s)&&(e.flags|=32),L0(t,e),Bt(t,e,o,n),e.child;case 6:return t===null&&kh(e),null;case 13:return M0(t,e,n);case 4:return Jf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):Bt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),Ug(t,e,r,i,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ve(Fu,r._currentValue),r._currentValue=o,s!==null)if(Ln(s.value,o)){if(s.children===i.children&&!Yt.current){e=Er(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=mr(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Nh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Nh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Bt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,zs(e,n),i=En(i),r=r(i),e.flags|=1,Bt(t,e,r,n),e.child;case 14:return r=e.type,i=Pn(r,e.pendingProps),i=Pn(r.type,i),Fg(t,e,r,i,n);case 15:return b0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pn(r,i),fu(t,e),e.tag=1,Xt(r)?(t=!0,Mu(e)):t=!1,zs(e,n),k0(e,r,i),bh(e,r,i,n),Vh(null,e,r,!0,t,n);case 19:return j0(t,e,n);case 22:return O0(t,e,n)}throw Error(H(156,e.tag))};function ew(t,e){return A_(t,e)}function TS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(t,e,n,r){return new TS(t,e,n,r)}function fp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function IS(t){if(typeof t=="function")return fp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Df)return 11;if(t===bf)return 14}return 2}function oi(t,e){var n=t.alternate;return n===null?(n=vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function gu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")fp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Rs:return $i(n.children,i,s,e);case Nf:o=8,i|=8;break;case rh:return t=vn(12,n,e,i|2),t.elementType=rh,t.lanes=s,t;case ih:return t=vn(13,n,e,i),t.elementType=ih,t.lanes=s,t;case sh:return t=vn(19,n,e,i),t.elementType=sh,t.lanes=s,t;case c_:return Ac(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l_:o=10;break e;case u_:o=9;break e;case Df:o=11;break e;case bf:o=14;break e;case Br:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=vn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function $i(t,e,n,r){return t=vn(7,t,r,e),t.lanes=n,t}function Ac(t,e,n,r){return t=vn(22,t,r,e),t.elementType=c_,t.lanes=n,t.stateNode={isHidden:!1},t}function jd(t,e,n){return t=vn(6,t,null,e),t.lanes=n,t}function Ud(t,e,n){return e=vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_d(0),this.expirationTimes=_d(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_d(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pp(t,e,n,r,i,s,o,l,u){return t=new xS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xf(s),t}function SS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ss,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tw(t){if(!t)return fi;t=t._reactInternals;e:{if(ss(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Xt(n))return t0(t,n,e)}return e}function nw(t,e,n,r,i,s,o,l,u){return t=pp(n,r,!0,t,i,s,o,l,u),t.context=tw(null),n=t.current,r=zt(),i=si(n),s=mr(r,i),s.callback=e??null,ri(n,s,i),t.current.lanes=i,nl(t,i,r),Jt(t,r),t}function Cc(t,e,n,r){var i=e.current,s=zt(),o=si(i);return n=tw(n),e.context===null?e.context=n:e.pendingContext=n,e=mr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ri(i,e,o),t!==null&&(On(t,i,o,s),cu(t,i,o)),o}function Yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mp(t,e){Jg(t,e),(t=t.alternate)&&Jg(t,e)}function RS(){return null}var rw=typeof reportError=="function"?reportError:function(t){console.error(t)};function gp(t){this._internalRoot=t}Pc.prototype.render=gp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Cc(t,e,null,null)};Pc.prototype.unmount=gp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qi(function(){Cc(null,t,null,null)}),e[_r]=null}};function Pc(t){this._internalRoot=t}Pc.prototype.unstable_scheduleHydration=function(t){if(t){var e=O_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$r.length&&e!==0&&e<$r[n].priority;n++);$r.splice(n,0,t),n===0&&V_(t)}};function yp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Zg(){}function AS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Yu(o);s.call(c)}}var o=nw(e,r,t,0,null,!1,!1,"",Zg);return t._reactRootContainer=o,t[_r]=o.current,ba(t.nodeType===8?t.parentNode:t),Qi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=Yu(u);l.call(c)}}var u=pp(t,0,!1,null,null,!1,!1,"",Zg);return t._reactRootContainer=u,t[_r]=u.current,ba(t.nodeType===8?t.parentNode:t),Qi(function(){Cc(e,u,n,r)}),u}function Nc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=Yu(o);l.call(u)}}Cc(e,o,t,i)}else o=AS(n,e,t,i,r);return Yu(o)}D_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=na(e.pendingLanes);n!==0&&(Vf(e,n|1),Jt(e,et()),!(xe&6)&&(eo=et()+500,wi()))}break;case 13:Qi(function(){var r=wr(t,1);if(r!==null){var i=zt();On(r,t,1,i)}}),mp(t,1)}};Mf=function(t){if(t.tag===13){var e=wr(t,134217728);if(e!==null){var n=zt();On(e,t,134217728,n)}mp(t,134217728)}};b_=function(t){if(t.tag===13){var e=si(t),n=wr(t,e);if(n!==null){var r=zt();On(n,t,e,r)}mp(t,e)}};O_=function(){return Ne};L_=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};mh=function(t,e,n){switch(e){case"input":if(lh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ec(r);if(!i)throw Error(H(90));h_(r),lh(r,i)}}}break;case"textarea":p_(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};E_=cp;T_=Qi;var CS={usingClientEntryPoint:!1,Events:[il,ks,Ec,__,w_,cp]},Qo={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PS={bundleType:Qo.bundleType,version:Qo.version,rendererPackageName:Qo.rendererPackageName,rendererConfig:Qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S_(t),t===null?null:t.stateNode},findFiberByHostInstance:Qo.findFiberByHostInstance||RS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{yc=Xl.inject(PS),qn=Xl}catch{}}dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CS;dn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yp(e))throw Error(H(200));return SS(t,e,null,n)};dn.createRoot=function(t,e){if(!yp(t))throw Error(H(299));var n=!1,r="",i=rw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=pp(t,1,!1,null,null,n,!1,r,i),t[_r]=e.current,ba(t.nodeType===8?t.parentNode:t),new gp(e)};dn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=S_(e),t=t===null?null:t.stateNode,t};dn.flushSync=function(t){return Qi(t)};dn.hydrate=function(t,e,n){if(!kc(e))throw Error(H(200));return Nc(null,t,e,!0,n)};dn.hydrateRoot=function(t,e,n){if(!yp(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nw(e,null,t,1,n??null,i,!1,s,o),t[_r]=e.current,ba(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Pc(e)};dn.render=function(t,e,n){if(!kc(e))throw Error(H(200));return Nc(null,t,e,!1,n)};dn.unmountComponentAtNode=function(t){if(!kc(t))throw Error(H(40));return t._reactRootContainer?(Qi(function(){Nc(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1};dn.unstable_batchedUpdates=cp;dn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!kc(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Nc(t,e,n,!1,r)};dn.version="18.3.1-next-f1338f8080-20240426";function iw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iw)}catch(t){console.error(t)}}iw(),i_.exports=dn;var vp=i_.exports;const kS=Hv(vp),NS=Wv({__proto__:null,default:kS},[vp]);var ey=vp;th.createRoot=ey.createRoot,th.hydrateRoot=ey.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function We(){return We=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},We.apply(this,arguments)}var it;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(it||(it={}));const ty="popstate";function DS(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:u=""}=Cr(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),za("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof s=="string"?s:Yi(s))}function r(i,s){pi(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return OS(e,n,r,t)}function pe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pi(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bS(){return Math.random().toString(36).substr(2,8)}function ny(t,e){return{usr:t.state,key:t.key,idx:e}}function za(t,e,n,r){return n===void 0&&(n=null),We({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Cr(e):e,{state:n,key:e&&e.key||r||bS()})}function Yi(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Cr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function OS(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=it.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(We({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=it.Pop;let D=h(),x=D==null?null:D-c;c=D,u&&u({action:l,location:P.location,delta:x})}function g(D,x){l=it.Push;let _=za(P.location,D,x);n&&n(_,D),c=h()+1;let A=ny(_,c),V=P.createHref(_);try{o.pushState(A,"",V)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;i.location.assign(V)}s&&u&&u({action:l,location:P.location,delta:1})}function E(D,x){l=it.Replace;let _=za(P.location,D,x);n&&n(_,D),c=h();let A=ny(_,c),V=P.createHref(_);o.replaceState(A,"",V),s&&u&&u({action:l,location:P.location,delta:0})}function R(D){let x=i.location.origin!=="null"?i.location.origin:i.location.href,_=typeof D=="string"?D:Yi(D);return _=_.replace(/ $/,"%20"),pe(x,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,x)}let P={get action(){return l},get location(){return t(i,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ty,m),u=D,()=>{i.removeEventListener(ty,m),u=null}},createHref(D){return e(i,D)},createURL:R,encodeLocation(D){let x=R(D);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:E,go(D){return o.go(D)}};return P}var ke;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ke||(ke={}));const LS=new Set(["lazy","caseSensitive","path","id","index","children"]);function VS(t){return t.index===!0}function Xu(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(pe(i.index!==!0||!i.children,"Cannot specify children on an index route"),pe(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),VS(i)){let u=We({},i,e(i),{id:l});return r[l]=u,u}else{let u=We({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=Xu(i.children,e,o,r)),u}})}function Li(t,e,n){return n===void 0&&(n="/"),yu(t,e,n,!1)}function yu(t,e,n,r){let i=typeof e=="string"?Cr(e):e,s=Tr(i.pathname||"/",n);if(s==null)return null;let o=sw(t);jS(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=QS(s);l=KS(o[u],c,r)}return l}function MS(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function sw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(pe(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=gr([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(pe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),sw(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:HS(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of ow(s.path))i(s,o,u)}),e}function ow(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ow(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function jS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const US=/^:[\w-]+$/,FS=3,BS=2,zS=1,$S=10,WS=-2,ry=t=>t==="*";function HS(t,e){let n=t.split("/"),r=n.length;return n.some(ry)&&(r+=WS),e&&(r+=BS),n.filter(i=>!ry(i)).reduce((i,s)=>i+(US.test(s)?FS:s===""?zS:$S),r)}function qS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function KS(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",m=Ju({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),g=u.route;if(!m&&c&&n&&!r[r.length-1].route.index&&(m=Ju({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:gr([s,m.pathname]),pathnameBase:ZS(gr([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=gr([s,m.pathnameBase]))}return o}function Ju(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=GS(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,h,m)=>{let{paramName:g,isOptional:E}=h;if(g==="*"){let P=l[m]||"";o=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const R=l[m];return E&&!R?c[g]=void 0:c[g]=(R||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function GS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pi(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function QS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pi(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Tr(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const YS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XS=t=>YS.test(t);function JS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Cr(t):t,s;if(n)if(XS(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),pi(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=iy(n.substring(1),"/"):s=iy(n,e)}else s=e;return{pathname:s,search:eR(r),hash:tR(i)}}function iy(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Fd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function aw(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Dc(t,e){let n=aw(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bc(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Cr(t):(i=We({},t),pe(!i.pathname||!i.pathname.includes("?"),Fd("?","pathname","search",i)),pe(!i.pathname||!i.pathname.includes("#"),Fd("#","pathname","hash",i)),pe(!i.search||!i.search.includes("#"),Fd("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=JS(i,l),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const gr=t=>t.join("/").replace(/\/\/+/g,"/"),ZS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),eR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,tR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Zu{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function $a(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lw=["post","put","patch","delete"],nR=new Set(lw),rR=["get",...lw],iR=new Set(rR),sR=new Set([301,302,303,307,308]),oR=new Set([307,308]),Bd={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},aR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Yo={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},_p=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lR=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),uw="remix-router-transitions";function uR(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;pe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let k=t.detectErrorBoundary;i=b=>({hasErrorBoundary:k(b)})}else i=lR;let s={},o=Xu(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.dataStrategy||fR,h=t.patchRoutesOnNavigation,m=We({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,E=new Set,R=null,P=null,D=null,x=t.hydrationData!=null,_=Li(o,t.history.location,u),A=!1,V=null;if(_==null&&!h){let k=qt(404,{pathname:t.history.location.pathname}),{matches:b,route:M}=my(o);_=b,V={[M.id]:k}}_&&!t.hydrationData&&Pi(_,o,t.history.location.pathname).active&&(_=null);let U;if(_)if(_.some(k=>k.route.lazy))U=!1;else if(!_.some(k=>k.route.loader))U=!0;else if(m.v7_partialHydration){let k=t.hydrationData?t.hydrationData.loaderData:null,b=t.hydrationData?t.hydrationData.errors:null;if(b){let M=_.findIndex(z=>b[z.route.id]!==void 0);U=_.slice(0,M+1).every(z=>!Qh(z.route,k,b))}else U=_.every(M=>!Qh(M.route,k,b))}else U=t.hydrationData!=null;else if(U=!1,_=[],m.v7_partialHydration){let k=Pi(null,o,t.history.location.pathname);k.active&&k.matches&&(A=!0,_=k.matches)}let B,y={historyAction:t.history.action,location:t.history.location,matches:_,initialized:U,navigation:Bd,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||V,fetchers:new Map,blockers:new Map},v=it.Pop,T=!1,I,S=!1,N=new Map,C=null,Ae=!1,at=!1,fn=[],vt=new Set,q=new Map,ie=0,se=-1,Te=new Map,fe=new Set,Ie=new Map,ft=new Map,ze=new Set,tt=new Map,$=new Map,_e;function Oe(){if(g=t.history.listen(k=>{let{action:b,location:M,delta:z}=k;if(_e){_e(),_e=void 0;return}pi($.size===0||z!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let G=Do({currentLocation:y.location,nextLocation:M,historyAction:b});if(G&&z!=null){let te=new Promise(oe=>{_e=oe});t.history.go(z*-1),Ri(G,{state:"blocked",location:M,proceed(){Ri(G,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),te.then(()=>t.history.go(z))},reset(){let oe=new Map(y.blockers);oe.set(G,Yo),Ce({blockers:oe})}});return}return Un(b,M)}),n){AR(e,N);let k=()=>CR(e,N);e.addEventListener("pagehide",k),C=()=>e.removeEventListener("pagehide",k)}return y.initialized||Un(it.Pop,y.location,{initialHydration:!0}),B}function Ut(){g&&g(),C&&C(),E.clear(),I&&I.abort(),y.fetchers.forEach((k,b)=>fs(b)),y.blockers.forEach((k,b)=>ms(b))}function In(k){return E.add(k),()=>E.delete(k)}function Ce(k,b){b===void 0&&(b={}),y=We({},y,k);let M=[],z=[];m.v7_fetcherPersist&&y.fetchers.forEach((G,te)=>{G.state==="idle"&&(ze.has(te)?z.push(te):M.push(te))}),ze.forEach(G=>{!y.fetchers.has(G)&&!q.has(G)&&z.push(G)}),[...E].forEach(G=>G(y,{deletedFetchers:z,viewTransitionOpts:b.viewTransitionOpts,flushSync:b.flushSync===!0})),m.v7_fetcherPersist?(M.forEach(G=>y.fetchers.delete(G)),z.forEach(G=>fs(G))):z.forEach(G=>ze.delete(G))}function Ct(k,b,M){var z,G;let{flushSync:te}=M===void 0?{}:M,oe=y.actionData!=null&&y.navigation.formMethod!=null&&Nn(y.navigation.formMethod)&&y.navigation.state==="loading"&&((z=k.state)==null?void 0:z._isRedirect)!==!0,Z;b.actionData?Object.keys(b.actionData).length>0?Z=b.actionData:Z=null:oe?Z=y.actionData:Z=null;let J=b.loaderData?fy(y.loaderData,b.loaderData,b.matches||[],b.errors):y.loaderData,Y=y.blockers;Y.size>0&&(Y=new Map(Y),Y.forEach((he,nt)=>Y.set(nt,Yo)));let ne=T===!0||y.navigation.formMethod!=null&&Nn(y.navigation.formMethod)&&((G=k.state)==null?void 0:G._isRedirect)!==!0;l&&(o=l,l=void 0),Ae||v===it.Pop||(v===it.Push?t.history.push(k,k.state):v===it.Replace&&t.history.replace(k,k.state));let le;if(v===it.Pop){let he=N.get(y.location.pathname);he&&he.has(k.pathname)?le={currentLocation:y.location,nextLocation:k}:N.has(k.pathname)&&(le={currentLocation:k,nextLocation:y.location})}else if(S){let he=N.get(y.location.pathname);he?he.add(k.pathname):(he=new Set([k.pathname]),N.set(y.location.pathname,he)),le={currentLocation:y.location,nextLocation:k}}Ce(We({},b,{actionData:Z,loaderData:J,historyAction:v,location:k,initialized:!0,navigation:Bd,revalidation:"idle",restoreScrollPosition:Ci(k,b.matches||y.matches),preventScrollReset:ne,blockers:Y}),{viewTransitionOpts:le,flushSync:te===!0}),v=it.Pop,T=!1,S=!1,Ae=!1,at=!1,fn=[]}async function hs(k,b){if(typeof k=="number"){t.history.go(k);return}let M=Gh(y.location,y.matches,u,m.v7_prependBasename,k,m.v7_relativeSplatPath,b==null?void 0:b.fromRouteId,b==null?void 0:b.relative),{path:z,submission:G,error:te}=sy(m.v7_normalizeFormMethod,!1,M,b),oe=y.location,Z=za(y.location,z,b&&b.state);Z=We({},Z,t.history.encodeLocation(Z));let J=b&&b.replace!=null?b.replace:void 0,Y=it.Push;J===!0?Y=it.Replace:J===!1||G!=null&&Nn(G.formMethod)&&G.formAction===y.location.pathname+y.location.search&&(Y=it.Replace);let ne=b&&"preventScrollReset"in b?b.preventScrollReset===!0:void 0,le=(b&&b.flushSync)===!0,he=Do({currentLocation:oe,nextLocation:Z,historyAction:Y});if(he){Ri(he,{state:"blocked",location:Z,proceed(){Ri(he,{state:"proceeding",proceed:void 0,reset:void 0,location:Z}),hs(k,b)},reset(){let nt=new Map(y.blockers);nt.set(he,Yo),Ce({blockers:nt})}});return}return await Un(Y,Z,{submission:G,pendingError:te,preventScrollReset:ne,replace:b&&b.replace,enableViewTransition:b&&b.viewTransition,flushSync:le})}function Ro(){if(ut(),Ce({revalidation:"loading"}),y.navigation.state!=="submitting"){if(y.navigation.state==="idle"){Un(y.historyAction,y.location,{startUninterruptedRevalidation:!0});return}Un(v||y.historyAction,y.navigation.location,{overrideNavigation:y.navigation,enableViewTransition:S===!0})}}async function Un(k,b,M){I&&I.abort(),I=null,v=k,Ae=(M&&M.startUninterruptedRevalidation)===!0,El(y.location,y.matches),T=(M&&M.preventScrollReset)===!0,S=(M&&M.enableViewTransition)===!0;let z=l||o,G=M&&M.overrideNavigation,te=M!=null&&M.initialHydration&&y.matches&&y.matches.length>0&&!A?y.matches:Li(z,b,u),oe=(M&&M.flushSync)===!0;if(te&&y.initialized&&!at&&_R(y.location,b)&&!(M&&M.submission&&Nn(M.submission.formMethod))){Ct(b,{matches:te},{flushSync:oe});return}let Z=Pi(te,z,b.pathname);if(Z.active&&Z.matches&&(te=Z.matches),!te){let{error:Pe,notFoundMatches:ye,route:Le}=er(b.pathname);Ct(b,{matches:ye,loaderData:{},errors:{[Le.id]:Pe}},{flushSync:oe});return}I=new AbortController;let J=Es(t.history,b,I.signal,M&&M.submission),Y;if(M&&M.pendingError)Y=[Vi(te).route.id,{type:ke.error,error:M.pendingError}];else if(M&&M.submission&&Nn(M.submission.formMethod)){let Pe=await sd(J,b,M.submission,te,Z.active,{replace:M.replace,flushSync:oe});if(Pe.shortCircuited)return;if(Pe.pendingActionResult){let[ye,Le]=Pe.pendingActionResult;if(sn(Le)&&$a(Le.error)&&Le.error.status===404){I=null,Ct(b,{matches:Pe.matches,loaderData:{},errors:{[ye]:Le.error}});return}}te=Pe.matches||te,Y=Pe.pendingActionResult,G=zd(b,M.submission),oe=!1,Z.active=!1,J=Es(t.history,J.url,J.signal)}let{shortCircuited:ne,matches:le,loaderData:he,errors:nt}=await od(J,b,te,Z.active,G,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,oe,Y);ne||(I=null,Ct(b,We({matches:le||te},py(Y),{loaderData:he,errors:nt})))}async function sd(k,b,M,z,G,te){te===void 0&&(te={}),ut();let oe=SR(b,M);if(Ce({navigation:oe},{flushSync:te.flushSync===!0}),G){let Y=await Bn(z,b.pathname,k.signal);if(Y.type==="aborted")return{shortCircuited:!0};if(Y.type==="error"){let ne=Vi(Y.partialMatches).route.id;return{matches:Y.partialMatches,pendingActionResult:[ne,{type:ke.error,error:Y.error}]}}else if(Y.matches)z=Y.matches;else{let{notFoundMatches:ne,error:le,route:he}=er(b.pathname);return{matches:ne,pendingActionResult:[he.id,{type:ke.error,error:le}]}}}let Z,J=ia(z,b);if(!J.route.action&&!J.route.lazy)Z={type:ke.error,error:qt(405,{method:k.method,pathname:b.pathname,routeId:J.route.id})};else if(Z=(await Dr("action",y,k,[J],z,null))[J.route.id],k.signal.aborted)return{shortCircuited:!0};if(Fi(Z)){let Y;return te&&te.replace!=null?Y=te.replace:Y=cy(Z.response.headers.get("Location"),new URL(k.url),u,t.history)===y.location.pathname+y.location.search,await xn(k,Z,!0,{submission:M,replace:Y}),{shortCircuited:!0}}if(Xr(Z))throw qt(400,{type:"defer-action"});if(sn(Z)){let Y=Vi(z,J.route.id);return(te&&te.replace)!==!0&&(v=it.Push),{matches:z,pendingActionResult:[Y.route.id,Z]}}return{matches:z,pendingActionResult:[J.route.id,Z]}}async function od(k,b,M,z,G,te,oe,Z,J,Y,ne){let le=G||zd(b,te),he=te||oe||yy(le),nt=!Ae&&(!m.v7_partialHydration||!J);if(z){if(nt){let Me=Ao(ne);Ce(We({navigation:le},Me!==void 0?{actionData:Me}:{}),{flushSync:Y})}let we=await Bn(M,b.pathname,k.signal);if(we.type==="aborted")return{shortCircuited:!0};if(we.type==="error"){let Me=Vi(we.partialMatches).route.id;return{matches:we.partialMatches,loaderData:{},errors:{[Me]:we.error}}}else if(we.matches)M=we.matches;else{let{error:Me,notFoundMatches:rr,route:Lr}=er(b.pathname);return{matches:rr,loaderData:{},errors:{[Lr.id]:Me}}}}let Pe=l||o,[ye,Le]=ay(t.history,y,M,he,b,m.v7_partialHydration&&J===!0,m.v7_skipActionErrorRevalidation,at,fn,vt,ze,Ie,fe,Pe,u,ne);if(Ai(we=>!(M&&M.some(Me=>Me.route.id===we))||ye&&ye.some(Me=>Me.route.id===we)),se=++ie,ye.length===0&&Le.length===0){let we=ps();return Ct(b,We({matches:M,loaderData:{},errors:ne&&sn(ne[1])?{[ne[0]]:ne[1].error}:null},py(ne),we?{fetchers:new Map(y.fetchers)}:{}),{flushSync:Y}),{shortCircuited:!0}}if(nt){let we={};if(!z){we.navigation=le;let Me=Ao(ne);Me!==void 0&&(we.actionData=Me)}Le.length>0&&(we.fetchers=Co(Le)),Ce(we,{flushSync:Y})}Le.forEach(we=>{Sn(we.key),we.controller&&q.set(we.key,we.controller)});let tr=()=>Le.forEach(we=>Sn(we.key));I&&I.signal.addEventListener("abort",tr);let{loaderResults:br,fetcherResults:Rn}=await lt(y,M,ye,Le,k);if(k.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",tr),Le.forEach(we=>q.delete(we.key));let Ft=Jl(br);if(Ft)return await xn(k,Ft.result,!0,{replace:Z}),{shortCircuited:!0};if(Ft=Jl(Rn),Ft)return fe.add(Ft.key),await xn(k,Ft.result,!0,{replace:Z}),{shortCircuited:!0};let{loaderData:gs,errors:nr}=hy(y,M,br,ne,Le,Rn,tt);tt.forEach((we,Me)=>{we.subscribe(rr=>{(rr||we.done)&&tt.delete(Me)})}),m.v7_partialHydration&&J&&y.errors&&(nr=We({},y.errors,nr));let tn=ps(),mn=wl(se),Or=tn||mn||Le.length>0;return We({matches:M,loaderData:gs,errors:nr},Or?{fetchers:new Map(y.fetchers)}:{})}function Ao(k){if(k&&!sn(k[1]))return{[k[0]]:k[1].data};if(y.actionData)return Object.keys(y.actionData).length===0?null:y.actionData}function Co(k){return k.forEach(b=>{let M=y.fetchers.get(b.key),z=Xo(void 0,M?M.data:void 0);y.fetchers.set(b.key,z)}),new Map(y.fetchers)}function _l(k,b,M,z){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Sn(k);let G=(z&&z.flushSync)===!0,te=l||o,oe=Gh(y.location,y.matches,u,m.v7_prependBasename,M,m.v7_relativeSplatPath,b,z==null?void 0:z.relative),Z=Li(te,oe,u),J=Pi(Z,te,oe);if(J.active&&J.matches&&(Z=J.matches),!Z){pn(k,b,qt(404,{pathname:oe}),{flushSync:G});return}let{path:Y,submission:ne,error:le}=sy(m.v7_normalizeFormMethod,!0,oe,z);if(le){pn(k,b,le,{flushSync:G});return}let he=ia(Z,Y),nt=(z&&z.preventScrollReset)===!0;if(ne&&Nn(ne.formMethod)){ad(k,b,Y,he,Z,J.active,G,nt,ne);return}Ie.set(k,{routeId:b,path:Y}),Po(k,b,Y,he,Z,J.active,G,nt,ne)}async function ad(k,b,M,z,G,te,oe,Z,J){ut(),Ie.delete(k);function Y($e){if(!$e.route.action&&!$e.route.lazy){let zn=qt(405,{method:J.formMethod,pathname:M,routeId:b});return pn(k,b,zn,{flushSync:oe}),!0}return!1}if(!te&&Y(z))return;let ne=y.fetchers.get(k);en(k,RR(J,ne),{flushSync:oe});let le=new AbortController,he=Es(t.history,M,le.signal,J);if(te){let $e=await Bn(G,new URL(he.url).pathname,he.signal,k);if($e.type==="aborted")return;if($e.type==="error"){pn(k,b,$e.error,{flushSync:oe});return}else if($e.matches){if(G=$e.matches,z=ia(G,M),Y(z))return}else{pn(k,b,qt(404,{pathname:M}),{flushSync:oe});return}}q.set(k,le);let nt=ie,ye=(await Dr("action",y,he,[z],G,k))[z.route.id];if(he.signal.aborted){q.get(k)===le&&q.delete(k);return}if(m.v7_fetcherPersist&&ze.has(k)){if(Fi(ye)||sn(ye)){en(k,Fr(void 0));return}}else{if(Fi(ye))if(q.delete(k),se>nt){en(k,Fr(void 0));return}else return fe.add(k),en(k,Xo(J)),xn(he,ye,!1,{fetcherSubmission:J,preventScrollReset:Z});if(sn(ye)){pn(k,b,ye.error);return}}if(Xr(ye))throw qt(400,{type:"defer-action"});let Le=y.navigation.location||y.location,tr=Es(t.history,Le,le.signal),br=l||o,Rn=y.navigation.state!=="idle"?Li(br,y.navigation.location,u):y.matches;pe(Rn,"Didn't find any matches after fetcher action");let Ft=++ie;Te.set(k,Ft);let gs=Xo(J,ye.data);y.fetchers.set(k,gs);let[nr,tn]=ay(t.history,y,Rn,J,Le,!1,m.v7_skipActionErrorRevalidation,at,fn,vt,ze,Ie,fe,br,u,[z.route.id,ye]);tn.filter($e=>$e.key!==k).forEach($e=>{let zn=$e.key,Oo=y.fetchers.get(zn),Il=Xo(void 0,Oo?Oo.data:void 0);y.fetchers.set(zn,Il),Sn(zn),$e.controller&&q.set(zn,$e.controller)}),Ce({fetchers:new Map(y.fetchers)});let mn=()=>tn.forEach($e=>Sn($e.key));le.signal.addEventListener("abort",mn);let{loaderResults:Or,fetcherResults:we}=await lt(y,Rn,nr,tn,tr);if(le.signal.aborted)return;le.signal.removeEventListener("abort",mn),Te.delete(k),q.delete(k),tn.forEach($e=>q.delete($e.key));let Me=Jl(Or);if(Me)return xn(tr,Me.result,!1,{preventScrollReset:Z});if(Me=Jl(we),Me)return fe.add(Me.key),xn(tr,Me.result,!1,{preventScrollReset:Z});let{loaderData:rr,errors:Lr}=hy(y,Rn,Or,void 0,tn,we,tt);if(y.fetchers.has(k)){let $e=Fr(ye.data);y.fetchers.set(k,$e)}wl(Ft),y.navigation.state==="loading"&&Ft>se?(pe(v,"Expected pending action"),I&&I.abort(),Ct(y.navigation.location,{matches:Rn,loaderData:rr,errors:Lr,fetchers:new Map(y.fetchers)})):(Ce({errors:Lr,loaderData:fy(y.loaderData,rr,Rn,Lr),fetchers:new Map(y.fetchers)}),at=!1)}async function Po(k,b,M,z,G,te,oe,Z,J){let Y=y.fetchers.get(k);en(k,Xo(J,Y?Y.data:void 0),{flushSync:oe});let ne=new AbortController,le=Es(t.history,M,ne.signal);if(te){let ye=await Bn(G,new URL(le.url).pathname,le.signal,k);if(ye.type==="aborted")return;if(ye.type==="error"){pn(k,b,ye.error,{flushSync:oe});return}else if(ye.matches)G=ye.matches,z=ia(G,M);else{pn(k,b,qt(404,{pathname:M}),{flushSync:oe});return}}q.set(k,ne);let he=ie,Pe=(await Dr("loader",y,le,[z],G,k))[z.route.id];if(Xr(Pe)&&(Pe=await wp(Pe,le.signal,!0)||Pe),q.get(k)===ne&&q.delete(k),!le.signal.aborted){if(ze.has(k)){en(k,Fr(void 0));return}if(Fi(Pe))if(se>he){en(k,Fr(void 0));return}else{fe.add(k),await xn(le,Pe,!1,{preventScrollReset:Z});return}if(sn(Pe)){pn(k,b,Pe.error);return}pe(!Xr(Pe),"Unhandled fetcher deferred data"),en(k,Fr(Pe.data))}}async function xn(k,b,M,z){let{submission:G,fetcherSubmission:te,preventScrollReset:oe,replace:Z}=z===void 0?{}:z;b.response.headers.has("X-Remix-Revalidate")&&(at=!0);let J=b.response.headers.get("Location");pe(J,"Expected a Location header on the redirect Response"),J=cy(J,new URL(k.url),u,t.history);let Y=za(y.location,J,{_isRedirect:!0});if(n){let ye=!1;if(b.response.headers.has("X-Remix-Reload-Document"))ye=!0;else if(_p.test(J)){const Le=t.history.createURL(J);ye=Le.origin!==e.location.origin||Tr(Le.pathname,u)==null}if(ye){Z?e.location.replace(J):e.location.assign(J);return}}I=null;let ne=Z===!0||b.response.headers.has("X-Remix-Replace")?it.Replace:it.Push,{formMethod:le,formAction:he,formEncType:nt}=y.navigation;!G&&!te&&le&&he&&nt&&(G=yy(y.navigation));let Pe=G||te;if(oR.has(b.response.status)&&Pe&&Nn(Pe.formMethod))await Un(ne,Y,{submission:We({},Pe,{formAction:J}),preventScrollReset:oe||T,enableViewTransition:M?S:void 0});else{let ye=zd(Y,G);await Un(ne,Y,{overrideNavigation:ye,fetcherSubmission:te,preventScrollReset:oe||T,enableViewTransition:M?S:void 0})}}async function Dr(k,b,M,z,G,te){let oe,Z={};try{oe=await pR(c,k,b,M,z,G,te,s,i)}catch(J){return z.forEach(Y=>{Z[Y.route.id]={type:ke.error,error:J}}),Z}for(let[J,Y]of Object.entries(oe))if(wR(Y)){let ne=Y.result;Z[J]={type:ke.redirect,response:yR(ne,M,J,G,u,m.v7_relativeSplatPath)}}else Z[J]=await gR(Y);return Z}async function lt(k,b,M,z,G){let te=k.matches,oe=Dr("loader",k,G,M,b,null),Z=Promise.all(z.map(async ne=>{if(ne.matches&&ne.match&&ne.controller){let he=(await Dr("loader",k,Es(t.history,ne.path,ne.controller.signal),[ne.match],ne.matches,ne.key))[ne.match.route.id];return{[ne.key]:he}}else return Promise.resolve({[ne.key]:{type:ke.error,error:qt(404,{pathname:ne.path})}})})),J=await oe,Y=(await Z).reduce((ne,le)=>Object.assign(ne,le),{});return await Promise.all([IR(b,J,G.signal,te,k.loaderData),xR(b,Y,z)]),{loaderResults:J,fetcherResults:Y}}function ut(){at=!0,fn.push(...Ai()),Ie.forEach((k,b)=>{q.has(b)&&vt.add(b),Sn(b)})}function en(k,b,M){M===void 0&&(M={}),y.fetchers.set(k,b),Ce({fetchers:new Map(y.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function pn(k,b,M,z){z===void 0&&(z={});let G=Vi(y.matches,b);fs(k),Ce({errors:{[G.route.id]:M},fetchers:new Map(y.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function ko(k){return ft.set(k,(ft.get(k)||0)+1),ze.has(k)&&ze.delete(k),y.fetchers.get(k)||aR}function fs(k){let b=y.fetchers.get(k);q.has(k)&&!(b&&b.state==="loading"&&Te.has(k))&&Sn(k),Ie.delete(k),Te.delete(k),fe.delete(k),m.v7_fetcherPersist&&ze.delete(k),vt.delete(k),y.fetchers.delete(k)}function Si(k){let b=(ft.get(k)||0)-1;b<=0?(ft.delete(k),ze.add(k),m.v7_fetcherPersist||fs(k)):ft.set(k,b),Ce({fetchers:new Map(y.fetchers)})}function Sn(k){let b=q.get(k);b&&(b.abort(),q.delete(k))}function No(k){for(let b of k){let M=ko(b),z=Fr(M.data);y.fetchers.set(b,z)}}function ps(){let k=[],b=!1;for(let M of fe){let z=y.fetchers.get(M);pe(z,"Expected fetcher: "+M),z.state==="loading"&&(fe.delete(M),k.push(M),b=!0)}return No(k),b}function wl(k){let b=[];for(let[M,z]of Te)if(z<k){let G=y.fetchers.get(M);pe(G,"Expected fetcher: "+M),G.state==="loading"&&(Sn(M),Te.delete(M),b.push(M))}return No(b),b.length>0}function ld(k,b){let M=y.blockers.get(k)||Yo;return $.get(k)!==b&&$.set(k,b),M}function ms(k){y.blockers.delete(k),$.delete(k)}function Ri(k,b){let M=y.blockers.get(k)||Yo;pe(M.state==="unblocked"&&b.state==="blocked"||M.state==="blocked"&&b.state==="blocked"||M.state==="blocked"&&b.state==="proceeding"||M.state==="blocked"&&b.state==="unblocked"||M.state==="proceeding"&&b.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+b.state);let z=new Map(y.blockers);z.set(k,b),Ce({blockers:z})}function Do(k){let{currentLocation:b,nextLocation:M,historyAction:z}=k;if($.size===0)return;$.size>1&&pi(!1,"A router only supports one blocker at a time");let G=Array.from($.entries()),[te,oe]=G[G.length-1],Z=y.blockers.get(te);if(!(Z&&Z.state==="proceeding")&&oe({currentLocation:b,nextLocation:M,historyAction:z}))return te}function er(k){let b=qt(404,{pathname:k}),M=l||o,{matches:z,route:G}=my(M);return Ai(),{notFoundMatches:z,route:G,error:b}}function Ai(k){let b=[];return tt.forEach((M,z)=>{(!k||k(z))&&(M.cancel(),b.push(z),tt.delete(z))}),b}function bo(k,b,M){if(R=k,D=b,P=M||null,!x&&y.navigation===Bd){x=!0;let z=Ci(y.location,y.matches);z!=null&&Ce({restoreScrollPosition:z})}return()=>{R=null,D=null,P=null}}function Fn(k,b){return P&&P(k,b.map(z=>MS(z,y.loaderData)))||k.key}function El(k,b){if(R&&D){let M=Fn(k,b);R[M]=D()}}function Ci(k,b){if(R){let M=Fn(k,b),z=R[M];if(typeof z=="number")return z}return null}function Pi(k,b,M){if(h)if(k){if(Object.keys(k[0].params).length>0)return{active:!0,matches:yu(b,M,u,!0)}}else return{active:!0,matches:yu(b,M,u,!0)||[]};return{active:!1,matches:null}}async function Bn(k,b,M,z){if(!h)return{type:"success",matches:k};let G=k;for(;;){let te=l==null,oe=l||o,Z=s;try{await h({signal:M,path:b,matches:G,fetcherKey:z,patch:(ne,le)=>{M.aborted||uy(ne,le,oe,Z,i)}})}catch(ne){return{type:"error",error:ne,partialMatches:G}}finally{te&&!M.aborted&&(o=[...o])}if(M.aborted)return{type:"aborted"};let J=Li(oe,b,u);if(J)return{type:"success",matches:J};let Y=yu(oe,b,u,!0);if(!Y||G.length===Y.length&&G.every((ne,le)=>ne.route.id===Y[le].route.id))return{type:"success",matches:null};G=Y}}function Tl(k){s={},l=Xu(k,i,void 0,s)}function _t(k,b){let M=l==null;uy(k,b,l||o,s,i),M&&(o=[...o],Ce({}))}return B={get basename(){return u},get future(){return m},get state(){return y},get routes(){return o},get window(){return e},initialize:Oe,subscribe:In,enableScrollRestoration:bo,navigate:hs,fetch:_l,revalidate:Ro,createHref:k=>t.history.createHref(k),encodeLocation:k=>t.history.encodeLocation(k),getFetcher:ko,deleteFetcher:Si,dispose:Ut,getBlocker:ld,deleteBlocker:ms,patchRoutes:_t,_internalFetchControllers:q,_internalActiveDeferreds:tt,_internalSetRoutes:Tl},B}function cR(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Gh(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let m of e)if(u.push(m),m.route.id===o){c=m;break}}else u=e,c=e[e.length-1];let h=bc(i||".",Dc(u,s),Tr(t.pathname,n)||t.pathname,l==="path");if(i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c){let m=Ep(h.search);if(c.route.index&&!m)h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&m){let g=new URLSearchParams(h.search),E=g.getAll("index");g.delete("index"),E.filter(P=>P).forEach(P=>g.append("index",P));let R=g.toString();h.search=R?"?"+R:""}}return r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:gr([n,h.pathname])),Yi(h)}function sy(t,e,n,r){if(!r||!cR(r))return{path:n};if(r.formMethod&&!TR(r.formMethod))return{path:n,error:qt(405,{method:r.formMethod})};let i=()=>({path:n,error:qt(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=hw(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Nn(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((E,R)=>{let[P,D]=R;return""+E+P+"="+D+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Nn(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}pe(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=Yh(r.formData),c=r.formData;else if(r.body instanceof FormData)u=Yh(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=dy(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=dy(u)}catch{return i()}let h={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Nn(h.formMethod))return{path:n,submission:h};let m=Cr(n);return e&&m.search&&Ep(m.search)&&u.append("index",""),m.search="?"+u,{path:Yi(m),submission:h}}function oy(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function ay(t,e,n,r,i,s,o,l,u,c,h,m,g,E,R,P){let D=P?sn(P[1])?P[1].error:P[1].data:void 0,x=t.createURL(e.location),_=t.createURL(i),A=n;s&&e.errors?A=oy(n,Object.keys(e.errors)[0],!0):P&&sn(P[1])&&(A=oy(n,P[0]));let V=P?P[1].statusCode:void 0,U=o&&V&&V>=400,B=A.filter((v,T)=>{let{route:I}=v;if(I.lazy)return!0;if(I.loader==null)return!1;if(s)return Qh(I,e.loaderData,e.errors);if(dR(e.loaderData,e.matches[T],v)||u.some(C=>C===v.route.id))return!0;let S=e.matches[T],N=v;return ly(v,We({currentUrl:x,currentParams:S.params,nextUrl:_,nextParams:N.params},r,{actionResult:D,actionStatus:V,defaultShouldRevalidate:U?!1:l||x.pathname+x.search===_.pathname+_.search||x.search!==_.search||cw(S,N)}))}),y=[];return m.forEach((v,T)=>{if(s||!n.some(Ae=>Ae.route.id===v.routeId)||h.has(T))return;let I=Li(E,v.path,R);if(!I){y.push({key:T,routeId:v.routeId,path:v.path,matches:null,match:null,controller:null});return}let S=e.fetchers.get(T),N=ia(I,v.path),C=!1;g.has(T)?C=!1:c.has(T)?(c.delete(T),C=!0):S&&S.state!=="idle"&&S.data===void 0?C=l:C=ly(N,We({currentUrl:x,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:n[n.length-1].params},r,{actionResult:D,actionStatus:V,defaultShouldRevalidate:U?!1:l})),C&&y.push({key:T,routeId:v.routeId,path:v.path,matches:I,match:N,controller:new AbortController})}),[B,y]}function Qh(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function dR(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function cw(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function ly(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function uy(t,e,n,r,i){var s;let o;if(t){let c=r[t];pe(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),o=c.children}else o=n;let l=e.filter(c=>!o.some(h=>dw(c,h))),u=Xu(l,i,[t||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],r);o.push(...u)}function dw(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(s=>dw(n,s))}):!1}async function hR(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];pe(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";pi(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!LS.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,We({},e(i),{lazy:void 0}))}async function fR(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,s,o)=>Object.assign(i,{[n[o].route.id]:s}),{})}async function pR(t,e,n,r,i,s,o,l,u,c){let h=s.map(E=>E.route.lazy?hR(E.route,u,l):void 0),m=s.map((E,R)=>{let P=h[R],D=i.some(_=>_.route.id===E.route.id);return We({},E,{shouldLoad:D,resolve:async _=>(_&&r.method==="GET"&&(E.route.lazy||E.route.loader)&&(D=!0),D?mR(e,r,E,P,_,c):Promise.resolve({type:ke.data,result:void 0}))})}),g=await t({matches:m,request:r,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(h)}catch{}return g}async function mR(t,e,n,r,i,s){let o,l,u=c=>{let h,m=new Promise((R,P)=>h=P);l=()=>h(),e.signal.addEventListener("abort",l);let g=R=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:s},...R!==void 0?[R]:[]),E=(async()=>{try{return{type:"data",result:await(i?i(P=>g(P)):g())}}catch(R){return{type:"error",result:R}}})();return Promise.race([E,m])};try{let c=n.route[t];if(r)if(c){let h,[m]=await Promise.all([u(c).catch(g=>{h=g}),r]);if(h!==void 0)throw h;o=m}else if(await r,c=n.route[t],c)o=await u(c);else if(t==="action"){let h=new URL(e.url),m=h.pathname+h.search;throw qt(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:ke.data,result:void 0};else if(c)o=await u(c);else{let h=new URL(e.url),m=h.pathname+h.search;throw qt(404,{pathname:m})}pe(o.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ke.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return o}async function gR(t){let{result:e,type:n}=t;if(fw(e)){let m;try{let g=e.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?e.body==null?m=null:m=await e.json():m=await e.text()}catch(g){return{type:ke.error,error:g}}return n===ke.error?{type:ke.error,error:new Zu(e.status,e.statusText,m),statusCode:e.status,headers:e.headers}:{type:ke.data,data:m,statusCode:e.status,headers:e.headers}}if(n===ke.error){if(gy(e)){var r,i;if(e.data instanceof Error){var s,o;return{type:ke.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:ke.error,error:new Zu(((r=e.init)==null?void 0:r.status)||500,void 0,e.data),statusCode:$a(e)?e.status:void 0,headers:(i=e.init)!=null&&i.headers?new Headers(e.init.headers):void 0}}return{type:ke.error,error:e,statusCode:$a(e)?e.status:void 0}}if(ER(e)){var l,u;return{type:ke.deferred,deferredData:e,statusCode:(l=e.init)==null?void 0:l.status,headers:((u=e.init)==null?void 0:u.headers)&&new Headers(e.init.headers)}}if(gy(e)){var c,h;return{type:ke.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(h=e.init)!=null&&h.headers?new Headers(e.init.headers):void 0}}return{type:ke.data,data:e}}function yR(t,e,n,r,i,s){let o=t.headers.get("Location");if(pe(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!_p.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=Gh(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function cy(t,e,n,r){let i=["about:","blob:","chrome:","chrome-untrusted:","content:","data:","devtools:","file:","filesystem:","javascript:"];if(_p.test(t)){let s=t,o=s.startsWith("//")?new URL(e.protocol+s):new URL(s);if(i.includes(o.protocol))throw new Error("Invalid redirect location");let l=Tr(o.pathname,n)!=null;if(o.origin===e.origin&&l)return o.pathname+o.search+o.hash}try{let s=r.createURL(t);if(i.includes(s.protocol))throw new Error("Invalid redirect location")}catch{}return t}function Es(t,e,n,r){let i=t.createURL(hw(e)).toString(),s={signal:n};if(r&&Nn(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=Yh(r.formData):s.body=r.formData}return new Request(i,s)}function Yh(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function dy(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function vR(t,e,n,r,i){let s={},o=null,l,u=!1,c={},h=n&&sn(n[1])?n[1].error:void 0;return t.forEach(m=>{if(!(m.route.id in e))return;let g=m.route.id,E=e[g];if(pe(!Fi(E),"Cannot handle redirect results in processLoaderData"),sn(E)){let R=E.error;h!==void 0&&(R=h,h=void 0),o=o||{};{let P=Vi(t,g);o[P.route.id]==null&&(o[P.route.id]=R)}s[g]=void 0,u||(u=!0,l=$a(E.error)?E.error.status:500),E.headers&&(c[g]=E.headers)}else Xr(E)?(r.set(g,E.deferredData),s[g]=E.deferredData.data,E.statusCode!=null&&E.statusCode!==200&&!u&&(l=E.statusCode),E.headers&&(c[g]=E.headers)):(s[g]=E.data,E.statusCode&&E.statusCode!==200&&!u&&(l=E.statusCode),E.headers&&(c[g]=E.headers))}),h!==void 0&&n&&(o={[n[0]]:h},s[n[0]]=void 0),{loaderData:s,errors:o,statusCode:l||200,loaderHeaders:c}}function hy(t,e,n,r,i,s,o){let{loaderData:l,errors:u}=vR(e,n,r,o);return i.forEach(c=>{let{key:h,match:m,controller:g}=c,E=s[h];if(pe(E,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(sn(E)){let R=Vi(t.matches,m==null?void 0:m.route.id);u&&u[R.route.id]||(u=We({},u,{[R.route.id]:E.error})),t.fetchers.delete(h)}else if(Fi(E))pe(!1,"Unhandled fetcher revalidation redirect");else if(Xr(E))pe(!1,"Unhandled fetcher deferred data");else{let R=Fr(E.data);t.fetchers.set(h,R)}}),{loaderData:l,errors:u}}function fy(t,e,n,r){let i=We({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function py(t){return t?sn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Vi(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function my(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function qt(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new Zu(t||500,l,new Error(u),!0)}function Jl(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Fi(i))return{key:r,result:i}}}function hw(t){let e=typeof t=="string"?Cr(t):t;return Yi(We({},e,{hash:""}))}function _R(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function wR(t){return fw(t.result)&&sR.has(t.result.status)}function Xr(t){return t.type===ke.deferred}function sn(t){return t.type===ke.error}function Fi(t){return(t&&t.type)===ke.redirect}function gy(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function ER(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function fw(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function TR(t){return iR.has(t.toLowerCase())}function Nn(t){return nR.has(t.toLowerCase())}async function IR(t,e,n,r,i){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[l,u]=s[o],c=t.find(g=>(g==null?void 0:g.route.id)===l);if(!c)continue;let h=r.find(g=>g.route.id===c.route.id),m=h!=null&&!cw(h,c)&&(i&&i[c.route.id])!==void 0;Xr(u)&&m&&await wp(u,n,!1).then(g=>{g&&(e[l]=g)})}}async function xR(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:s,controller:o}=n[r],l=e[i];t.find(c=>(c==null?void 0:c.route.id)===s)&&Xr(l)&&(pe(o,"Expected an AbortController for revalidating fetcher deferred result"),await wp(l,o.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function wp(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ke.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ke.error,error:i}}return{type:ke.data,data:t.deferredData.data}}}function Ep(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ia(t,e){let n=typeof e=="string"?Cr(e).search:e.search;if(t[t.length-1].route.index&&Ep(n||""))return t[t.length-1];let r=aw(t);return r[r.length-1]}function yy(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function zd(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function SR(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Xo(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function RR(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Fr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function AR(t,e){try{let n=t.sessionStorage.getItem(uw);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function CR(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(uw,JSON.stringify(n))}catch(r){pi(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ec(){return ec=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ec.apply(this,arguments)}const ol=O.createContext(null),Tp=O.createContext(null),Pr=O.createContext(null),Ip=O.createContext(null),Zn=O.createContext({outlet:null,matches:[],isDataRoute:!1}),pw=O.createContext(null);function PR(t,e){let{relative:n}=e===void 0?{}:e;go()||pe(!1);let{basename:r,navigator:i}=O.useContext(Pr),{hash:s,pathname:o,search:l}=Oc(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:gr([r,o])),i.createHref({pathname:u,search:l,hash:s})}function go(){return O.useContext(Ip)!=null}function Ei(){return go()||pe(!1),O.useContext(Ip).location}function mw(t){O.useContext(Pr).static||O.useLayoutEffect(t)}function yo(){let{isDataRoute:t}=O.useContext(Zn);return t?WR():kR()}function kR(){go()||pe(!1);let t=O.useContext(ol),{basename:e,future:n,navigator:r}=O.useContext(Pr),{matches:i}=O.useContext(Zn),{pathname:s}=Ei(),o=JSON.stringify(Dc(i,n.v7_relativeSplatPath)),l=O.useRef(!1);return mw(()=>{l.current=!0}),O.useCallback(function(c,h){if(h===void 0&&(h={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=bc(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:gr([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,o,s,t])}const NR=O.createContext(null);function DR(t){let e=O.useContext(Zn).outlet;return e&&O.createElement(NR.Provider,{value:t},e)}function bR(){let{matches:t}=O.useContext(Zn),e=t[t.length-1];return e?e.params:{}}function Oc(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Pr),{matches:i}=O.useContext(Zn),{pathname:s}=Ei(),o=JSON.stringify(Dc(i,r.v7_relativeSplatPath));return O.useMemo(()=>bc(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function OR(t,e,n,r){go()||pe(!1);let{navigator:i}=O.useContext(Pr),{matches:s}=O.useContext(Zn),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Ei(),h;h=c;let m=h.pathname||"/",g=m;if(u!=="/"){let P=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let E=Li(t,{pathname:g});return UR(E&&E.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:gr([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:gr([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r)}function LR(){let t=$R(),e=$a(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const VR=O.createElement(LR,null);class MR extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Zn.Provider,{value:this.props.routeContext},O.createElement(pw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function jR(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(ol);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Zn.Provider,{value:e},r)}function UR(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||pe(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:g,errors:E}=n,R=m.route.loader&&g[m.route.id]===void 0&&(!E||E[m.route.id]===void 0);if(m.route.lazy||R){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,m,g)=>{let E,R=!1,P=null,D=null;n&&(E=l&&m.route.id?l[m.route.id]:void 0,P=m.route.errorElement||VR,u&&(c<0&&g===0?(HR("route-fallback"),R=!0,D=null):c===g&&(R=!0,D=m.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),_=()=>{let A;return E?A=P:R?A=D:m.route.Component?A=O.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=h,O.createElement(jR,{match:m,routeContext:{outlet:h,matches:x,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?O.createElement(MR,{location:n.location,revalidation:n.revalidation,component:P,error:E,children:_(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):_()},null)}var gw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(gw||{}),yw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yw||{});function FR(t){let e=O.useContext(ol);return e||pe(!1),e}function BR(t){let e=O.useContext(Tp);return e||pe(!1),e}function zR(t){let e=O.useContext(Zn);return e||pe(!1),e}function vw(t){let e=zR(),n=e.matches[e.matches.length-1];return n.route.id||pe(!1),n.route.id}function $R(){var t;let e=O.useContext(pw),n=BR(yw.UseRouteError),r=vw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function WR(){let{router:t}=FR(gw.UseNavigateStable),e=vw(),n=O.useRef(!1);return mw(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ec({fromRouteId:e},s)))},[t,e])}const vy={};function HR(t,e,n){vy[t]||(vy[t]=!0)}function qR(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function to(t){let{to:e,replace:n,state:r,relative:i}=t;go()||pe(!1);let{future:s,static:o}=O.useContext(Pr),{matches:l}=O.useContext(Zn),{pathname:u}=Ei(),c=yo(),h=bc(e,Dc(l,s.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(h);return O.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:i}),[c,m,i,n,r]),null}function KR(t){return DR(t.context)}function GR(t){let{basename:e="/",children:n=null,location:r,navigationType:i=it.Pop,navigator:s,static:o=!1,future:l}=t;go()&&pe(!1);let u=e.replace(/^\/*/,"/"),c=O.useMemo(()=>({basename:u,navigator:s,static:o,future:ec({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Cr(r));let{pathname:h="/",search:m="",hash:g="",state:E=null,key:R="default"}=r,P=O.useMemo(()=>{let D=Tr(h,u);return D==null?null:{location:{pathname:D,search:m,hash:g,state:E,key:R},navigationType:i}},[u,h,m,g,E,R,i]);return P==null?null:O.createElement(Pr.Provider,{value:c},O.createElement(Ip.Provider,{children:n,value:P}))}new Promise(()=>{});function QR(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:O.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:O.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:O.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function no(){return no=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},no.apply(this,arguments)}function _w(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function YR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function XR(t,e){return t.button===0&&(!e||e==="_self")&&!YR(t)}const JR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ZR=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],eA="6";try{window.__reactRouterVersion=eA}catch{}function tA(t,e){return uR({basename:void 0,future:no({},void 0,{v7_prependBasename:!0}),history:DS({window:void 0}),hydrationData:nA(),routes:t,mapRouteProperties:QR,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function nA(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=no({},e,{errors:rA(e.errors)})),e}function rA(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Zu(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const ww=O.createContext({isTransitioning:!1}),iA=O.createContext(new Map),sA="startTransition",_y=_I[sA],oA="flushSync",wy=NS[oA];function aA(t){_y?_y(t):t()}function Jo(t){wy?wy(t):t()}let lA=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function uA(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=O.useState(n.state),[o,l]=O.useState(),[u,c]=O.useState({isTransitioning:!1}),[h,m]=O.useState(),[g,E]=O.useState(),[R,P]=O.useState(),D=O.useRef(new Map),{v7_startTransition:x}=r||{},_=O.useCallback(v=>{x?aA(v):v()},[x]),A=O.useCallback((v,T)=>{let{deletedFetchers:I,flushSync:S,viewTransitionOpts:N}=T;v.fetchers.forEach((Ae,at)=>{Ae.data!==void 0&&D.current.set(at,Ae.data)}),I.forEach(Ae=>D.current.delete(Ae));let C=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!N||C){S?Jo(()=>s(v)):_(()=>s(v));return}if(S){Jo(()=>{g&&(h&&h.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:N.currentLocation,nextLocation:N.nextLocation})});let Ae=n.window.document.startViewTransition(()=>{Jo(()=>s(v))});Ae.finished.finally(()=>{Jo(()=>{m(void 0),E(void 0),l(void 0),c({isTransitioning:!1})})}),Jo(()=>E(Ae));return}g?(h&&h.resolve(),g.skipTransition(),P({state:v,currentLocation:N.currentLocation,nextLocation:N.nextLocation})):(l(v),c({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}))},[n.window,g,h,D,_]);O.useLayoutEffect(()=>n.subscribe(A),[n,A]),O.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new lA)},[u]),O.useEffect(()=>{if(h&&o&&n.window){let v=o,T=h.promise,I=n.window.document.startViewTransition(async()=>{_(()=>s(v)),await T});I.finished.finally(()=>{m(void 0),E(void 0),l(void 0),c({isTransitioning:!1})}),E(I)}},[_,o,h,n.window]),O.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,g,i.location,o]),O.useEffect(()=>{!u.isTransitioning&&R&&(l(R.state),c({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}),P(void 0))},[u.isTransitioning,R]),O.useEffect(()=>{},[]);let V=O.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:v=>n.navigate(v),push:(v,T,I)=>n.navigate(v,{state:T,preventScrollReset:I==null?void 0:I.preventScrollReset}),replace:(v,T,I)=>n.navigate(v,{replace:!0,state:T,preventScrollReset:I==null?void 0:I.preventScrollReset})}),[n]),U=n.basename||"/",B=O.useMemo(()=>({router:n,navigator:V,static:!1,basename:U}),[n,V,U]),y=O.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return O.useEffect(()=>qR(r,n.future),[r,n.future]),O.createElement(O.Fragment,null,O.createElement(ol.Provider,{value:B},O.createElement(Tp.Provider,{value:i},O.createElement(iA.Provider,{value:D.current},O.createElement(ww.Provider,{value:u},O.createElement(GR,{basename:U,location:i.location,navigationType:i.historyAction,navigator:V,future:y},i.initialized||n.future.v7_partialHydration?O.createElement(cA,{routes:n.routes,future:n.future,state:i}):e))))),null)}const cA=O.memo(dA);function dA(t){let{routes:e,future:n,state:r}=t;return OR(e,void 0,r,n)}const hA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,cr=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:h,viewTransition:m}=e,g=_w(e,JR),{basename:E}=O.useContext(Pr),R,P=!1;if(typeof c=="string"&&fA.test(c)&&(R=c,hA))try{let A=new URL(window.location.href),V=c.startsWith("//")?new URL(A.protocol+c):new URL(c),U=Tr(V.pathname,E);V.origin===A.origin&&U!=null?c=U+V.search+V.hash:P=!0}catch{}let D=PR(c,{relative:i}),x=mA(c,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,viewTransition:m});function _(A){r&&r(A),A.defaultPrevented||x(A)}return O.createElement("a",no({},g,{href:R||D,onClick:P||s?r:_,ref:n,target:u}))}),Ey=O.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:o=!1,style:l,to:u,viewTransition:c,children:h}=e,m=_w(e,ZR),g=Oc(u,{relative:m.relative}),E=Ei(),R=O.useContext(Tp),{navigator:P,basename:D}=O.useContext(Pr),x=R!=null&&gA(g)&&c===!0,_=P.encodeLocation?P.encodeLocation(g).pathname:g.pathname,A=E.pathname,V=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;i||(A=A.toLowerCase(),V=V?V.toLowerCase():null,_=_.toLowerCase()),V&&D&&(V=Tr(V,D)||V);const U=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let B=A===_||!o&&A.startsWith(_)&&A.charAt(U)==="/",y=V!=null&&(V===_||!o&&V.startsWith(_)&&V.charAt(_.length)==="/"),v={isActive:B,isPending:y,isTransitioning:x},T=B?r:void 0,I;typeof s=="function"?I=s(v):I=[s,B?"active":null,y?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let S=typeof l=="function"?l(v):l;return O.createElement(cr,no({},m,{"aria-current":T,className:I,ref:n,style:S,to:u,viewTransition:c}),typeof h=="function"?h(v):h)});var Xh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Xh||(Xh={}));var Ty;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ty||(Ty={}));function pA(t){let e=O.useContext(ol);return e||pe(!1),e}function mA(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,u=yo(),c=Ei(),h=Oc(t,{relative:o});return O.useCallback(m=>{if(XR(m,n)){m.preventDefault();let g=r!==void 0?r:Yi(c)===Yi(h);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[c,u,h,r,i,n,t,s,o,l])}function gA(t,e){e===void 0&&(e={});let n=O.useContext(ww);n==null&&pe(!1);let{basename:r}=pA(Xh.useViewTransitionState),i=Oc(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Tr(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Tr(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Ju(i.pathname,o)!=null||Ju(i.pathname,s)!=null}var Iy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Tw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,E=c&63;u||(E=64,o||(g=64)),r.push(n[h],n[m],n[g],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ew(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new vA;const g=s<<2|l>>4;if(r.push(g),c!==64){const E=l<<4&240|c>>2;if(r.push(E),m!==64){const R=c<<6&192|m;r.push(R)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _A=function(t){const e=Ew(t);return Tw.encodeByteArray(e,!0)},tc=function(t){return _A(t).replace(/\./g,"")},Iw=function(t){try{return Tw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA=()=>wA().__FIREBASE_DEFAULTS__,TA=()=>{if(typeof process>"u"||typeof Iy>"u")return;const t=Iy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Iw(t[1]);return e&&JSON.parse(e)},Lc=()=>{try{return EA()||TA()||IA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},xw=t=>{var e,n;return(n=(e=Lc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},xA=t=>{const e=xw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Sw=()=>{var t;return(t=Lc())===null||t===void 0?void 0:t.config},Rw=t=>{var e;return(e=Lc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tc(JSON.stringify(n)),tc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(jt())}function CA(){var t;const e=(t=Lc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function kA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function NA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function DA(){const t=jt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function bA(){return!CA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function OA(){try{return typeof indexedDB=="object"}catch{return!1}}function LA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="FirebaseError";class kr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=VA,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,al.prototype.create)}}class al{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?MA(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new kr(i,l,r)}}function MA(t,e){return t.replace(jA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jA=/\{\$([^}]+)}/g;function UA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(xy(s)&&xy(o)){if(!nc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function xy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function sa(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function oa(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FA(t,e){const n=new BA(t,e);return n.subscribe.bind(n)}class BA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=$d),i.error===void 0&&(i.error=$d),i.complete===void 0&&(i.complete=$d);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function $d(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HA(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WA(t){return t===Oi?void 0:t}function HA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new $A(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ve||(ve={}));const KA={debug:ve.DEBUG,verbose:ve.VERBOSE,info:ve.INFO,warn:ve.WARN,error:ve.ERROR,silent:ve.SILENT},GA=ve.INFO,QA={[ve.DEBUG]:"log",[ve.VERBOSE]:"log",[ve.INFO]:"info",[ve.WARN]:"warn",[ve.ERROR]:"error"},YA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=QA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xp{constructor(e){this.name=e,this._logLevel=GA,this._logHandler=YA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ve.DEBUG,...e),this._logHandler(this,ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ve.VERBOSE,...e),this._logHandler(this,ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ve.INFO,...e),this._logHandler(this,ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ve.WARN,...e),this._logHandler(this,ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ve.ERROR,...e),this._logHandler(this,ve.ERROR,...e)}}const XA=(t,e)=>e.some(n=>t instanceof n);let Sy,Ry;function JA(){return Sy||(Sy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZA(){return Ry||(Ry=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Aw=new WeakMap,Jh=new WeakMap,Cw=new WeakMap,Wd=new WeakMap,Sp=new WeakMap;function eC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ai(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Aw.set(n,t)}).catch(()=>{}),Sp.set(e,t),e}function tC(t){if(Jh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Jh.set(t,e)}let Zh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Cw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nC(t){Zh=t(Zh)}function rC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Hd(this),e,...n);return Cw.set(r,e.sort?e.sort():[e]),ai(r)}:ZA().includes(t)?function(...e){return t.apply(Hd(this),e),ai(Aw.get(this))}:function(...e){return ai(t.apply(Hd(this),e))}}function iC(t){return typeof t=="function"?rC(t):(t instanceof IDBTransaction&&tC(t),XA(t,JA())?new Proxy(t,Zh):t)}function ai(t){if(t instanceof IDBRequest)return eC(t);if(Wd.has(t))return Wd.get(t);const e=iC(t);return e!==t&&(Wd.set(t,e),Sp.set(e,t)),e}const Hd=t=>Sp.get(t);function sC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=ai(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ai(o.result),u.oldVersion,u.newVersion,ai(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const oC=["get","getKey","getAll","getAllKeys","count"],aC=["put","add","delete","clear"],qd=new Map;function Ay(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qd.get(e))return qd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=aC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||oC.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return qd.set(e,s),s}nC(t=>({...t,get:(e,n,r)=>Ay(e,n)||t.get(e,n,r),has:(e,n)=>!!Ay(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(uC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function uC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ef="@firebase/app",Cy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new xp("@firebase/app"),cC="@firebase/app-compat",dC="@firebase/analytics-compat",hC="@firebase/analytics",fC="@firebase/app-check-compat",pC="@firebase/app-check",mC="@firebase/auth",gC="@firebase/auth-compat",yC="@firebase/database",vC="@firebase/data-connect",_C="@firebase/database-compat",wC="@firebase/functions",EC="@firebase/functions-compat",TC="@firebase/installations",IC="@firebase/installations-compat",xC="@firebase/messaging",SC="@firebase/messaging-compat",RC="@firebase/performance",AC="@firebase/performance-compat",CC="@firebase/remote-config",PC="@firebase/remote-config-compat",kC="@firebase/storage",NC="@firebase/storage-compat",DC="@firebase/firestore",bC="@firebase/vertexai-preview",OC="@firebase/firestore-compat",LC="firebase",VC="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf="[DEFAULT]",MC={[ef]:"fire-core",[cC]:"fire-core-compat",[hC]:"fire-analytics",[dC]:"fire-analytics-compat",[pC]:"fire-app-check",[fC]:"fire-app-check-compat",[mC]:"fire-auth",[gC]:"fire-auth-compat",[yC]:"fire-rtdb",[vC]:"fire-data-connect",[_C]:"fire-rtdb-compat",[wC]:"fire-fn",[EC]:"fire-fn-compat",[TC]:"fire-iid",[IC]:"fire-iid-compat",[xC]:"fire-fcm",[SC]:"fire-fcm-compat",[RC]:"fire-perf",[AC]:"fire-perf-compat",[CC]:"fire-rc",[PC]:"fire-rc-compat",[kC]:"fire-gcs",[NC]:"fire-gcs-compat",[DC]:"fire-fst",[OC]:"fire-fst-compat",[bC]:"fire-vertex","fire-js":"fire-js",[LC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,jC=new Map,nf=new Map;function Py(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ro(t){const e=t.name;if(nf.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;nf.set(e,t);for(const n of rc.values())Py(n,t);for(const n of jC.values())Py(n,t);return!0}function Rp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function dr(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},li=new al("app","Firebase",UC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=VC;function Pw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw li.create("bad-app-name",{appName:String(i)});if(n||(n=Sw()),!n)throw li.create("no-options");const s=rc.get(i);if(s){if(nc(n,s.options)&&nc(r,s.config))return s;throw li.create("duplicate-app",{appName:i})}const o=new qA(i);for(const u of nf.values())o.addComponent(u);const l=new FC(n,r,o);return rc.set(i,l),l}function kw(t=tf){const e=rc.get(t);if(!e&&t===tf&&Sw())return Pw();if(!e)throw li.create("no-app",{appName:t});return e}function ui(t,e,n){var r;let i=(r=MC[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(l.join(" "));return}ro(new Xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC="firebase-heartbeat-database",zC=1,Wa="firebase-heartbeat-store";let Kd=null;function Nw(){return Kd||(Kd=sC(BC,zC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wa)}catch(n){console.warn(n)}}}}).catch(t=>{throw li.create("idb-open",{originalErrorMessage:t.message})})),Kd}async function $C(t){try{const n=(await Nw()).transaction(Wa),r=await n.objectStore(Wa).get(Dw(t));return await n.done,r}catch(e){if(e instanceof kr)Ir.warn(e.message);else{const n=li.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(n.message)}}}async function ky(t,e){try{const r=(await Nw()).transaction(Wa,"readwrite");await r.objectStore(Wa).put(e,Dw(t)),await r.done}catch(n){if(n instanceof kr)Ir.warn(n.message);else{const r=li.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ir.warn(r.message)}}}function Dw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=1024,HC=30*24*60*60*1e3;class qC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new GC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ny();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=HC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ny(),{heartbeatsToSend:r,unsentEntries:i}=KC(this._heartbeatsCache.heartbeats),s=tc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ir.warn(n),""}}}function Ny(){return new Date().toISOString().substring(0,10)}function KC(t,e=WC){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Dy(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class GC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return OA()?LA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await $C(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ky(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Dy(t){return tc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(t){ro(new Xi("platform-logger",e=>new lC(e),"PRIVATE")),ro(new Xi("heartbeat",e=>new qC(e),"PRIVATE")),ui(ef,Cy,t),ui(ef,Cy,"esm2017"),ui("fire-js","")}QC("");function Ap(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const YC=bw,Ow=new al("auth","Firebase",bw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new xp("@firebase/auth");function XC(t,...e){ic.logLevel<=ve.WARN&&ic.warn(`Auth (${vo}): ${t}`,...e)}function vu(t,...e){ic.logLevel<=ve.ERROR&&ic.error(`Auth (${vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,...e){throw Cp(t,...e)}function Gn(t,...e){return Cp(t,...e)}function Lw(t,e,n){const r=Object.assign(Object.assign({},YC()),{[e]:n});return new al("auth","Firebase",r).create(e,{appName:t.name})}function ci(t){return Lw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ow.create(t,...e)}function ae(t,e,...n){if(!t)throw Cp(e,...n)}function hr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw vu(e),new Error(e)}function xr(t,e){t||hr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JC(){return by()==="http:"||by()==="https:"}function by(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JC()||kA()||"connection"in navigator)?navigator.onLine:!0}function eP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n){this.shortDelay=e,this.longDelay=n,xr(n>e,"Short delay should be less than long delay!"),this.isMobile=AA()||NA()}get(){return ZC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(t,e){xr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP=new ul(3e4,6e4);function os(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ti(t,e,n,r,i={}){return Mw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=ll(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},s);return PA()||(c.referrerPolicy="no-referrer"),Vw.fetch()(jw(t,t.config.apiHost,n,l),c)})}async function Mw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tP),e);try{const i=new iP(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Zl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Zl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Zl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Lw(t,h,c);Vn(t,h)}}catch(i){if(i instanceof kr)throw i;Vn(t,"network-request-failed",{message:String(i)})}}async function Vc(t,e,n,r,i={}){const s=await Ti(t,e,n,r,i);return"mfaPendingCredential"in s&&Vn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function jw(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Pp(t.config,i):`${t.config.apiScheme}://${i}`}function rP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class iP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gn(this.auth,"network-request-failed")),nP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gn(t,e,r);return i.customData._tokenResponse=n,i}function Oy(t){return t!==void 0&&t.enterprise!==void 0}class sP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function oP(t,e){return Ti(t,"GET","/v2/recaptchaConfig",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e){return Ti(t,"POST","/v1/accounts:delete",e)}async function Uw(t,e){return Ti(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lP(t,e=!1){const n=yt(t),r=await n.getIdToken(e),i=kp(r);ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:wa(Gd(i.auth_time)),issuedAtTime:wa(Gd(i.iat)),expirationTime:wa(Gd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Gd(t){return Number(t)*1e3}function kp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return vu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Iw(n);return i?JSON.parse(i):(vu("Failed to decode base64 JWT payload"),null)}catch(i){return vu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Ly(t){const e=kp(t);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof kr&&uP(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function uP({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=wa(this.lastLoginAt),this.creationTime=wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Ha(t,Uw(n,{idToken:r}));ae(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Fw(s.providerUserInfo):[],l=hP(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new sf(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function dP(t){const e=yt(t);await sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hP(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Fw(t){return t.map(e=>{var{providerId:n}=e,r=Ap(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(t,e){const n=await Mw(t,{},async()=>{const r=ll({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=jw(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Vw.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pP(t,e){return Ti(t,"POST","/v2/accounts:revokeToken",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ly(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ae(e.length!==0,"internal-error");const n=Ly(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await fP(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ws;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ws,this.toJSON())}_performRefresh(){return hr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(t,e){ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Ap(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new sf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ha(this,this.stsTokenManager.getToken(this.auth,e));return ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lP(this,e)}reload(){return dP(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await sc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(ci(this.auth));const e=await this.getIdToken();return await Ha(this,aP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,E=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,R=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(l=n.tenantId)!==null&&l!==void 0?l:void 0,D=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(c=n.createdAt)!==null&&c!==void 0?c:void 0,_=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:A,emailVerified:V,isAnonymous:U,providerData:B,stsTokenManager:y}=n;ae(A&&y,e,"internal-error");const v=Ws.fromJSON(this.name,y);ae(typeof A=="string",e,"internal-error"),Ur(m,e.name),Ur(g,e.name),ae(typeof V=="boolean",e,"internal-error"),ae(typeof U=="boolean",e,"internal-error"),Ur(E,e.name),Ur(R,e.name),Ur(P,e.name),Ur(D,e.name),Ur(x,e.name),Ur(_,e.name);const T=new fr({uid:A,auth:e,email:g,emailVerified:V,displayName:m,isAnonymous:U,photoURL:R,phoneNumber:E,tenantId:P,stsTokenManager:v,createdAt:x,lastLoginAt:_});return B&&Array.isArray(B)&&(T.providerData=B.map(I=>Object.assign({},I))),D&&(T._redirectEventId=D),T}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ws;i.updateFromServerResponse(n);const s=new fr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await sc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ae(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Fw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Ws;l.updateFromIdToken(r);const u=new fr({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new sf(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=new Map;function pr(t){xr(t instanceof Function,"Expected a class definition");let e=Vy.get(t);return e?(xr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Vy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Bw.type="NONE";const My=Bw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _u(t,e,n){return`firebase:${t}:${e}:${n}`}class Hs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=_u(this.userKey,i.apiKey,s),this.fullPersistenceKey=_u("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hs(pr(My),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||pr(My);const o=_u(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){const m=fr._fromJSON(e,h);c!==s&&(l=m),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Hs(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Hs(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Hw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kw(e))return"Blackberry";if(Gw(e))return"Webos";if($w(e))return"Safari";if((e.includes("chrome/")||Ww(e))&&!e.includes("edge/"))return"Chrome";if(qw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function zw(t=jt()){return/firefox\//i.test(t)}function $w(t=jt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ww(t=jt()){return/crios\//i.test(t)}function Hw(t=jt()){return/iemobile/i.test(t)}function qw(t=jt()){return/android/i.test(t)}function Kw(t=jt()){return/blackberry/i.test(t)}function Gw(t=jt()){return/webos/i.test(t)}function Np(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mP(t=jt()){var e;return Np(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gP(){return DA()&&document.documentMode===10}function Qw(t=jt()){return Np(t)||qw(t)||Gw(t)||Kw(t)||/windows phone/i.test(t)||Hw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e=[]){let n;switch(t){case"Browser":n=jy(jt());break;case"Worker":n=`${jy(jt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vP(t,e={}){return Ti(t,"GET","/v2/passwordPolicy",os(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P=6;class wP{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_P,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uy(this),this.idTokenSubscription=new Uy(this),this.beforeStateQueue=new yP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ow,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Uw(this,{idToken:e}),r=await fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(dr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await sc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=eP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(ci(this));const n=e?yt(e):null;return n&&ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(ci(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(ci(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vP(this),n=new wP(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new al("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pr(e)||this._popupRedirectResolver;ae(n,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[pr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Yw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&XC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function _o(t){return yt(t)}class Uy{constructor(e){this.auth=e,this.observer=null,this.addObserver=FA(n=>this.observer=n)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function TP(t){Mc=t}function Xw(t){return Mc.loadJS(t)}function IP(){return Mc.recaptchaEnterpriseScript}function xP(){return Mc.gapiScript}function SP(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const RP="recaptcha-enterprise",AP="NO_RECAPTCHA";class CP{constructor(e){this.type=RP,this.auth=_o(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{oP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new sP(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;Oy(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(AP)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&Oy(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=IP();u.length!==0&&(u+=l),Xw(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function Fy(t,e,n,r=!1){const i=new CP(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function By(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Fy(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Fy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(t,e){const n=Rp(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(nc(s,e??{}))return i;Vn(i,"already-initialized")}return n.initialize({options:e})}function kP(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(pr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function NP(t,e,n){const r=_o(t);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Jw(e),{host:o,port:l}=DP(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),bP()}function Jw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function DP(t){const e=Jw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:zy(o)}}}function zy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bP(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hr("not implemented")}_getIdTokenResponse(e){return hr("not implemented")}_linkToIdToken(e,n){return hr("not implemented")}_getReauthenticationResolver(e){return hr("not implemented")}}async function OP(t,e){return Ti(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LP(t,e){return Vc(t,"POST","/v1/accounts:signInWithPassword",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(t,e){return Vc(t,"POST","/v1/accounts:signInWithEmailLink",os(t,e))}async function MP(t,e){return Vc(t,"POST","/v1/accounts:signInWithEmailLink",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Dp{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new qa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new qa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return By(e,n,"signInWithPassword",LP);case"emailLink":return VP(e,{email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return By(e,r,"signUpPassword",OP);case"emailLink":return MP(e,{idToken:n,email:this._email,oobCode:this._password});default:Vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e){return Vc(t,"POST","/v1/accounts:signInWithIdp",os(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="http://localhost";class Ji extends Dp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ji(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Ap(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ji(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}buildRequest(){const e={requestUri:jP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ll(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FP(t){const e=sa(oa(t)).link,n=e?sa(oa(e)).deep_link_id:null,r=sa(oa(t)).deep_link_id;return(r?sa(oa(r)).link:null)||r||n||e||t}class bp{constructor(e){var n,r,i,s,o,l;const u=sa(oa(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,m=UP((i=u.mode)!==null&&i!==void 0?i:null);ae(c&&h&&m,"argument-error"),this.apiKey=c,this.operation=m,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=FP(e);try{return new bp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.providerId=wo.PROVIDER_ID}static credential(e,n){return qa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=bp.parseLink(n);return ae(r,"argument-error"),qa._fromEmailAndCode(e,r.code,r.tenantId)}}wo.PROVIDER_ID="password";wo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";wo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Zw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends cl{constructor(){super("facebook.com")}static credential(e){return Ji._fromParams({providerId:Hr.PROVIDER_ID,signInMethod:Hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hr.credentialFromTaggedObject(e)}static credentialFromError(e){return Hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hr.credential(e.oauthAccessToken)}catch{return null}}}Hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ji._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qr.credential(n,r)}catch{return null}}}qr.GOOGLE_SIGN_IN_METHOD="google.com";qr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr extends cl{constructor(){super("github.com")}static credential(e){return Ji._fromParams({providerId:Kr.PROVIDER_ID,signInMethod:Kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Kr.credentialFromTaggedObject(e)}static credentialFromError(e){return Kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Kr.credential(e.oauthAccessToken)}catch{return null}}}Kr.GITHUB_SIGN_IN_METHOD="github.com";Kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr extends cl{constructor(){super("twitter.com")}static credential(e,n){return Ji._fromParams({providerId:Gr.PROVIDER_ID,signInMethod:Gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Gr.credentialFromTaggedObject(e)}static credentialFromError(e){return Gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Gr.credential(n,r)}catch{return null}}}Gr.TWITTER_SIGN_IN_METHOD="twitter.com";Gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await fr._fromIdTokenResponse(e,r,i),o=$y(r);return new io({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=$y(r);return new io({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function $y(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends kr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,oc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new oc(e,n,r,i)}}function eE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?oc._fromErrorAndOperation(t,s,e,r):s})}async function BP(t,e,n=!1){const r=await Ha(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return io._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(t,e,n=!1){const{auth:r}=t;if(dr(r.app))return Promise.reject(ci(r));const i="reauthenticate";try{const s=await Ha(t,eE(r,i,e,t),n);ae(s.idToken,r,"internal-error");const o=kp(s.idToken);ae(o,r,"internal-error");const{sub:l}=o;return ae(t.uid===l,r,"user-mismatch"),io._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tE(t,e,n=!1){if(dr(t.app))return Promise.reject(ci(t));const r="signIn",i=await eE(t,r,e),s=await io._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function $P(t,e){return tE(_o(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t){const e=_o(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function HP(t,e,n){return dr(t.app)?Promise.reject(ci(t)):$P(yt(t),wo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&WP(t),r})}function qP(t,e,n,r){return yt(t).onIdTokenChanged(e,n,r)}function KP(t,e,n){return yt(t).beforeAuthStateChanged(e,n)}function GP(t,e,n,r){return yt(t).onAuthStateChanged(e,n,r)}function QP(t){return yt(t).signOut()}const ac="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ac,"1"),this.storage.removeItem(ac),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=1e3,XP=10;class rE extends nE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Qw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);gP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,XP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},YP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rE.type="LOCAL";const JP=rE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE extends nE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iE.type="SESSION";const sE=iE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new jc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await ZP(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Op("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qn(){return window}function tk(t){Qn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(){return typeof Qn().WorkerGlobalScope<"u"&&typeof Qn().importScripts=="function"}async function nk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function ik(){return oE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="firebaseLocalStorageDb",sk=1,lc="firebaseLocalStorage",lE="fbase_key";class dl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uc(t,e){return t.transaction([lc],e?"readwrite":"readonly").objectStore(lc)}function ok(){const t=indexedDB.deleteDatabase(aE);return new dl(t).toPromise()}function of(){const t=indexedDB.open(aE,sk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(lc,{keyPath:lE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(lc)?e(r):(r.close(),await ok(),e(await of()))})})}async function Wy(t,e,n){const r=Uc(t,!0).put({[lE]:e,value:n});return new dl(r).toPromise()}async function ak(t,e){const n=Uc(t,!1).get(e),r=await new dl(n).toPromise();return r===void 0?null:r.value}function Hy(t,e){const n=Uc(t,!0).delete(e);return new dl(n).toPromise()}const lk=800,uk=3;class uE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await of(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jc._getInstance(ik()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nk(),!this.activeServiceWorker)return;this.sender=new ek(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await of();return await Wy(e,ac,"1"),await Hy(e,ac),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>ak(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Uc(i,!1).getAll();return new dl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uE.type="LOCAL";const ck=uE;new ul(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dk(t,e){return e?pr(e):(ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp extends Dp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hk(t){return tE(t.auth,new Lp(t),t.bypassAuthState)}function fk(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),zP(n,new Lp(t),t.bypassAuthState)}async function pk(t){const{auth:e,user:n}=t;return ae(n,e,"internal-error"),BP(n,new Lp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hk;case"linkViaPopup":case"linkViaRedirect":return pk;case"reauthViaPopup":case"reauthViaRedirect":return fk;default:Vn(this.auth,"internal-error")}}resolve(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=new ul(2e3,1e4);class Ms extends cE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ae(e,this.auth,"internal-error"),e}async onExecution(){xr(this.filter.length===1,"Popup operations only handle one event");const e=Op();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Gn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mk.get())};e()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="pendingRedirect",wu=new Map;class yk extends cE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wu.get(this.auth._key());if(!e){try{const r=await vk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wu.set(this.auth._key(),e)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vk(t,e){const n=Ek(e),r=wk(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function _k(t,e){wu.set(t._key(),e)}function wk(t){return pr(t._redirectPersistence)}function Ek(t){return _u(gk,t.config.apiKey,t.name)}async function Tk(t,e,n=!1){if(dr(t.app))return Promise.reject(ci(t));const r=_o(t),i=dk(r,e),o=await new yk(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=10*60*1e3;class xk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Sk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ik&&this.cachedEventUids.clear(),this.cachedEventUids.has(qy(e))}saveEventToCache(e){this.cachedEventUids.add(qy(e)),this.lastProcessedEventTime=Date.now()}}function qy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Sk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rk(t,e={}){return Ti(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ck=/^https?/;async function Pk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Rk(t);for(const n of e)try{if(kk(n))return}catch{}Vn(t,"unauthorized-domain")}function kk(t){const e=rf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Ck.test(n))return!1;if(Ak.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=new ul(3e4,6e4);function Ky(){const t=Qn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Dk(t){return new Promise((e,n)=>{var r,i,s;function o(){Ky(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ky(),n(Gn(t,"network-request-failed"))},timeout:Nk.get()})}if(!((i=(r=Qn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Qn().gapi)===null||s===void 0)&&s.load)o();else{const l=SP("iframefcb");return Qn()[l]=()=>{gapi.load?o():n(Gn(t,"network-request-failed"))},Xw(`${xP()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Eu=null,e})}let Eu=null;function bk(t){return Eu=Eu||Dk(t),Eu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=new ul(5e3,15e3),Lk="__/auth/iframe",Vk="emulator/auth/iframe",Mk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uk(t){const e=t.config;ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pp(e,Vk):`https://${t.config.authDomain}/${Lk}`,r={apiKey:e.apiKey,appName:t.name,v:vo},i=jk.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ll(r).slice(1)}`}async function Fk(t){const e=await bk(t),n=Qn().gapi;return ae(n,t,"internal-error"),e.open({where:document.body,url:Uk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Gn(t,"network-request-failed"),l=Qn().setTimeout(()=>{s(o)},Ok.get());function u(){Qn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zk=500,$k=600,Wk="_blank",Hk="http://localhost";class Gy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qk(t,e,n,r=zk,i=$k){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Bk),{width:r.toString(),height:i.toString(),top:s,left:o}),c=jt().toLowerCase();n&&(l=Ww(c)?Wk:n),zw(c)&&(e=e||Hk,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[E,R])=>`${g}${E}=${R},`,"");if(mP(c)&&l!=="_self")return Kk(e||"",l),new Gy(null);const m=window.open(e||"",l,h);ae(m,t,"popup-blocked");try{m.focus()}catch{}return new Gy(m)}function Kk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="__/auth/handler",Qk="emulator/auth/handler",Yk=encodeURIComponent("fac");async function Qy(t,e,n,r,i,s){ae(t.config.authDomain,t,"auth-domain-config-required"),ae(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vo,eventId:i};if(e instanceof Zw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof cl){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${Yk}=${encodeURIComponent(u)}`:"";return`${Xk(t)}?${ll(l).slice(1)}${c}`}function Xk({config:t}){return t.emulator?Pp(t,Qk):`https://${t.authDomain}/${Gk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd="webStorageSupport";class Jk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sE,this._completeRedirectFn=Tk,this._overrideRedirectResult=_k}async _openPopup(e,n,r,i){var s;xr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Qy(e,n,r,rf(),i);return qk(e,o,Op())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Qy(e,n,r,rf(),i);return tk(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(xr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Fk(e),r=new xk(e);return n.register("authEvent",i=>(ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Qd,{type:Qd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Qd];o!==void 0&&n(!!o),Vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Pk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Qw()||$w()||Np()}}const Zk=Jk;var Yy="@firebase/auth",Xy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t1(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n1(t){ro(new Xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Yw(t)},c=new EP(r,i,s,u);return kP(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ro(new Xi("auth-internal",e=>{const n=_o(e.getProvider("auth").getImmediate());return(r=>new e1(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ui(Yy,Xy,t1(t)),ui(Yy,Xy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=5*60,i1=Rw("authIdTokenMaxAge")||r1;let Jy=null;const s1=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>i1)return;const i=n==null?void 0:n.token;Jy!==i&&(Jy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function o1(t=kw()){const e=Rp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=PP(t,{popupRedirectResolver:Zk,persistence:[ck,JP,sE]}),r=Rw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=s1(s.toString());KP(n,o,()=>o(n.currentUser)),qP(n,l=>o(l))}}const i=xw("auth");return i&&NP(n,`http://${i}`),n}function a1(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}TP({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Gn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",a1().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n1("Browser");var Zy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wi,hE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(y,v){function T(){}T.prototype=v.prototype,y.D=v.prototype,y.prototype=new T,y.prototype.constructor=y,y.C=function(I,S,N){for(var C=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)C[Ae-2]=arguments[Ae];return v.prototype[S].apply(I,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(y,v,T){T||(T=0);var I=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)I[S]=v.charCodeAt(T++)|v.charCodeAt(T++)<<8|v.charCodeAt(T++)<<16|v.charCodeAt(T++)<<24;else for(S=0;16>S;++S)I[S]=v[T++]|v[T++]<<8|v[T++]<<16|v[T++]<<24;v=y.g[0],T=y.g[1],S=y.g[2];var N=y.g[3],C=v+(N^T&(S^N))+I[0]+3614090360&4294967295;v=T+(C<<7&4294967295|C>>>25),C=N+(S^v&(T^S))+I[1]+3905402710&4294967295,N=v+(C<<12&4294967295|C>>>20),C=S+(T^N&(v^T))+I[2]+606105819&4294967295,S=N+(C<<17&4294967295|C>>>15),C=T+(v^S&(N^v))+I[3]+3250441966&4294967295,T=S+(C<<22&4294967295|C>>>10),C=v+(N^T&(S^N))+I[4]+4118548399&4294967295,v=T+(C<<7&4294967295|C>>>25),C=N+(S^v&(T^S))+I[5]+1200080426&4294967295,N=v+(C<<12&4294967295|C>>>20),C=S+(T^N&(v^T))+I[6]+2821735955&4294967295,S=N+(C<<17&4294967295|C>>>15),C=T+(v^S&(N^v))+I[7]+4249261313&4294967295,T=S+(C<<22&4294967295|C>>>10),C=v+(N^T&(S^N))+I[8]+1770035416&4294967295,v=T+(C<<7&4294967295|C>>>25),C=N+(S^v&(T^S))+I[9]+2336552879&4294967295,N=v+(C<<12&4294967295|C>>>20),C=S+(T^N&(v^T))+I[10]+4294925233&4294967295,S=N+(C<<17&4294967295|C>>>15),C=T+(v^S&(N^v))+I[11]+2304563134&4294967295,T=S+(C<<22&4294967295|C>>>10),C=v+(N^T&(S^N))+I[12]+1804603682&4294967295,v=T+(C<<7&4294967295|C>>>25),C=N+(S^v&(T^S))+I[13]+4254626195&4294967295,N=v+(C<<12&4294967295|C>>>20),C=S+(T^N&(v^T))+I[14]+2792965006&4294967295,S=N+(C<<17&4294967295|C>>>15),C=T+(v^S&(N^v))+I[15]+1236535329&4294967295,T=S+(C<<22&4294967295|C>>>10),C=v+(S^N&(T^S))+I[1]+4129170786&4294967295,v=T+(C<<5&4294967295|C>>>27),C=N+(T^S&(v^T))+I[6]+3225465664&4294967295,N=v+(C<<9&4294967295|C>>>23),C=S+(v^T&(N^v))+I[11]+643717713&4294967295,S=N+(C<<14&4294967295|C>>>18),C=T+(N^v&(S^N))+I[0]+3921069994&4294967295,T=S+(C<<20&4294967295|C>>>12),C=v+(S^N&(T^S))+I[5]+3593408605&4294967295,v=T+(C<<5&4294967295|C>>>27),C=N+(T^S&(v^T))+I[10]+38016083&4294967295,N=v+(C<<9&4294967295|C>>>23),C=S+(v^T&(N^v))+I[15]+3634488961&4294967295,S=N+(C<<14&4294967295|C>>>18),C=T+(N^v&(S^N))+I[4]+3889429448&4294967295,T=S+(C<<20&4294967295|C>>>12),C=v+(S^N&(T^S))+I[9]+568446438&4294967295,v=T+(C<<5&4294967295|C>>>27),C=N+(T^S&(v^T))+I[14]+3275163606&4294967295,N=v+(C<<9&4294967295|C>>>23),C=S+(v^T&(N^v))+I[3]+4107603335&4294967295,S=N+(C<<14&4294967295|C>>>18),C=T+(N^v&(S^N))+I[8]+1163531501&4294967295,T=S+(C<<20&4294967295|C>>>12),C=v+(S^N&(T^S))+I[13]+2850285829&4294967295,v=T+(C<<5&4294967295|C>>>27),C=N+(T^S&(v^T))+I[2]+4243563512&4294967295,N=v+(C<<9&4294967295|C>>>23),C=S+(v^T&(N^v))+I[7]+1735328473&4294967295,S=N+(C<<14&4294967295|C>>>18),C=T+(N^v&(S^N))+I[12]+2368359562&4294967295,T=S+(C<<20&4294967295|C>>>12),C=v+(T^S^N)+I[5]+4294588738&4294967295,v=T+(C<<4&4294967295|C>>>28),C=N+(v^T^S)+I[8]+2272392833&4294967295,N=v+(C<<11&4294967295|C>>>21),C=S+(N^v^T)+I[11]+1839030562&4294967295,S=N+(C<<16&4294967295|C>>>16),C=T+(S^N^v)+I[14]+4259657740&4294967295,T=S+(C<<23&4294967295|C>>>9),C=v+(T^S^N)+I[1]+2763975236&4294967295,v=T+(C<<4&4294967295|C>>>28),C=N+(v^T^S)+I[4]+1272893353&4294967295,N=v+(C<<11&4294967295|C>>>21),C=S+(N^v^T)+I[7]+4139469664&4294967295,S=N+(C<<16&4294967295|C>>>16),C=T+(S^N^v)+I[10]+3200236656&4294967295,T=S+(C<<23&4294967295|C>>>9),C=v+(T^S^N)+I[13]+681279174&4294967295,v=T+(C<<4&4294967295|C>>>28),C=N+(v^T^S)+I[0]+3936430074&4294967295,N=v+(C<<11&4294967295|C>>>21),C=S+(N^v^T)+I[3]+3572445317&4294967295,S=N+(C<<16&4294967295|C>>>16),C=T+(S^N^v)+I[6]+76029189&4294967295,T=S+(C<<23&4294967295|C>>>9),C=v+(T^S^N)+I[9]+3654602809&4294967295,v=T+(C<<4&4294967295|C>>>28),C=N+(v^T^S)+I[12]+3873151461&4294967295,N=v+(C<<11&4294967295|C>>>21),C=S+(N^v^T)+I[15]+530742520&4294967295,S=N+(C<<16&4294967295|C>>>16),C=T+(S^N^v)+I[2]+3299628645&4294967295,T=S+(C<<23&4294967295|C>>>9),C=v+(S^(T|~N))+I[0]+4096336452&4294967295,v=T+(C<<6&4294967295|C>>>26),C=N+(T^(v|~S))+I[7]+1126891415&4294967295,N=v+(C<<10&4294967295|C>>>22),C=S+(v^(N|~T))+I[14]+2878612391&4294967295,S=N+(C<<15&4294967295|C>>>17),C=T+(N^(S|~v))+I[5]+4237533241&4294967295,T=S+(C<<21&4294967295|C>>>11),C=v+(S^(T|~N))+I[12]+1700485571&4294967295,v=T+(C<<6&4294967295|C>>>26),C=N+(T^(v|~S))+I[3]+2399980690&4294967295,N=v+(C<<10&4294967295|C>>>22),C=S+(v^(N|~T))+I[10]+4293915773&4294967295,S=N+(C<<15&4294967295|C>>>17),C=T+(N^(S|~v))+I[1]+2240044497&4294967295,T=S+(C<<21&4294967295|C>>>11),C=v+(S^(T|~N))+I[8]+1873313359&4294967295,v=T+(C<<6&4294967295|C>>>26),C=N+(T^(v|~S))+I[15]+4264355552&4294967295,N=v+(C<<10&4294967295|C>>>22),C=S+(v^(N|~T))+I[6]+2734768916&4294967295,S=N+(C<<15&4294967295|C>>>17),C=T+(N^(S|~v))+I[13]+1309151649&4294967295,T=S+(C<<21&4294967295|C>>>11),C=v+(S^(T|~N))+I[4]+4149444226&4294967295,v=T+(C<<6&4294967295|C>>>26),C=N+(T^(v|~S))+I[11]+3174756917&4294967295,N=v+(C<<10&4294967295|C>>>22),C=S+(v^(N|~T))+I[2]+718787259&4294967295,S=N+(C<<15&4294967295|C>>>17),C=T+(N^(S|~v))+I[9]+3951481745&4294967295,y.g[0]=y.g[0]+v&4294967295,y.g[1]=y.g[1]+(S+(C<<21&4294967295|C>>>11))&4294967295,y.g[2]=y.g[2]+S&4294967295,y.g[3]=y.g[3]+N&4294967295}r.prototype.u=function(y,v){v===void 0&&(v=y.length);for(var T=v-this.blockSize,I=this.B,S=this.h,N=0;N<v;){if(S==0)for(;N<=T;)i(this,y,N),N+=this.blockSize;if(typeof y=="string"){for(;N<v;)if(I[S++]=y.charCodeAt(N++),S==this.blockSize){i(this,I),S=0;break}}else for(;N<v;)if(I[S++]=y[N++],S==this.blockSize){i(this,I),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var y=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);y[0]=128;for(var v=1;v<y.length-8;++v)y[v]=0;var T=8*this.o;for(v=y.length-8;v<y.length;++v)y[v]=T&255,T/=256;for(this.u(y),y=Array(16),v=T=0;4>v;++v)for(var I=0;32>I;I+=8)y[T++]=this.g[v]>>>I&255;return y};function s(y,v){var T=l;return Object.prototype.hasOwnProperty.call(T,y)?T[y]:T[y]=v(y)}function o(y,v){this.h=v;for(var T=[],I=!0,S=y.length-1;0<=S;S--){var N=y[S]|0;I&&N==v||(T[S]=N,I=!1)}this.g=T}var l={};function u(y){return-128<=y&&128>y?s(y,function(v){return new o([v|0],0>v?-1:0)}):new o([y|0],0>y?-1:0)}function c(y){if(isNaN(y)||!isFinite(y))return m;if(0>y)return D(c(-y));for(var v=[],T=1,I=0;y>=T;I++)v[I]=y/T|0,T*=4294967296;return new o(v,0)}function h(y,v){if(y.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(y.charAt(0)=="-")return D(h(y.substring(1),v));if(0<=y.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(v,8)),I=m,S=0;S<y.length;S+=8){var N=Math.min(8,y.length-S),C=parseInt(y.substring(S,S+N),v);8>N?(N=c(Math.pow(v,N)),I=I.j(N).add(c(C))):(I=I.j(T),I=I.add(c(C)))}return I}var m=u(0),g=u(1),E=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-D(this).m();for(var y=0,v=1,T=0;T<this.g.length;T++){var I=this.i(T);y+=(0<=I?I:4294967296+I)*v,v*=4294967296}return y},t.toString=function(y){if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(R(this))return"0";if(P(this))return"-"+D(this).toString(y);for(var v=c(Math.pow(y,6)),T=this,I="";;){var S=V(T,v).g;T=x(T,S.j(v));var N=((0<T.g.length?T.g[0]:T.h)>>>0).toString(y);if(T=S,R(T))return N+I;for(;6>N.length;)N="0"+N;I=N+I}},t.i=function(y){return 0>y?0:y<this.g.length?this.g[y]:this.h};function R(y){if(y.h!=0)return!1;for(var v=0;v<y.g.length;v++)if(y.g[v]!=0)return!1;return!0}function P(y){return y.h==-1}t.l=function(y){return y=x(this,y),P(y)?-1:R(y)?0:1};function D(y){for(var v=y.g.length,T=[],I=0;I<v;I++)T[I]=~y.g[I];return new o(T,~y.h).add(g)}t.abs=function(){return P(this)?D(this):this},t.add=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],I=0,S=0;S<=v;S++){var N=I+(this.i(S)&65535)+(y.i(S)&65535),C=(N>>>16)+(this.i(S)>>>16)+(y.i(S)>>>16);I=C>>>16,N&=65535,C&=65535,T[S]=C<<16|N}return new o(T,T[T.length-1]&-2147483648?-1:0)};function x(y,v){return y.add(D(v))}t.j=function(y){if(R(this)||R(y))return m;if(P(this))return P(y)?D(this).j(D(y)):D(D(this).j(y));if(P(y))return D(this.j(D(y)));if(0>this.l(E)&&0>y.l(E))return c(this.m()*y.m());for(var v=this.g.length+y.g.length,T=[],I=0;I<2*v;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(var S=0;S<y.g.length;S++){var N=this.i(I)>>>16,C=this.i(I)&65535,Ae=y.i(S)>>>16,at=y.i(S)&65535;T[2*I+2*S]+=C*at,_(T,2*I+2*S),T[2*I+2*S+1]+=N*at,_(T,2*I+2*S+1),T[2*I+2*S+1]+=C*Ae,_(T,2*I+2*S+1),T[2*I+2*S+2]+=N*Ae,_(T,2*I+2*S+2)}for(I=0;I<v;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=v;I<2*v;I++)T[I]=0;return new o(T,0)};function _(y,v){for(;(y[v]&65535)!=y[v];)y[v+1]+=y[v]>>>16,y[v]&=65535,v++}function A(y,v){this.g=y,this.h=v}function V(y,v){if(R(v))throw Error("division by zero");if(R(y))return new A(m,m);if(P(y))return v=V(D(y),v),new A(D(v.g),D(v.h));if(P(v))return v=V(y,D(v)),new A(D(v.g),v.h);if(30<y.g.length){if(P(y)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var T=g,I=v;0>=I.l(y);)T=U(T),I=U(I);var S=B(T,1),N=B(I,1);for(I=B(I,2),T=B(T,2);!R(I);){var C=N.add(I);0>=C.l(y)&&(S=S.add(T),N=C),I=B(I,1),T=B(T,1)}return v=x(y,S.j(v)),new A(S,v)}for(S=m;0<=y.l(v);){for(T=Math.max(1,Math.floor(y.m()/v.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),N=c(T),C=N.j(v);P(C)||0<C.l(y);)T-=I,N=c(T),C=N.j(v);R(N)&&(N=g),S=S.add(N),y=x(y,C)}return new A(S,y)}t.A=function(y){return V(this,y).h},t.and=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],I=0;I<v;I++)T[I]=this.i(I)&y.i(I);return new o(T,this.h&y.h)},t.or=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],I=0;I<v;I++)T[I]=this.i(I)|y.i(I);return new o(T,this.h|y.h)},t.xor=function(y){for(var v=Math.max(this.g.length,y.g.length),T=[],I=0;I<v;I++)T[I]=this.i(I)^y.i(I);return new o(T,this.h^y.h)};function U(y){for(var v=y.g.length+1,T=[],I=0;I<v;I++)T[I]=y.i(I)<<1|y.i(I-1)>>>31;return new o(T,y.h)}function B(y,v){var T=v>>5;v%=32;for(var I=y.g.length-T,S=[],N=0;N<I;N++)S[N]=0<v?y.i(N+T)>>>v|y.i(N+T+1)<<32-v:y.i(N+T);return new o(S,y.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Wi=o}).apply(typeof Zy<"u"?Zy:typeof self<"u"?self:typeof window<"u"?window:{});var eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fE,aa,pE,Tu,af,mE,gE,yE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof eu=="object"&&eu];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var f=r;a=a.split(".");for(var w=0;w<a.length-1;w++){var L=a[w];if(!(L in f))break e;f=f[L]}a=a[a.length-1],w=f[a],d=d(w),d!=w&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var f=0,w=!1,L={next:function(){if(!w&&f<a.length){var j=f++;return{value:d(j,a[j]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),a.apply(d,L)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function E(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var w=f.slice();return w.push.apply(w,arguments),a.apply(this,w)}}function R(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(w,L,j){for(var K=Array(arguments.length-2),be=2;be<arguments.length;be++)K[be-2]=arguments[be];return d.prototype[L].apply(w,K)}}function P(a){const d=a.length;if(0<d){const f=Array(d);for(let w=0;w<d;w++)f[w]=a[w];return f}return[]}function D(a,d){for(let f=1;f<arguments.length;f++){const w=arguments[f];if(u(w)){const L=a.length||0,j=w.length||0;a.length=L+j;for(let K=0;K<j;K++)a[L+K]=w[K]}else a.push(w)}}class x{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function _(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function V(a){return V[" "](a),a}V[" "]=function(){};var U=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function B(a,d,f){for(const w in a)d.call(f,a[w],w,a)}function y(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function v(a){const d={};for(const f in a)d[f]=a[f];return d}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,d){let f,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(f in w)a[f]=w[f];for(let j=0;j<T.length;j++)f=T[j],Object.prototype.hasOwnProperty.call(w,f)&&(a[f]=w[f])}}function S(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function N(a){l.setTimeout(()=>{throw a},0)}function C(){var a=ie;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class Ae{constructor(){this.h=this.g=null}add(d,f){const w=at.get();w.set(d,f),this.h?this.h.next=w:this.g=w,this.h=w}}var at=new x(()=>new fn,a=>a.reset());class fn{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let vt,q=!1,ie=new Ae,se=()=>{const a=l.Promise.resolve(void 0);vt=()=>{a.then(Te)}};var Te=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){N(f)}var d=at;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}q=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var ft=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function ze(a,d){if(Ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,w=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(U){e:{try{V(d.nodeName);var L=!0;break e}catch{}L=!1}L||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:tt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&ze.aa.h.call(this)}}R(ze,Ie);var tt={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var $="closure_listenable_"+(1e6*Math.random()|0),_e=0;function Oe(a,d,f,w,L){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!w,this.ha=L,this.key=++_e,this.da=this.fa=!1}function Ut(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function In(a){this.src=a,this.g={},this.h=0}In.prototype.add=function(a,d,f,w,L){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var K=Ct(a,d,w,L);return-1<K?(d=a[K],f||(d.fa=!1)):(d=new Oe(d,this.src,j,!!w,L),d.fa=f,a.push(d)),d};function Ce(a,d){var f=d.type;if(f in a.g){var w=a.g[f],L=Array.prototype.indexOf.call(w,d,void 0),j;(j=0<=L)&&Array.prototype.splice.call(w,L,1),j&&(Ut(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Ct(a,d,f,w){for(var L=0;L<a.length;++L){var j=a[L];if(!j.da&&j.listener==d&&j.capture==!!f&&j.ha==w)return L}return-1}var hs="closure_lm_"+(1e6*Math.random()|0),Ro={};function Un(a,d,f,w,L){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Un(a,d[j],f,w,L);return null}return f=Dr(f),a&&a[$]?a.K(d,f,c(w)?!!w.capture:!1,L):sd(a,d,f,!1,w,L)}function sd(a,d,f,w,L,j){if(!d)throw Error("Invalid event type");var K=c(L)?!!L.capture:!!L,be=Po(a);if(be||(a[hs]=be=new In(a)),f=be.add(d,f,w,K,j),f.proxy)return f;if(w=od(),f.proxy=w,w.src=a,w.listener=f,a.addEventListener)ft||(L=K),L===void 0&&(L=!1),a.addEventListener(d.toString(),w,L);else if(a.attachEvent)a.attachEvent(_l(d.toString()),w);else if(a.addListener&&a.removeListener)a.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return f}function od(){function a(f){return d.call(a.src,a.listener,f)}const d=ad;return a}function Ao(a,d,f,w,L){if(Array.isArray(d))for(var j=0;j<d.length;j++)Ao(a,d[j],f,w,L);else w=c(w)?!!w.capture:!!w,f=Dr(f),a&&a[$]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],f=Ct(j,f,w,L),-1<f&&(Ut(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=Po(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Ct(d,f,w,L)),(f=-1<a?d[a]:null)&&Co(f))}function Co(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[$])Ce(d.i,a);else{var f=a.type,w=a.proxy;d.removeEventListener?d.removeEventListener(f,w,a.capture):d.detachEvent?d.detachEvent(_l(f),w):d.addListener&&d.removeListener&&d.removeListener(w),(f=Po(d))?(Ce(f,a),f.h==0&&(f.src=null,d[hs]=null)):Ut(a)}}}function _l(a){return a in Ro?Ro[a]:Ro[a]="on"+a}function ad(a,d){if(a.da)a=!0;else{d=new ze(d,this);var f=a.listener,w=a.ha||a.src;a.fa&&Co(a),a=f.call(w,d)}return a}function Po(a){return a=a[hs],a instanceof In?a:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dr(a){return typeof a=="function"?a:(a[xn]||(a[xn]=function(d){return a.handleEvent(d)}),a[xn])}function lt(){fe.call(this),this.i=new In(this),this.M=this,this.F=null}R(lt,fe),lt.prototype[$]=!0,lt.prototype.removeEventListener=function(a,d,f,w){Ao(this,a,d,f,w)};function ut(a,d){var f,w=a.F;if(w)for(f=[];w;w=w.F)f.push(w);if(a=a.M,w=d.type||d,typeof d=="string")d=new Ie(d,a);else if(d instanceof Ie)d.target=d.target||a;else{var L=d;d=new Ie(w,a),I(d,L)}if(L=!0,f)for(var j=f.length-1;0<=j;j--){var K=d.g=f[j];L=en(K,w,!0,d)&&L}if(K=d.g=a,L=en(K,w,!0,d)&&L,L=en(K,w,!1,d)&&L,f)for(j=0;j<f.length;j++)K=d.g=f[j],L=en(K,w,!1,d)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],w=0;w<f.length;w++)Ut(f[w]);delete a.g[d],a.h--}}this.F=null},lt.prototype.K=function(a,d,f,w){return this.i.add(String(a),d,!1,f,w)},lt.prototype.L=function(a,d,f,w){return this.i.add(String(a),d,!0,f,w)};function en(a,d,f,w){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var L=!0,j=0;j<d.length;++j){var K=d[j];if(K&&!K.da&&K.capture==f){var be=K.listener,wt=K.ha||K.src;K.fa&&Ce(a.i,K),L=be.call(wt,w)!==!1&&L}}return L&&!w.defaultPrevented}function pn(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function ko(a){a.g=pn(()=>{a.g=null,a.i&&(a.i=!1,ko(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class fs extends fe{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:ko(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(a){fe.call(this),this.h=a,this.g={}}R(Si,fe);var Sn=[];function No(a){B(a.g,function(d,f){this.g.hasOwnProperty(f)&&Co(d)},a),a.g={}}Si.prototype.N=function(){Si.aa.N.call(this),No(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ps=l.JSON.stringify,wl=l.JSON.parse,ld=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ms(){}ms.prototype.h=null;function Ri(a){return a.h||(a.h=a.i())}function Do(){}var er={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ai(){Ie.call(this,"d")}R(Ai,Ie);function bo(){Ie.call(this,"c")}R(bo,Ie);var Fn={},El=null;function Ci(){return El=El||new lt}Fn.La="serverreachability";function Pi(a){Ie.call(this,Fn.La,a)}R(Pi,Ie);function Bn(a){const d=Ci();ut(d,new Pi(d))}Fn.STAT_EVENT="statevent";function Tl(a,d){Ie.call(this,Fn.STAT_EVENT,a),this.stat=d}R(Tl,Ie);function _t(a){const d=Ci();ut(d,new Tl(d,a))}Fn.Ma="timingevent";function k(a,d){Ie.call(this,Fn.Ma,a),this.size=d}R(k,Ie);function b(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function M(){this.g=!0}M.prototype.xa=function(){this.g=!1};function z(a,d,f,w,L,j){a.info(function(){if(a.g)if(j)for(var K="",be=j.split("&"),wt=0;wt<be.length;wt++){var Se=be[wt].split("=");if(1<Se.length){var Pt=Se[0];Se=Se[1];var kt=Pt.split("_");K=2<=kt.length&&kt[1]=="type"?K+(Pt+"="+Se+"&"):K+(Pt+"=redacted&")}}else K=null;else K=j;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+d+`
`+f+`
`+K})}function G(a,d,f,w,L,j,K){a.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+d+`
`+f+`
`+j+" "+K})}function te(a,d,f,w){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+Z(a,f)+(w?" "+w:"")})}function oe(a,d){a.info(function(){return"TIMEOUT: "+d})}M.prototype.info=function(){};function Z(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var w=f[a];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var j=L[0];if(j!="noop"&&j!="stop"&&j!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return ps(f)}catch{return d}}var J={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Y={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ne;function le(){}R(le,ms),le.prototype.g=function(){return new XMLHttpRequest},le.prototype.i=function(){return{}},ne=new le;function he(a,d,f,w){this.j=a,this.i=d,this.l=f,this.R=w||1,this.U=new Si(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nt}function nt(){this.i=null,this.g="",this.h=!1}var Pe={},ye={};function Le(a,d,f){a.L=1,a.v=Rl(ir(d)),a.m=f,a.P=!0,tr(a,null)}function tr(a,d){a.F=Date.now(),Ft(a),a.A=ir(a.v);var f=a.A,w=a.R;Array.isArray(w)||(w=[String(w)]),xm(f.i,"t",w),a.C=0,f=a.j.J,a.h=new nt,a.g=zm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new fs(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,w=a.ca;var L="readystatechange";Array.isArray(L)||(L&&(Sn[0]=L.toString()),L=Sn);for(var j=0;j<L.length;j++){var K=Un(f,L[j],w||d.handleEvent,!1,d.h||d);if(!K)break;d.g[K.key]=K}d=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Bn(),z(a.i,a.u,a.A,a.l,a.R,a.m)}he.prototype.ca=function(a){a=a.target;const d=this.M;d&&sr(a)==3?d.j():this.Y(a)},he.prototype.Y=function(a){try{if(a==this.g)e:{const kt=sr(this.g);var d=this.g.Ba();const _s=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||Nm(this.g)))){this.J||kt!=4||d==7||(d==8||0>=_s?Bn(3):Bn(2)),nr(this);var f=this.g.Z();this.X=f;t:if(br(this)){var w=Nm(this.g);a="";var L=w.length,j=sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),tn(this);var K="";break t}this.h.i=new l.TextDecoder}for(d=0;d<L;d++)this.h.h=!0,a+=this.h.i.decode(w[d],{stream:!(j&&d==L-1)});w.length=0,this.h.g+=a,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=f==200,G(this.i,this.u,this.A,this.l,this.R,kt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,wt=this.g;if((be=wt.g?wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(be)){var Se=be;break t}}Se=null}if(f=Se)te(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Or(this,f);else{this.o=!1,this.s=3,_t(12),mn(this),tn(this);break e}}if(this.P){f=!0;let An;for(;!this.J&&this.C<K.length;)if(An=Rn(this,K),An==ye){kt==4&&(this.s=4,_t(14),f=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(An==Pe){this.s=4,_t(15),te(this.i,this.l,K,"[Invalid Chunk]"),f=!1;break}else te(this.i,this.l,An,null),Or(this,An);if(br(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||K.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)te(this.i,this.l,K,"[Invalid Chunked Response]"),mn(this),tn(this);else if(0<K.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),hd(Pt),Pt.M=!0,_t(11))}}else te(this.i,this.l,K,null),Or(this,K);kt==4&&mn(this),this.o&&!this.J&&(kt==4?jm(this.j,this):(this.o=!1,Ft(this)))}else nI(this.g),f==400&&0<K.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),mn(this),tn(this)}}}catch{}finally{}};function br(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Rn(a,d){var f=a.C,w=d.indexOf(`
`,f);return w==-1?ye:(f=Number(d.substring(f,w)),isNaN(f)?Pe:(w+=1,w+f>d.length?ye:(d=d.slice(w,w+f),a.C=w+f,d)))}he.prototype.cancel=function(){this.J=!0,mn(this)};function Ft(a){a.S=Date.now()+a.I,gs(a,a.I)}function gs(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=b(g(a.ba,a),d)}function nr(a){a.B&&(l.clearTimeout(a.B),a.B=null)}he.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(oe(this.i,this.A),this.L!=2&&(Bn(),_t(17)),mn(this),this.s=2,tn(this)):gs(this,this.S-a)};function tn(a){a.j.G==0||a.J||jm(a.j,a)}function mn(a){nr(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,No(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Or(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||$e(f.h,a))){if(!a.K&&$e(f.h,a)&&f.G==3){try{var w=f.Da.g.parse(d)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Dl(f),kl(f);else break e;dd(f),_t(18)}}else f.za=L[1],0<f.za-f.T&&37500>L[2]&&f.F&&f.v==0&&!f.C&&(f.C=b(g(f.Za,f),6e3));if(1>=Lr(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Ni(f,11)}else if((a.K||f.g==a)&&Dl(f),!_(d))for(L=f.Da.g.parse(d),d=0;d<L.length;d++){let Se=L[d];if(f.T=Se[0],Se=Se[1],f.G==2)if(Se[0]=="c"){f.K=Se[1],f.ia=Se[2];const Pt=Se[3];Pt!=null&&(f.la=Pt,f.j.info("VER="+f.la));const kt=Se[4];kt!=null&&(f.Aa=kt,f.j.info("SVER="+f.Aa));const _s=Se[5];_s!=null&&typeof _s=="number"&&0<_s&&(w=1.5*_s,f.L=w,f.j.info("backChannelRequestTimeoutMs_="+w)),w=f;const An=a.g;if(An){const Ol=An.g?An.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ol){var j=w.h;j.g||Ol.indexOf("spdy")==-1&&Ol.indexOf("quic")==-1&&Ol.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(zn(j,j.h),j.h=null))}if(w.D){const fd=An.g?An.g.getResponseHeader("X-HTTP-Session-Id"):null;fd&&(w.ya=fd,je(w.I,w.D,fd))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),w=f;var K=a;if(w.qa=Bm(w,w.J?w.ia:null,w.W),K.K){Oo(w.h,K);var be=K,wt=w.L;wt&&(be.I=wt),be.B&&(nr(be),Ft(be)),w.g=K}else Vm(w);0<f.i.length&&Nl(f)}else Se[0]!="stop"&&Se[0]!="close"||Ni(f,7);else f.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?Ni(f,7):cd(f):Se[0]!="noop"&&f.l&&f.l.ta(Se),f.v=0)}}Bn(4)}catch{}}var we=class{constructor(a,d){this.g=a,this.map=d}};function Me(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rr(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Lr(a){return a.h?1:a.g?a.g.size:0}function $e(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function zn(a,d){a.g?a.g.add(d):a.h=d}function Oo(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Me.prototype.cancel=function(){if(this.i=Il(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Il(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return P(a.i)}function BT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,w=0;w<f;w++)d.push(a[w]);return d}d=[],f=0;for(w in a)d[f++]=a[w];return d}function zT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const w in a)d[f++]=w;return d}}}function vm(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=zT(a),w=BT(a),L=w.length,j=0;j<L;j++)d.call(void 0,w[j],f&&f[j],a)}var _m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $T(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var w=a[f].indexOf("="),L=null;if(0<=w){var j=a[f].substring(0,w);L=a[f].substring(w+1)}else j=a[f];d(j,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ki(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ki){this.h=a.h,xl(this,a.j),this.o=a.o,this.g=a.g,Sl(this,a.s),this.l=a.l;var d=a.i,f=new Mo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),wm(this,f),this.m=a.m}else a&&(d=String(a).match(_m))?(this.h=!1,xl(this,d[1]||"",!0),this.o=Lo(d[2]||""),this.g=Lo(d[3]||"",!0),Sl(this,d[4]),this.l=Lo(d[5]||"",!0),wm(this,d[6]||"",!0),this.m=Lo(d[7]||"")):(this.h=!1,this.i=new Mo(null,this.h))}ki.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Vo(d,Em,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Vo(d,Em,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Vo(f,f.charAt(0)=="/"?qT:HT,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Vo(f,GT)),a.join("")};function ir(a){return new ki(a)}function xl(a,d,f){a.j=f?Lo(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Sl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function wm(a,d,f){d instanceof Mo?(a.i=d,QT(a.i,a.h)):(f||(d=Vo(d,KT)),a.i=new Mo(d,a.h))}function je(a,d,f){a.i.set(d,f)}function Rl(a){return je(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Lo(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Vo(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,WT),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function WT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Em=/[#\/\?@]/g,HT=/[#\?:]/g,qT=/[#\?]/g,KT=/[#\?@]/g,GT=/#/g;function Mo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Vr(a){a.g||(a.g=new Map,a.h=0,a.i&&$T(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Mo.prototype,t.add=function(a,d){Vr(this),this.i=null,a=ys(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function Tm(a,d){Vr(a),d=ys(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Im(a,d){return Vr(a),d=ys(a,d),a.g.has(d)}t.forEach=function(a,d){Vr(this),this.g.forEach(function(f,w){f.forEach(function(L){a.call(d,L,w,this)},this)},this)},t.na=function(){Vr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let w=0;w<d.length;w++){const L=a[w];for(let j=0;j<L.length;j++)f.push(d[w])}return f},t.V=function(a){Vr(this);let d=[];if(typeof a=="string")Im(this,a)&&(d=d.concat(this.g.get(ys(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return Vr(this),this.i=null,a=ys(this,a),Im(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function xm(a,d,f){Tm(a,d),0<f.length&&(a.i=null,a.g.set(ys(a,d),P(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var w=d[f];const j=encodeURIComponent(String(w)),K=this.V(w);for(w=0;w<K.length;w++){var L=j;K[w]!==""&&(L+="="+encodeURIComponent(String(K[w]))),a.push(L)}}return this.i=a.join("&")};function ys(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function QT(a,d){d&&!a.j&&(Vr(a),a.i=null,a.g.forEach(function(f,w){var L=w.toLowerCase();w!=L&&(Tm(this,w),xm(this,L,f))},a)),a.j=d}function YT(a,d){const f=new M;if(l.Image){const w=new Image;w.onload=E(Mr,f,"TestLoadImage: loaded",!0,d,w),w.onerror=E(Mr,f,"TestLoadImage: error",!1,d,w),w.onabort=E(Mr,f,"TestLoadImage: abort",!1,d,w),w.ontimeout=E(Mr,f,"TestLoadImage: timeout",!1,d,w),l.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=a}else d(!1)}function XT(a,d){const f=new M,w=new AbortController,L=setTimeout(()=>{w.abort(),Mr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:w.signal}).then(j=>{clearTimeout(L),j.ok?Mr(f,"TestPingServer: ok",!0,d):Mr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(L),Mr(f,"TestPingServer: error",!1,d)})}function Mr(a,d,f,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(f)}catch{}}function JT(){this.g=new ld}function ZT(a,d,f){const w=f||"";try{vm(a,function(L,j){let K=L;c(L)&&(K=ps(L)),d.push(w+j+"="+encodeURIComponent(K))})}catch(L){throw d.push(w+"type="+encodeURIComponent("_badmap")),L}}function Al(a){this.l=a.Ub||null,this.j=a.eb||!1}R(Al,ms),Al.prototype.g=function(){return new Cl(this.l,this.j)},Al.prototype.i=function(a){return function(){return a}}({});function Cl(a,d){lt.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}R(Cl,lt),t=Cl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Uo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Uo(this)),this.g&&(this.readyState=3,Uo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?jo(this):Uo(this),this.readyState==3&&Sm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,jo(this))},t.Qa=function(a){this.g&&(this.response=a,jo(this))},t.ga=function(){this.g&&jo(this)};function jo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Uo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Uo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Rm(a){let d="";return B(a,function(f,w){d+=w,d+=":",d+=f,d+=`\r
`}),d}function ud(a,d,f){e:{for(w in f){var w=!1;break e}w=!0}w||(f=Rm(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):je(a,d,f))}function Ye(a){lt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}R(Ye,lt);var eI=/^https?$/i,tI=["POST","PUT"];t=Ye.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ne.g(),this.v=this.o?Ri(this.o):Ri(ne),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){Am(this,j);return}if(a=f||"",f=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)f.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const j of w.keys())f.set(j,w.get(j));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),L=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(tI,d,void 0))||w||L||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,K]of f)this.g.setRequestHeader(j,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{km(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){Am(this,j)}};function Am(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Cm(a),Pl(a)}function Cm(a){a.A||(a.A=!0,ut(a,"complete"),ut(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ut(this,"complete"),ut(this,"abort"),Pl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pl(this,!0)),Ye.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pm(this):this.bb())},t.bb=function(){Pm(this)};function Pm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||sr(a)!=4||a.Z()!=2)){if(a.u&&sr(a)==4)pn(a.Ea,0,a);else if(ut(a,"readystatechange"),sr(a)==4){a.h=!1;try{const K=a.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var w;if(w=K===0){var L=String(a.D).match(_m)[1]||null;!L&&l.self&&l.self.location&&(L=l.self.location.protocol.slice(0,-1)),w=!eI.test(L?L.toLowerCase():"")}f=w}if(f)ut(a,"complete"),ut(a,"success");else{a.m=6;try{var j=2<sr(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",Cm(a)}}finally{Pl(a)}}}}function Pl(a,d){if(a.g){km(a);const f=a.g,w=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ut(a,"ready");try{f.onreadystatechange=w}catch{}}}function km(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function sr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<sr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),wl(d)}};function Nm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function nI(a){const d={};a=(a.g&&2<=sr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<a.length;w++){if(_(a[w]))continue;var f=S(a[w]);const L=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=d[L]||[];d[L]=j,j.push(f)}y(d,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fo(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Dm(a){this.Aa=0,this.i=[],this.j=new M,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fo("baseRetryDelayMs",5e3,a),this.cb=Fo("retryDelaySeedMs",1e4,a),this.Wa=Fo("forwardChannelMaxRetries",2,a),this.wa=Fo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Me(a&&a.concurrentRequestLimit),this.Da=new JT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Dm.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,w){_t(0),this.W=a,this.H=d||{},f&&w!==void 0&&(this.H.OSID=f,this.H.OAID=w),this.F=this.X,this.I=Bm(this,null,this.W),Nl(this)};function cd(a){if(bm(a),a.G==3){var d=a.U++,f=ir(a.I);if(je(f,"SID",a.K),je(f,"RID",d),je(f,"TYPE","terminate"),Bo(a,f),d=new he(a,a.j,d),d.L=2,d.v=Rl(ir(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=zm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ft(d)}Fm(a)}function kl(a){a.g&&(hd(a),a.g.cancel(),a.g=null)}function bm(a){kl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Dl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Nl(a){if(!rr(a.h)&&!a.s){a.s=!0;var d=a.Ga;vt||se(),q||(vt(),q=!0),ie.add(d,a),a.B=0}}function rI(a,d){return Lr(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=b(g(a.Ga,a,d),Um(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const L=new he(this,this.j,a);let j=this.o;if(this.S&&(j?(j=v(j),I(j,this.S)):j=this.S),this.m!==null||this.O||(L.H=j,j=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var w=this.i[f];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(d+=w,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Lm(this,L,d),f=ir(this.I),je(f,"RID",a),je(f,"CVER",22),this.D&&je(f,"X-HTTP-Session-Id",this.D),Bo(this,f),j&&(this.O?d="headers="+encodeURIComponent(String(Rm(j)))+"&"+d:this.m&&ud(f,this.m,j)),zn(this.h,L),this.Ua&&je(f,"TYPE","init"),this.P?(je(f,"$req",d),je(f,"SID","null"),L.T=!0,Le(L,f,null)):Le(L,f,d),this.G=2}}else this.G==3&&(a?Om(this,a):this.i.length==0||rr(this.h)||Om(this))};function Om(a,d){var f;d?f=d.l:f=a.U++;const w=ir(a.I);je(w,"SID",a.K),je(w,"RID",f),je(w,"AID",a.T),Bo(a,w),a.m&&a.o&&ud(w,a.m,a.o),f=new he(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=Lm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),zn(a.h,f),Le(f,w,d)}function Bo(a,d){a.H&&B(a.H,function(f,w){je(d,w,f)}),a.l&&vm({},function(f,w){je(d,w,f)})}function Lm(a,d,f){f=Math.min(a.i.length,f);var w=a.l?g(a.l.Na,a.l,a):null;e:{var L=a.i;let j=-1;for(;;){const K=["count="+f];j==-1?0<f?(j=L[0].g,K.push("ofs="+j)):j=0:K.push("ofs="+j);let be=!0;for(let wt=0;wt<f;wt++){let Se=L[wt].g;const Pt=L[wt].map;if(Se-=j,0>Se)j=Math.max(0,L[wt].g-100),be=!1;else try{ZT(Pt,K,"req"+Se+"_")}catch{w&&w(Pt)}}if(be){w=K.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,w}function Vm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;vt||se(),q||(vt(),q=!0),ie.add(d,a),a.v=0}}function dd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=b(g(a.Fa,a),Um(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Mm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=b(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),kl(this),Mm(this))};function hd(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Mm(a){a.g=new he(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=ir(a.qa);je(d,"RID","rpc"),je(d,"SID",a.K),je(d,"AID",a.T),je(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&je(d,"TO",a.ja),je(d,"TYPE","xmlhttp"),Bo(a,d),a.m&&a.o&&ud(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=Rl(ir(d)),f.m=null,f.P=!0,tr(f,a)}t.Za=function(){this.C!=null&&(this.C=null,kl(this),dd(this),_t(19))};function Dl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function jm(a,d){var f=null;if(a.g==d){Dl(a),hd(a),a.g=null;var w=2}else if($e(a.h,d))f=d.D,Oo(a.h,d),w=1;else return;if(a.G!=0){if(d.o)if(w==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var L=a.B;w=Ci(),ut(w,new k(w,f)),Nl(a)}else Vm(a);else if(L=d.s,L==3||L==0&&0<d.X||!(w==1&&rI(a,d)||w==2&&dd(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),L){case 1:Ni(a,5);break;case 4:Ni(a,10);break;case 3:Ni(a,6);break;default:Ni(a,2)}}}function Um(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Ni(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),w=a.Xa;const L=!w;w=new ki(w||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||xl(w,"https"),Rl(w),L?YT(w.toString(),f):XT(w.toString(),f)}else _t(2);a.G=0,a.l&&a.l.sa(d),Fm(a),bm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Fm(a){if(a.G=0,a.ka=[],a.l){const d=Il(a.h);(d.length!=0||a.i.length!=0)&&(D(a.ka,d),D(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function Bm(a,d,f){var w=f instanceof ki?ir(f):new ki(f);if(w.g!="")d&&(w.g=d+"."+w.g),Sl(w,w.s);else{var L=l.location;w=L.protocol,d=d?d+"."+L.hostname:L.hostname,L=+L.port;var j=new ki(null);w&&xl(j,w),d&&(j.g=d),L&&Sl(j,L),f&&(j.l=f),w=j}return f=a.D,d=a.ya,f&&d&&je(w,f,d),je(w,"VER",a.la),Bo(a,w),w}function zm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ye(new Al({eb:f})):new Ye(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $m(){}t=$m.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bl(){}bl.prototype.g=function(a,d){return new nn(a,d)};function nn(a,d){lt.call(this),this.g=new Dm(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!_(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new vs(this)}R(nn,lt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){cd(this.g)},nn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=ps(a),a=f);d.i.push(new we(d.Ya++,a)),d.G==3&&Nl(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,cd(this.g),delete this.g,nn.aa.N.call(this)};function Wm(a){Ai.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}R(Wm,Ai);function Hm(){bo.call(this),this.status=1}R(Hm,bo);function vs(a){this.g=a}R(vs,$m),vs.prototype.ua=function(){ut(this.g,"a")},vs.prototype.ta=function(a){ut(this.g,new Wm(a))},vs.prototype.sa=function(a){ut(this.g,new Hm)},vs.prototype.ra=function(){ut(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,yE=function(){return new bl},gE=function(){return Ci()},mE=Fn,af={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},J.NO_ERROR=0,J.TIMEOUT=8,J.HTTP_ERROR=6,Tu=J,Y.COMPLETE="complete",pE=Y,Do.EventType=er,er.OPEN="a",er.CLOSE="b",er.ERROR="c",er.MESSAGE="d",lt.prototype.listen=lt.prototype.K,aa=Do,Ye.prototype.listenOnce=Ye.prototype.L,Ye.prototype.getLastError=Ye.prototype.Ka,Ye.prototype.getLastErrorCode=Ye.prototype.Ba,Ye.prototype.getStatus=Ye.prototype.Z,Ye.prototype.getResponseJson=Ye.prototype.Oa,Ye.prototype.getResponseText=Ye.prototype.oa,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Ha,fE=Ye}).apply(typeof eu<"u"?eu:typeof self<"u"?self:typeof window<"u"?window:{});const ev="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zi=new xp("@firebase/firestore");function Zo(){return Zi.logLevel}function ee(t,...e){if(Zi.logLevel<=ve.DEBUG){const n=e.map(Vp);Zi.debug(`Firestore (${Eo}): ${t}`,...n)}}function Sr(t,...e){if(Zi.logLevel<=ve.ERROR){const n=e.map(Vp);Zi.error(`Firestore (${Eo}): ${t}`,...n)}}function so(t,...e){if(Zi.logLevel<=ve.WARN){const n=e.map(Vp);Zi.warn(`Firestore (${Eo}): ${t}`,...n)}}function Vp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${Eo}) INTERNAL ASSERTION FAILED: `+t;throw Sr(e),new Error(e)}function De(t,e){t||ue()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends kr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ot.UNAUTHENTICATED))}shutdown(){}}class u1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c1{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new yr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new yr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string"),new vE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string"),new Ot(e)}}class d1{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class h1{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new d1(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p1{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){De(this.o===void 0);const r=s=>{s.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ee("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string"),this.R=n.token,new f1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=m1(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Re(t,e){return t<e?-1:t>e?1:0}function oo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ht.fromMillis(Date.now())}static fromDate(e){return ht.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ht(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new ht(0,0))}static max(){return new ce(new ht(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ka.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ka?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends Ka{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const g1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class It extends Ka{construct(e,n,r){return new It(e,n,r)}static isValidIdentifier(e){return g1.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),It.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new It(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new It(n)}static emptyPath(){return new It([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Fe.fromString(e))}static fromName(e){return new re(Fe.fromString(e).popFirst(5))}static empty(){return new re(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Fe(e.slice()))}}function y1(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new ht(n+1,0):new ht(n,r));return new mi(i,re.empty(),e)}function v1(t){return new mi(t.readTime,t.key,-1)}class mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mi(ce.min(),re.empty(),-1)}static max(){return new mi(ce.max(),re.empty(),-1)}}function _1(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class E1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==w1)throw t;ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,r)=>{n(e)})}static reject(e){return new W((n,r)=>{r(e)})}static waitFor(e){return new W((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=W.resolve(!1);for(const r of e)n=n.next(i=>i?W.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new W((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new W((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function T1(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mp.oe=-1;function Fc(t){return t==null}function uc(t){return t===0&&1/t==-1/0}function I1(t){return typeof t=="number"&&Number.isInteger(t)&&!uc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function as(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tu(this.root,e,this.comparator,!1)}getReverseIterator(){return new tu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tu(this.root,e,this.comparator,!0)}}class tu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=i??Tt.EMPTY,this.right=s??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Tt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Tt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new nv(this.data.getIterator())}getIteratorFrom(e){return new nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(It.comparator)}static empty(){return new an([])}unionWith(e){let n=new St(It.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return oo(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new EE("Invalid base64 string: "+s):s}}(e);return new At(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const x1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(De(!!t),typeof t=="string"){let e=0;const n=x1.exec(t);if(De(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ze(t.seconds),nanos:Ze(t.nanos)}}function Ze(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function es(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Up(t){const e=t.mapValue.fields.__previous_value__;return jp(e)?Up(e):e}function Ga(t){const e=gi(t.mapValue.fields.__local_write_time__.timestampValue);return new ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Qa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Qa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu={mapValue:{}};function ts(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jp(t)?4:A1(t)?9007199254740991:R1(t)?10:11:ue()}function Jn(t,e){if(t===e)return!0;const n=ts(t);if(n!==ts(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ga(t).isEqual(Ga(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=gi(i.timestampValue),l=gi(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return es(i.bytesValue).isEqual(es(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ze(i.geoPointValue.latitude)===Ze(s.geoPointValue.latitude)&&Ze(i.geoPointValue.longitude)===Ze(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ze(i.integerValue)===Ze(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ze(i.doubleValue),l=Ze(s.doubleValue);return o===l?uc(o)===uc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return oo(t.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(tv(o)!==tv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Jn(o[u],l[u])))return!1;return!0}(t,e);default:return ue()}}function Ya(t,e){return(t.values||[]).find(n=>Jn(n,e))!==void 0}function ao(t,e){if(t===e)return 0;const n=ts(t),r=ts(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ze(s.integerValue||s.doubleValue),u=Ze(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return rv(t.timestampValue,e.timestampValue);case 4:return rv(Ga(t),Ga(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(s,o){const l=es(s),u=es(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Re(l[c],u[c]);if(h!==0)return h}return Re(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Re(Ze(s.latitude),Ze(o.latitude));return l!==0?l:Re(Ze(s.longitude),Ze(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return iv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,h;const m=s.fields||{},g=o.fields||{},E=(l=m.value)===null||l===void 0?void 0:l.arrayValue,R=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=Re(((c=E==null?void 0:E.values)===null||c===void 0?void 0:c.length)||0,((h=R==null?void 0:R.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:iv(E,R)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===nu.mapValue&&o===nu.mapValue)return 0;if(s===nu.mapValue)return 1;if(o===nu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const g=Re(u[m],h[m]);if(g!==0)return g;const E=ao(l[u[m]],c[h[m]]);if(E!==0)return E}return Re(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ue()}}function rv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=gi(t),r=gi(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function iv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ao(n[i],r[i]);if(s)return s}return Re(n.length,r.length)}function lo(t){return lf(t)}function lf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return es(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=lf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${lf(n.fields[o])}`;return i+"}"}(t.mapValue):ue()}function sv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function uf(t){return!!t&&"integerValue"in t}function Fp(t){return!!t&&"arrayValue"in t}function ov(t){return!!t&&"nullValue"in t}function av(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Iu(t){return!!t&&"mapValue"in t}function R1(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ea(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return as(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ea(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ea(t.arrayValue.values[n]);return e}return Object.assign({},t)}function A1(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.value=e}static empty(){return new Gt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Iu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ea(n)}setAll(e){let n=It.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Ea(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Iu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Iu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){as(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Gt(Ea(this.value))}}function TE(t){const e=[];return as(t.fields,(n,r)=>{const i=new It([n]);if(Iu(r)){const s=TE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Vt(e,0,ce.min(),ce.min(),ce.min(),Gt.empty(),0)}static newFoundDocument(e,n,r,i){return new Vt(e,1,n,ce.min(),r,i,0)}static newNoDocument(e,n){return new Vt(e,2,n,ce.min(),ce.min(),Gt.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,ce.min(),ce.min(),Gt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this.position=e,this.inclusive=n}}function lv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=re.comparator(re.fromName(o.referenceValue),n.key):r=ao(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function uv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n="asc"){this.field=e,this.dir=n}}function C1(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{}class ot extends IE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new k1(e,n,r):n==="array-contains"?new b1(e,r):n==="in"?new O1(e,r):n==="not-in"?new L1(e,r):n==="array-contains-any"?new V1(e,r):new ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new N1(e,r):new D1(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ao(n,this.value)):n!==null&&ts(this.value)===ts(n)&&this.matchesComparison(ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mn extends IE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Mn(e,n)}matches(e){return xE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function xE(t){return t.op==="and"}function SE(t){return P1(t)&&xE(t)}function P1(t){for(const e of t.filters)if(e instanceof Mn)return!1;return!0}function cf(t){if(t instanceof ot)return t.field.canonicalString()+t.op.toString()+lo(t.value);if(SE(t))return t.filters.map(e=>cf(e)).join(",");{const e=t.filters.map(n=>cf(n)).join(",");return`${t.op}(${e})`}}function RE(t,e){return t instanceof ot?function(r,i){return i instanceof ot&&r.op===i.op&&r.field.isEqual(i.field)&&Jn(r.value,i.value)}(t,e):t instanceof Mn?function(r,i){return i instanceof Mn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&RE(o,i.filters[l]),!0):!1}(t,e):void ue()}function AE(t){return t instanceof ot?function(n){return`${n.field.canonicalString()} ${n.op} ${lo(n.value)}`}(t):t instanceof Mn?function(n){return n.op.toString()+" {"+n.getFilters().map(AE).join(" ,")+"}"}(t):"Filter"}class k1 extends ot{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class N1 extends ot{constructor(e,n){super(e,"in",n),this.keys=CE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class D1 extends ot{constructor(e,n){super(e,"not-in",n),this.keys=CE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function CE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class b1 extends ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fp(n)&&Ya(n.arrayValue,this.value)}}class O1 extends ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ya(this.value.arrayValue,n)}}class L1 extends ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ya(this.value.arrayValue,n)}}class V1 extends ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ya(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function cv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new M1(t,e,n,r,i,s,o)}function Bp(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>cf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Fc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lo(r)).join(",")),e.ue=n}return e.ue}function zp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!C1(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uv(t.startAt,e.startAt)&&uv(t.endAt,e.endAt)}function df(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function j1(t,e,n,r,i,s,o,l){return new To(t,e,n,r,i,s,o,l)}function $p(t){return new To(t)}function dv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function PE(t){return t.collectionGroup!==null}function Ta(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new St(It.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Xa(s,r))}),n.has(It.keyField().canonicalString())||e.ce.push(new Xa(It.keyField(),r))}return e.ce}function Yn(t){const e=de(t);return e.le||(e.le=U1(e,Ta(t))),e.le}function U1(t,e){if(t.limitType==="F")return cv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Xa(i.field,s)});const n=t.endAt?new cc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new cc(t.startAt.position,t.startAt.inclusive):null;return cv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hf(t,e){const n=t.filters.concat([e]);return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ff(t,e,n){return new To(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bc(t,e){return zp(Yn(t),Yn(e))&&t.limitType===e.limitType}function kE(t){return`${Bp(Yn(t))}|lt:${t.limitType}`}function Ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>AE(i)).join(", ")}]`),Fc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>lo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>lo(i)).join(",")),`Target(${r})`}(Yn(t))}; limitType=${t.limitType})`}function zc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):re.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Ta(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=lv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,Ta(r),i)||r.endAt&&!function(o,l,u){const c=lv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,Ta(r),i))}(t,e)}function F1(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NE(t){return(e,n)=>{let r=!1;for(const i of Ta(t)){const s=B1(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function B1(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?ao(u,c):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){as(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return wE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=new Qe(re.comparator);function Rr(){return z1}const DE=new Qe(re.comparator);function la(...t){let e=DE;for(const n of t)e=e.insert(n.key,n);return e}function bE(t){let e=DE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bi(){return Ia()}function OE(){return Ia()}function Ia(){return new Io(t=>t.toString(),(t,e)=>t.isEqual(e))}const $1=new Qe(re.comparator),W1=new St(re.comparator);function ge(...t){let e=W1;for(const n of t)e=e.add(n);return e}const H1=new St(Re);function q1(){return H1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uc(e)?"-0":e}}function LE(t){return{integerValue:""+t}}function K1(t,e){return I1(e)?LE(e):Wp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(){this._=void 0}}function G1(t,e,n){return t instanceof Ja?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jp(s)&&(s=Up(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Za?ME(t,e):t instanceof el?jE(t,e):function(i,s){const o=VE(i,s),l=hv(o)+hv(i.Pe);return uf(o)&&uf(i.Pe)?LE(l):Wp(i.serializer,l)}(t,e)}function Q1(t,e,n){return t instanceof Za?ME(t,e):t instanceof el?jE(t,e):n}function VE(t,e){return t instanceof dc?function(r){return uf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ja extends $c{}class Za extends $c{constructor(e){super(),this.elements=e}}function ME(t,e){const n=UE(e);for(const r of t.elements)n.some(i=>Jn(i,r))||n.push(r);return{arrayValue:{values:n}}}class el extends $c{constructor(e){super(),this.elements=e}}function jE(t,e){let n=UE(e);for(const r of t.elements)n=n.filter(i=>!Jn(i,r));return{arrayValue:{values:n}}}class dc extends $c{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hv(t){return Ze(t.integerValue||t.doubleValue)}function UE(t){return Fp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,n){this.field=e,this.transform=n}}function X1(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Za&&i instanceof Za||r instanceof el&&i instanceof el?oo(r.elements,i.elements,Jn):r instanceof dc&&i instanceof dc?Jn(r.Pe,i.Pe):r instanceof Ja&&i instanceof Ja}(t.transform,e.transform)}class J1{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wc{}function FE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Hp(t.key,wn.none()):new pl(t.key,t.data,wn.none());{const n=t.data,r=Gt.empty();let i=new St(It.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ii(t.key,r,new an(i.toArray()),wn.none())}}function Z1(t,e,n){t instanceof pl?function(i,s,o){const l=i.value.clone(),u=pv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ii?function(i,s,o){if(!xu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=pv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(BE(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function xa(t,e,n,r){return t instanceof pl?function(s,o,l,u){if(!xu(s.precondition,o))return l;const c=s.value.clone(),h=mv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ii?function(s,o,l,u){if(!xu(s.precondition,o))return l;const c=mv(s.fieldTransforms,u,o),h=o.data;return h.setAll(BE(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return xu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function eN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=VE(r.transform,i||null);s!=null&&(n===null&&(n=Gt.empty()),n.set(r.field,s))}return n||null}function fv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&oo(r,i,(s,o)=>X1(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pl extends Wc{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ii extends Wc{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function BE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function pv(t,e,n){const r=new Map;De(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,Q1(o,l,n[i]))}return r}function mv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,G1(s,o,e))}return r}class Hp extends Wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tN extends Wc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Z1(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=xa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=FE(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&oo(this.mutations,e.mutations,(n,r)=>fv(n,r))&&oo(this.baseMutations,e.baseMutations,(n,r)=>fv(n,r))}}class qp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){De(e.mutations.length===r.length);let i=function(){return $1}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new qp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt,Ee;function sN(t){switch(t){default:return ue();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function zE(t){if(t===void 0)return Sr("GRPC error has no .code"),F.UNKNOWN;switch(t){case rt.OK:return F.OK;case rt.CANCELLED:return F.CANCELLED;case rt.UNKNOWN:return F.UNKNOWN;case rt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case rt.INTERNAL:return F.INTERNAL;case rt.UNAVAILABLE:return F.UNAVAILABLE;case rt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case rt.NOT_FOUND:return F.NOT_FOUND;case rt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case rt.ABORTED:return F.ABORTED;case rt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case rt.DATA_LOSS:return F.DATA_LOSS;default:return ue()}}(Ee=rt||(rt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Wi([4294967295,4294967295],0);function gv(t){const e=oN().encode(t),n=new hE;return n.update(e),new Uint8Array(n.digest())}function yv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wi([n,r],0),new Wi([i,s],0)]}class Kp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ua(`Invalid padding: ${n}`);if(r<0)throw new ua(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ua(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ua(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Wi.fromNumber(r)));return i.compare(aN)===1&&(i=new Wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gv(e),[r,i]=yv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Kp(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=gv(e),[r,i]=yv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ua extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ml.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hc(ce.min(),i,new Qe(Re),Rr(),ge())}}class ml{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ml(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class $E{constructor(e,n){this.targetId=e,this.me=n}}class WE{constructor(e,n,r=At.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class vv{constructor(){this.fe=0,this.ge=wv(),this.pe=At.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new ml(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=wv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,De(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lN{constructor(e){this.Le=e,this.Be=new Map,this.ke=Rr(),this.qe=_v(),this.Qe=new Qe(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(df(s))if(r===0){const o=new re(s.path);this.Ue(n,o,Vt.newNoDocument(o,ce.min()))}else De(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=es(r).toUint8Array()}catch(u){if(u instanceof EE)return so("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Kp(o,i,s)}catch(u){return so(u instanceof ua?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&df(l.target)){const u=new re(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Vt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ge();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Hc(e,n,this.Qe,this.ke,r);return this.ke=Rr(),this.qe=_v(),this.Qe=new Qe(Re),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ee("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _v(){return new Qe(re.comparator)}function wv(){return new Qe(re.comparator)}const uN={asc:"ASCENDING",desc:"DESCENDING"},cN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dN={and:"AND",or:"OR"};class hN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pf(t,e){return t.useProto3Json||Fc(e)?e:{value:e}}function hc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fN(t,e){return hc(t,e.toTimestamp())}function Xn(t){return De(!!t),ce.fromTimestamp(function(n){const r=gi(n);return new ht(r.seconds,r.nanos)}(t))}function Gp(t,e){return mf(t,e).canonicalString()}function mf(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qE(t){const e=Fe.fromString(t);return De(XE(e)),e}function gf(t,e){return Gp(t.databaseId,e.path)}function Yd(t,e){const n=qE(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(GE(n))}function KE(t,e){return Gp(t.databaseId,e)}function pN(t){const e=qE(t);return e.length===4?Fe.emptyPath():GE(e)}function yf(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GE(t){return De(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ev(t,e,n){return{name:gf(t,e),fields:n.value.mapValue.fields}}function mN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(De(h===void 0||typeof h=="string"),At.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array),At.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?F.UNKNOWN:zE(c.code);return new Q(h,c.message||"")}(o);n=new WE(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yd(t,r.document.name),s=Xn(r.document.updateTime),o=r.document.createTime?Xn(r.document.createTime):ce.min(),l=new Gt({mapValue:{fields:r.document.fields}}),u=Vt.newFoundDocument(i,s,o,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Su(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yd(t,r.document),s=r.readTime?Xn(r.readTime):ce.min(),o=Vt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Su([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yd(t,r.document),s=r.removedTargetIds||[];n=new Su([],s,i,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new iN(i,s),l=r.targetId;n=new $E(l,o)}}return n}function gN(t,e){let n;if(e instanceof pl)n={update:Ev(t,e.key,e.value)};else if(e instanceof Hp)n={delete:gf(t,e.key)};else if(e instanceof Ii)n={update:Ev(t,e.key,e.data),updateMask:SN(e.fieldMask)};else{if(!(e instanceof tN))return ue();n={verify:gf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Ja)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Za)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof el)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof dc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:fN(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue()}(t,e.precondition)),n}function yN(t,e){return t&&t.length>0?(De(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Xn(i.updateTime):Xn(s);return o.isEqual(ce.min())&&(o=Xn(s)),new J1(o,i.transformResults||[])}(n,e))):[]}function vN(t,e){return{documents:[KE(t,e.path)]}}function _N(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KE(t,i);const s=function(c){if(c.length!==0)return YE(Mn.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:Is(g.field),direction:TN(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=pf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function wN(t){let e=pN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){De(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(m){const g=QE(m);return g instanceof Mn&&SE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(R){return new Xa(xs(R.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Fc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,E=m.values||[];return new cc(E,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,E=m.values||[];return new cc(E,g)}(n.endAt)),j1(e,i,o,s,l,"F",u,c)}function EN(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xs(n.unaryFilter.field);return ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xs(n.unaryFilter.field);return ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xs(n.unaryFilter.field);return ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=xs(n.unaryFilter.field);return ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return ot.create(xs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mn.create(n.compositeFilter.filters.map(r=>QE(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function TN(t){return uN[t]}function IN(t){return cN[t]}function xN(t){return dN[t]}function Is(t){return{fieldPath:t.canonicalString()}}function xs(t){return It.fromServerFormat(t.fieldPath)}function YE(t){return t instanceof ot?function(n){if(n.op==="=="){if(av(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NAN"}};if(ov(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(av(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NAN"}};if(ov(n.value))return{unaryFilter:{field:Is(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Is(n.field),op:IN(n.op),value:n.value}}}(t):t instanceof Mn?function(n){const r=n.getFilters().map(i=>YE(i));return r.length===1?r[0]:{compositeFilter:{op:xN(n.op),filters:r}}}(t):ue()}function SN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function XE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,n,r,i,s=ce.min(),o=ce.min(),l=At.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.ct=e}}function AN(t){const e=wN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ff(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.un=new PN}addToCollectionParentIndex(e,n){return this.un.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(mi.min())}updateCollectionGroup(e,n,r){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class PN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new St(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new uo(0)}static kn(){return new uo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.changes=new Io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?W.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&xa(r.mutation,i,an.empty(),ht.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const i=Bi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=la();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Rr();const o=Ia(),l=function(){return Ia()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Ii)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),xa(h.mutation,c,h.mutation.getFieldMask(),ht.now())):o.set(c.key,an.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var m;return l.set(c,new NN(h,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ia();let i=new Qe((o,l)=>o-l),s=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||an.empty();h=l.applyToLocalView(c,h),r.set(u,h);const m=(i.get(l.batchId)||ge()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,m=OE();h.forEach(g=>{if(!s.has(g)){const E=FE(n.get(g),r.get(g));E!==null&&m.set(g,E),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return W.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):PE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):W.resolve(Bi());let l=-1,u=s;return o.next(c=>W.forEach(c,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,ge())).next(h=>({batchId:l,changes:bE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=la();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=la();return this.indexManager.getCollectionParents(e,s).next(l=>W.forEach(l,u=>{const c=function(m,g){return new To(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Vt.newInvalidDocument(h)))});let l=la();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&xa(h.mutation,c,an.empty(),ht.now()),zc(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return W.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Xn(i.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:AN(i.bundledQuery),readTime:Xn(i.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.overlays=new Qe(re.comparator),this.Ir=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bi();return W.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),W.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),W.resolve()}getOverlaysForCollection(e,n,r){const i=Bi(),s=n.length+1,o=new re(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return W.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Qe((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Bi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Bi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return W.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rN(n,r));let s=this.Ir.get(n);s===void 0&&(s=ge(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.sessionToken=At.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.Tr=new St(pt.Er),this.dr=new St(pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new pt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new pt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new re(new Fe([])),r=new pt(n,e),i=new pt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new re(new Fe([])),r=new pt(n,e),i=new pt(n,e+1);let s=ge();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new pt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class pt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return re.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(pt.Er)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nN(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new pt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return W.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new pt(n,0),i=new pt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),W.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Re);return n.forEach(i=>{const s=new pt(i,0),o=new pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),W.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;re.isDocumentKey(s)||(s=s.child(""));const o=new pt(new re(s),0);let l=new St(Re);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),W.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){De(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return W.forEach(n.mutations,i=>{const s=new pt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new pt(n,0),i=this.br.firstAfterOrEqual(r);return W.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.Mr=e,this.docs=function(){return new Qe(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return W.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=Rr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vt.newInvalidDocument(i))}),W.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Rr();const o=n.path,l=new re(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||_1(v1(h),r)<=0||(i.has(h.key)||zc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return W.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ue()}Or(e,n){return W.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jN(this)}getSize(e){return W.resolve(this.size)}}class jN extends kN{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),W.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){this.persistence=e,this.Nr=new Io(n=>Bp(n),zp),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Qp,this.targetCount=0,this.kr=uo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),W.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new uo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Kn(n),W.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),W.waitFor(s).next(()=>i)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return W.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),W.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),W.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return W.resolve(r)}containsKey(e,n){return W.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Mp(0),this.Kr=!1,this.Kr=!0,this.$r=new LN,this.referenceDelegate=e(this),this.Ur=new UN(this),this.indexManager=new CN,this.remoteDocumentCache=function(i){return new MN(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new RN(n),this.Gr=new bN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ON,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new VN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ee("MemoryPersistence","Starting transaction:",e);const i=new BN(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return W.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BN extends E1{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Jr=new Qp,this.Yr=null}static Zr(e){return new Yp(e)}get Xr(){if(this.Yr)return this.Yr;throw ue()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),W.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),W.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.Xr,r=>{const i=re.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return W.or([()=>W.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ge(),i=ge();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Xp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bA()?8:T1(jt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zN;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Zo()<=ve.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),W.resolve()):(Zo()<=ve.DEBUG&&ee("QueryEngine","Query:",Ts(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zo()<=ve.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(n))):W.resolve())}Yi(e,n){if(dv(n))return W.resolve(null);let r=Yn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ff(n,null,"F"),r=Yn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ge(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,ff(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return dv(n)||i.isEqual(ce.min())?W.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?W.resolve(null):(Zo()<=ve.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ts(n)),this.rs(e,o,n,y1(i,-1)).next(l=>l))})}ts(e,n){let r=new St(NE(e));return n.forEach((i,s)=>{zc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Zo()<=ve.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Ts(n)),this.Ji.getDocumentsMatchingQuery(e,n,mi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Qe(Re),this._s=new Io(s=>Bp(s),zp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function HN(t,e,n,r){return new WN(t,e,n,r)}async function JE(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ge();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function qN(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const m=c.batch,g=m.keys();let E=W.resolve();return g.forEach(R=>{E=E.next(()=>h.getEntry(u,R)).next(P=>{const D=c.docVersions.get(R);De(D!==null),P.version.compareTo(D)<0&&(m.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),h.addEntry(P)))})}),E.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ge();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function ZE(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function KN(t,e){const n=de(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,m)=>{const g=i.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,m)));let E=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(At.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(h.resumeToken,r)),i=i.insert(m,E),function(P,D,x){return P.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,E,h)&&l.push(n.Ur.updateTargetData(s,E))});let u=Rr(),c=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(GN(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return W.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function GN(t,e,n){let r=ge(),i=ge();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Rr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):ee("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function QN(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YN(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,W.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Jr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function vf(t,e,n){const r=de(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!fl(o))throw o;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Tv(t,e,n){const r=de(t);let i=ce.min(),s=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const m=de(u),g=m._s.get(h);return g!==void 0?W.resolve(m.os.get(g)):m.Ur.getTargetData(c,h)}(r,o,Yn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ce.min(),n?s:ge())).next(l=>(XN(r,F1(e),l),{documents:l,Ts:s})))}function XN(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Iv{constructor(){this.activeTargetIds=q1()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JN{constructor(){this.so=new Iv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Iv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ru=null;function Xd(){return ru===null?ru=function(){return 268435456+Math.round(2147483648*Math.random())}():ru++,"0x"+ru.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bt="WebChannelConnection";class nD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=Xd(),u=this.xo(n,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(ee("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw so("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Eo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=eD[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Xd();return new Promise((o,l)=>{const u=new fE;u.setWithCredentials(!0),u.listenOnce(pE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Tu.NO_ERROR:const h=u.getResponseJson();ee(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Tu.TIMEOUT:ee(bt,`RPC '${e}' ${s} timed out`),l(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:const m=u.getStatus();if(ee(bt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const E=g==null?void 0:g.error;if(E&&E.status&&E.message){const R=function(D){const x=D.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(x)>=0?x:F.UNKNOWN}(E.status);l(new Q(R,E.message))}else l(new Q(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{ee(bt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ee(bt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Xd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yE(),l=gE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");ee(bt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);let g=!1,E=!1;const R=new tD({Io:D=>{E?ee(bt,`Not sending because RPC '${e}' stream ${i} is closed:`,D):(g||(ee(bt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),ee(bt,`RPC '${e}' stream ${i} sending:`,D),m.send(D))},To:()=>m.close()}),P=(D,x,_)=>{D.listen(x,A=>{try{_(A)}catch(V){setTimeout(()=>{throw V},0)}})};return P(m,aa.EventType.OPEN,()=>{E||(ee(bt,`RPC '${e}' stream ${i} transport opened.`),R.yo())}),P(m,aa.EventType.CLOSE,()=>{E||(E=!0,ee(bt,`RPC '${e}' stream ${i} transport closed`),R.So())}),P(m,aa.EventType.ERROR,D=>{E||(E=!0,so(bt,`RPC '${e}' stream ${i} transport errored:`,D),R.So(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),P(m,aa.EventType.MESSAGE,D=>{var x;if(!E){const _=D.data[0];De(!!_);const A=_,V=A.error||((x=A[0])===null||x===void 0?void 0:x.error);if(V){ee(bt,`RPC '${e}' stream ${i} received error:`,V);const U=V.status;let B=function(T){const I=rt[T];if(I!==void 0)return zE(I)}(U),y=V.message;B===void 0&&(B=F.INTERNAL,y="Unknown error status: "+U+" with message "+V.message),E=!0,R.So(new Q(B,y)),m.close()}else ee(bt,`RPC '${e}' stream ${i} received:`,_),R.bo(_)}}),P(l,mE.STAT_EVENT,D=>{D.stat===af.PROXY?ee(bt,`RPC '${e}' stream ${i} detected buffering proxy`):D.stat===af.NOPROXY&&ee(bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{R.wo()},0),R}}function Jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(t){return new hN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new eT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Sr(n.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rD extends tT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=mN(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?Xn(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=yf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=df(u)?{documents:vN(s,u)}:{query:_N(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=HE(s,o.resumeToken);const c=pf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ce.min())>0){l.readTime=hc(s,o.snapshotVersion.toTimestamp());const c=pf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=EN(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=yf(this.serializer),n.removeTarget=e,this.a_(n)}}class iD extends tT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return De(!!e.streamToken),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){De(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=yN(e.writeResults,e.commitTime),r=Xn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=yf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gN(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,mf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(F.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,mf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class oD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Sr(n),this.D_=!1):ee("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{ls(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=de(u);c.L_.add(4),await gl(c),c.q_.set("Unknown"),c.L_.delete(4),await Kc(c)}(this))})}),this.q_=new oD(r,i)}}async function Kc(t){if(ls(t))for(const e of t.B_)await e(!0)}async function gl(t){for(const e of t.B_)await e(!1)}function nT(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),tm(n)?em(n):xo(n).r_()&&Zp(n,e))}function Jp(t,e){const n=de(t),r=xo(n);n.N_.delete(e),r.r_()&&rT(n,e),n.N_.size===0&&(r.r_()?r.o_():ls(n)&&n.q_.set("Unknown"))}function Zp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}xo(t).A_(e)}function rT(t,e){t.Q_.xe(e),xo(t).R_(e)}function em(t){t.Q_=new lN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),xo(t).start(),t.q_.v_()}function tm(t){return ls(t)&&!xo(t).n_()&&t.N_.size>0}function ls(t){return de(t).L_.size===0}function iT(t){t.Q_=void 0}async function lD(t){t.q_.set("Online")}async function uD(t){t.N_.forEach((e,n)=>{Zp(t,e)})}async function cD(t,e){iT(t),tm(t)?(t.q_.M_(e),em(t)):t.q_.set("Unknown")}async function dD(t,e,n){if(t.q_.set("Online"),e instanceof WE&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fc(t,r)}else if(e instanceof Su?t.Q_.Ke(e):e instanceof $E?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await ZE(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(At.EMPTY_BYTE_STRING,h.snapshotVersion)),rT(s,u);const m=new Jr(h.target,u,c,h.sequenceNumber);Zp(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),await fc(t,r)}}async function fc(t,e,n){if(!fl(e))throw e;t.L_.add(1),await gl(t),t.q_.set("Offline"),n||(n=()=>ZE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ee("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Kc(t)})}function sT(t,e){return e().catch(n=>fc(t,n,e))}async function Gc(t){const e=de(t),n=yi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hD(e);)try{const i=await QN(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,fD(e,i)}catch(i){await fc(e,i)}oT(e)&&aT(e)}function hD(t){return ls(t)&&t.O_.length<10}function fD(t,e){t.O_.push(e);const n=yi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function oT(t){return ls(t)&&!yi(t).n_()&&t.O_.length>0}function aT(t){yi(t).start()}async function pD(t){yi(t).p_()}async function mD(t){const e=yi(t);for(const n of t.O_)e.m_(n.mutations)}async function gD(t,e,n){const r=t.O_.shift(),i=qp.from(r,e,n);await sT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Gc(t)}async function yD(t,e){e&&yi(t).V_&&await async function(r,i){if(function(o){return sN(o)&&o!==F.ABORTED}(i.code)){const s=r.O_.shift();yi(r).s_(),await sT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Gc(r)}}(t,e),oT(t)&&aT(t)}async function Sv(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");const r=ls(n);n.L_.add(3),await gl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Kc(n)}async function vD(t,e){const n=de(t);e?(n.L_.delete(2),await Kc(n)):e||(n.L_.add(2),await gl(n),n.q_.set("Unknown"))}function xo(t){return t.K_||(t.K_=function(n,r,i){const s=de(n);return s.w_(),new rD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:lD.bind(null,t),Ro:uD.bind(null,t),mo:cD.bind(null,t),d_:dD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),tm(t)?em(t):t.q_.set("Unknown")):(await t.K_.stop(),iT(t))})),t.K_}function yi(t){return t.U_||(t.U_=function(n,r,i){const s=de(n);return s.w_(),new iD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pD.bind(null,t),mo:yD.bind(null,t),f_:mD.bind(null,t),g_:gD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gc(t)):(await t.U_.stop(),t.O_.length>0&&(ee("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new nm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rm(t,e){if(Sr("AsyncQueue",`${e}: ${t}`),fl(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=la(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new Ks(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ks)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ks;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this.W_=new Qe(re.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ue():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class co{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new co(e,n,Ks.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wD{constructor(){this.queries=Av(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=de(n),s=i.queries;i.queries=Av(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function Av(){return new Io(t=>kE(t),Bc)}async function lT(t,e){const n=de(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _D,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=rm(o,`Initialization of query '${Ts(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&im(n)}async function uT(t,e){const n=de(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ED(t,e){const n=de(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&im(n)}function TD(t,e,n){const r=de(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function im(t){t.Y_.forEach(e=>{e.next()})}var _f,Cv;(Cv=_f||(_f={})).ea="default",Cv.Cache="cache";class cT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new co(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=co.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==_f.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.key=e}}class hT{constructor(e){this.key=e}}class ID{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=NE(e),this.Ra=new Ks(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Rv,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const g=i.get(h),E=zc(this.query,m)?m:null,R=!!g&&this.mutatedKeys.has(g.key),P=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let D=!1;g&&E?g.data.isEqual(E.data)?R!==P&&(r.track({type:3,doc:E}),D=!0):this.ga(g,E)||(r.track({type:2,doc:E}),D=!0,(u&&this.Aa(E,u)>0||c&&this.Aa(E,c)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),D=!0):g&&!E&&(r.track({type:1,doc:g}),D=!0,(u||c)&&(l=!0)),D&&(E?(o=o.add(E),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(E,R){const P=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return P(E)-P(R)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new co(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Rv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new hT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new dT(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return co.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class xD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class SD{constructor(e){this.key=e,this.va=!1}}class RD{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Io(l=>kE(l),Bc),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(re.comparator),this.Na=new Map,this.La=new Qp,this.Ba={},this.ka=new Map,this.qa=uo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AD(t,e,n=!0){const r=vT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await fT(r,e,n,!0),i}async function CD(t,e){const n=vT(t);await fT(n,e,!0,!1)}async function fT(t,e,n,r){const i=await YN(t.localStore,Yn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await PD(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&nT(t.remoteStore,i),l}async function PD(t,e,n,r,i){t.Ka=(m,g,E)=>async function(P,D,x,_){let A=D.view.ma(x);A.ns&&(A=await Tv(P.localStore,D.query,!1).then(({documents:y})=>D.view.ma(y,A)));const V=_&&_.targetChanges.get(D.targetId),U=_&&_.targetMismatches.get(D.targetId)!=null,B=D.view.applyChanges(A,P.isPrimaryClient,V,U);return kv(P,D.targetId,B.wa),B.snapshot}(t,m,g,E);const s=await Tv(t.localStore,e,!0),o=new ID(e,s.Ts),l=o.ma(s.documents),u=ml.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);kv(t,n,c.wa);const h=new xD(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function kD(t,e,n){const r=de(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Bc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await vf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Jp(r.remoteStore,i.targetId),wf(r,i.targetId)}).catch(hl)):(wf(r,i.targetId),await vf(r.localStore,i.targetId,!0))}async function ND(t,e){const n=de(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Jp(n.remoteStore,r.targetId))}async function DD(t,e,n){const r=UD(t);try{const i=await function(o,l){const u=de(o),c=ht.now(),h=l.reduce((E,R)=>E.add(R.key),ge());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",E=>{let R=Rr(),P=ge();return u.cs.getEntries(E,h).next(D=>{R=D,R.forEach((x,_)=>{_.isValidDocument()||(P=P.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(E,R)).next(D=>{m=D;const x=[];for(const _ of l){const A=eN(_,m.get(_.key).overlayedDocument);A!=null&&x.push(new Ii(_.key,A,TE(A.value.mapValue),wn.exists(!0)))}return u.mutationQueue.addMutationBatch(E,c,x,l)}).next(D=>{g=D;const x=D.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(E,D.batchId,x)})}).then(()=>({batchId:g.batchId,changes:bE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Qe(Re)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await yl(r,i.changes),await Gc(r.remoteStore)}catch(i){const s=rm(i,"Failed to persist write");n.reject(s)}}async function pT(t,e){const n=de(t);try{const r=await KN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(De(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?De(o.va):i.removedDocuments.size>0&&(De(o.va),o.va=!1))}),await yl(n,r,e)}catch(r){await hl(r)}}function Pv(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=de(o);u.onlineState=l;let c=!1;u.queries.forEach((h,m)=>{for(const g of m.j_)g.Z_(l)&&(c=!0)}),c&&im(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bD(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Qe(re.comparator);o=o.insert(s,Vt.newNoDocument(s,ce.min()));const l=ge().add(s),u=new Hc(ce.min(),new Map,new Qe(Re),o,l);await pT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),sm(r)}else await vf(r.localStore,e,!1).then(()=>wf(r,e,n)).catch(hl)}async function OD(t,e){const n=de(t),r=e.batch.batchId;try{const i=await qN(n.localStore,e);gT(n,r,null),mT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await yl(n,i)}catch(i){await hl(i)}}async function LD(t,e,n){const r=de(t);try{const i=await function(o,l){const u=de(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(De(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);gT(r,e,n),mT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await yl(r,i)}catch(i){await hl(i)}}function mT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gT(t,e,n){const r=de(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function wf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||yT(t,r)})}function yT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Jp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),sm(t))}function kv(t,e,n){for(const r of n)r instanceof dT?(t.La.addReference(r.key,e),VD(t,r)):r instanceof hT?(ee("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||yT(t,r.key)):ue()}function VD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ee("SyncEngine","New document in limbo: "+n),t.xa.add(r),sm(t))}function sm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new re(Fe.fromString(e)),r=t.qa.next();t.Na.set(r,new SD(n)),t.Oa=t.Oa.insert(n,r),nT(t.remoteStore,new Jr(Yn($p(n.path)),r,"TargetPurposeLimboResolution",Mp.oe))}}async function yl(t,e,n){const r=de(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=Xp.Wi(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=de(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>W.forEach(c,g=>W.forEach(g.$i,E=>h.persistence.referenceDelegate.addReference(m,g.targetId,E)).next(()=>W.forEach(g.Ui,E=>h.persistence.referenceDelegate.removeReference(m,g.targetId,E)))))}catch(m){if(!fl(m))throw m;ee("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const E=h.os.get(g),R=E.snapshotVersion,P=E.withLastLimboFreeSnapshotVersion(R);h.os=h.os.insert(g,P)}}}(r.localStore,s))}async function MD(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());const r=await JE(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Q(F.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await yl(n,r.hs)}}function jD(t,e){const n=de(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let i=ge();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function vT(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=pT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bD.bind(null,e),e.Ca.d_=ED.bind(null,e.eventManager),e.Ca.$a=TD.bind(null,e.eventManager),e}function UD(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LD.bind(null,e),e}class pc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=qc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return HN(this.persistence,new $N,e.initialUser,this.serializer)}Ga(e){return new FN(Yp.Zr,this.serializer)}Wa(e){return new JN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pc.provider={build:()=>new pc};class Ef{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=MD.bind(null,this.syncEngine),await vD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wD}()}createDatastore(e){const n=qc(e.databaseInfo.databaseId),r=function(s){return new nD(s)}(e.databaseInfo);return function(s,o,l,u){return new sD(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new aD(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Pv(this.syncEngine,n,0),function(){return xv.D()?new xv:new ZN}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,h){const m=new RD(i,s,o,l,u,c);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=de(i);ee("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await gl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ef.provider={build:()=>new Ef};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ot.UNAUTHENTICATED,this.clientId=_E.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{ee("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ee("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Zd(t,e){t.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await JE(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Nv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BD(t);ee("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Sv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Sv(e.remoteStore,i)),t._onlineComponents=e}async function BD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;so("Error using user provided cache. Falling back to memory cache: "+n),await Zd(t,new pc)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),await Zd(t,new pc);return t._offlineComponents}async function wT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),await Nv(t,t._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),await Nv(t,new Ef))),t._onlineComponents}function zD(t){return wT(t).then(e=>e.syncEngine)}async function ET(t){const e=await wT(t),n=e.eventManager;return n.onListen=AD.bind(null,e.syncEngine),n.onUnlisten=kD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CD.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=ND.bind(null,e.syncEngine),n}function $D(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new _T({next:g=>{h.Za(),o.enqueueAndForget(()=>uT(s,m));const E=g.docs.has(l);!E&&g.fromCache?c.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&g.fromCache&&u&&u.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new cT($p(l.path),h,{includeMetadataChanges:!0,_a:!0});return lT(s,m)}(await ET(t),t.asyncQueue,e,n,r)),r.promise}function WD(t,e,n={}){const r=new yr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new _T({next:g=>{h.Za(),o.enqueueAndForget(()=>uT(s,m)),g.fromCache&&u.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new cT(l,h,{includeMetadataChanges:!0,_a:!0});return lT(s,m)}(await ET(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HD(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bv(t){if(!re.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ov(t){if(re.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qc(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yc{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new l1;switch(r.type){case"firstParty":return new h1(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Dv.get(n);r&&(ee("ComponentProvider","Removing Datastore"),Dv.delete(n),r.terminate())}(this),Promise.resolve()}}function qD(t,e,n,r={}){var i;const s=(t=jn(t,Yc))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&so("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Ot.MOCK_USER;else{l=RA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ot(c)}t._authCredentials=new u1(new vE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class $t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new di(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $t(this.firestore,e,this._key)}}class di extends us{constructor(e,n,r){super(e,n,$p(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new re(e))}withConverter(e){return new di(this.firestore,e,this._path)}}function Zt(t,e,...n){if(t=yt(t),IT("collection","path",e),t instanceof Yc){const r=Fe.fromString(e,...n);return Ov(r),new di(t,null,r)}{if(!(t instanceof $t||t instanceof di))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return Ov(r),new di(t.firestore,null,r)}}function Nr(t,e,...n){if(t=yt(t),arguments.length===1&&(e=_E.newId()),IT("doc","path",e),t instanceof Yc){const r=Fe.fromString(e,...n);return bv(r),new $t(t,null,new re(r))}{if(!(t instanceof $t||t instanceof di))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return bv(r),new $t(t.firestore,t instanceof di?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new eT(this,"async_queue_retry"),this.Vu=()=>{const r=Jd();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new yr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fl(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Sr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=nm.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ue()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class cs extends Yc{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Vv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Vv(e),this._firestoreClient=void 0,await e}}}function KD(t,e){const n=typeof t=="object"?t:kw(),r=typeof t=="string"?t:"(default)",i=Rp(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=xA("firestore");s&&qD(i,...s)}return i}function om(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||GD(t),t._firestoreClient}function GD(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,h){return new S1(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,TT(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new FD(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ho(At.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ho(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new It(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=/^__.*__$/;class YD{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms):new pl(e,this.data,n,this.fieldTransforms)}}class xT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ii(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ST(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class um{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new um(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ST(this.Cu)&&QD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class XD{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qc(e)}Qu(e,n,r,i=!1){return new um({Cu:e,methodName:n,qu:r,path:It.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zc(t){const e=t._freezeSettings(),n=qc(t._databaseId);return new XD(t._databaseId,!!e.ignoreUndefinedProperties,n)}function RT(t,e,n,r,i,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);dm("Data must be an object, but it was:",o,r);const l=AT(r,o);let u,c;if(s.merge)u=new an(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const g=Tf(e,m,n);if(!o.contains(g))throw new Q(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);PT(h,g)||h.push(g)}u=new an(h),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new YD(new Gt(l),u,c)}class ed extends Jc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ed}}class cm extends Jc{_toFieldTransform(e){return new Y1(e.path,new Ja)}isEqual(e){return e instanceof cm}}function JD(t,e,n,r){const i=t.Qu(1,e,n);dm("Data must be an object, but it was:",i,r);const s=[],o=Gt.empty();as(r,(u,c)=>{const h=hm(e,u,n);c=yt(c);const m=i.Nu(h);if(c instanceof ed)s.push(h);else{const g=vl(c,m);g!=null&&(s.push(h),o.set(h,g))}});const l=new an(s);return new xT(o,l,i.fieldTransforms)}function ZD(t,e,n,r,i,s){const o=t.Qu(1,e,n),l=[Tf(e,r,n)],u=[i];if(s.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)l.push(Tf(e,s[g])),u.push(s[g+1]);const c=[],h=Gt.empty();for(let g=l.length-1;g>=0;--g)if(!PT(c,l[g])){const E=l[g];let R=u[g];R=yt(R);const P=o.Nu(E);if(R instanceof ed)c.push(E);else{const D=vl(R,P);D!=null&&(c.push(E),h.set(E,D))}}const m=new an(c);return new xT(h,m,o.fieldTransforms)}function eb(t,e,n,r=!1){return vl(n,t.Qu(r?4:3,e))}function vl(t,e){if(CT(t=yt(t)))return dm("Unsupported field value:",e,t),AT(t,e);if(t instanceof Jc)return function(r,i){if(!ST(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=vl(l,i.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=yt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ht.fromDate(r);return{timestampValue:hc(i.serializer,s)}}if(r instanceof ht){const s=new ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hc(i.serializer,s)}}if(r instanceof am)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ho)return{bytesValue:HE(i.serializer,r._byteString)};if(r instanceof $t){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Gp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof lm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return Wp(l.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qc(r)}`)}(t,e)}function AT(t,e){const n={};return wE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):as(t,(r,i)=>{const s=vl(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function CT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ht||t instanceof am||t instanceof ho||t instanceof $t||t instanceof Jc||t instanceof lm)}function dm(t,e,n){if(!CT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Qc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Tf(t,e,n){if((e=yt(e))instanceof Xc)return e._internalPath;if(typeof e=="string")return hm(t,e);throw mc("Field path arguments must be of type string or ",t,!1,void 0,n)}const tb=new RegExp("[~\\*/\\[\\]]");function hm(t,e,n){if(e.search(tb)>=0)throw mc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Xc(...e.split("."))._internalPath}catch{throw mc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Q(F.INVALID_ARGUMENT,l+t+u)}function PT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(td("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nb extends kT{data(){return super.data()}}function td(t,e){return typeof e=="string"?hm(t,e):e instanceof Xc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fm{}class NT extends fm{}function ns(t,e,...n){let r=[];e instanceof fm&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof pm).length,l=s.filter(u=>u instanceof nd).length;if(o>1||o>0&&l>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class nd extends NT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new nd(e,n,r)}_apply(e){const n=this._parse(e);return DT(e._query,n),new us(e.firestore,e.converter,hf(e._query,n))}_parse(e){const n=Zc(e.firestore);return function(s,o,l,u,c,h,m){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){jv(m,h);const E=[];for(const R of m)E.push(Mv(u,s,R));g={arrayValue:{values:E}}}else g=Mv(u,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||jv(m,h),g=eb(l,o,m,h==="in"||h==="not-in");return ot.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ib(t,e,n){const r=e,i=td("where",t);return nd._create(i,r,n)}class pm extends fm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new pm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Mn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)DT(o,u),o=hf(o,u)}(e._query,n),new us(e.firestore,e.converter,hf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mm extends NT{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mm(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xa(s,o)}(e._query,this._field,this._direction);return new us(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new To(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function rs(t,e="asc"){const n=e,r=td("orderBy",t);return mm._create(r,n)}function Mv(t,e,n){if(typeof(n=yt(n))=="string"){if(n==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PE(e)&&n.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!re.isDocumentKey(r))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return sv(t,new re(r))}if(n instanceof $t)return sv(t,n._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qc(n)}.`)}function jv(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DT(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class sb{convertValue(e,n="none"){switch(ts(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return as(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ze(o.doubleValue));return new lm(s)}convertGeoPoint(e){return new am(Ze(e.latitude),Ze(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Up(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ga(e));default:return null}}convertTimestamp(e){const n=gi(e);return new ht(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);De(XE(r));const i=new Qa(r.get(1),r.get(3)),s=new re(r.popFirst(5));return i.isEqual(n)||Sr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OT extends kT{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ru(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(td("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ru extends OT{data(e={}){return super.data(e)}}class ob{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ca(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ru(this._firestore,this._userDataWriter,r.key,r,new ca(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Ru(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ca(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ru(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ca(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:ab(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ab(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(t){t=jn(t,$t);const e=jn(t.firestore,cs);return $D(om(e),t._key).then(n=>ub(e,t,n))}class VT extends sb{constructor(e){super(),this.firestore=e}convertBytes(e){return new ho(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}}function ds(t){t=jn(t,us);const e=jn(t.firestore,cs),n=om(e),r=new VT(e);return rb(t._query),WD(n,t._query).then(i=>new ob(e,r,t,i))}function lb(t,e,n){t=jn(t,$t);const r=jn(t.firestore,cs),i=bT(t.converter,e,n);return id(r,[RT(Zc(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wn.none())])}function rd(t,e,n,...r){t=jn(t,$t);const i=jn(t.firestore,cs),s=Zc(i);let o;return o=typeof(e=yt(e))=="string"||e instanceof Xc?ZD(s,"updateDoc",t._key,e,n,r):JD(s,"updateDoc",t._key,e),id(i,[o.toMutation(t._key,wn.exists(!0))])}function MT(t){return id(jn(t.firestore,cs),[new Hp(t._key,wn.none())])}function So(t,e){const n=jn(t.firestore,cs),r=Nr(t),i=bT(t.converter,e);return id(n,[RT(Zc(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,wn.exists(!1))]).then(()=>r)}function id(t,e){return function(r,i){const s=new yr;return r.asyncQueue.enqueueAndForget(async()=>DD(await zD(r),i,s)),s.promise}(om(t),e)}function ub(t,e,n){const r=n.docs.get(e._key),i=new VT(t);return new OT(t,i,e._key,r,new ca(n.hasPendingWrites,n.fromCache),e.converter)}function cn(){return new cm("serverTimestamp")}(function(e,n=!0){(function(i){Eo=i})(vo),ro(new Xi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new cs(new c1(r.getProvider("auth-internal")),new p1(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qa(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),ui(ev,"4.7.3",e),ui(ev,"4.7.3","esm2017")})();var cb="firebase",db="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui(cb,db,"app");const hb={apiKey:"AIzaSyASf7lyaGhgEl0q_q1j1lQTho4_HjVAICA",authDomain:"customer-ops-portal.firebaseapp.com",projectId:"customer-ops-portal",storageBucket:"customer-ops-portal.firebasestorage.app",messagingSenderId:"96326522125",appId:"1:96326522125:web:077b1758f6095020430c44"},jT=Pw(hb),gm=o1(jT),Je=KD(jT);function fb(t){return t?t.toLowerCase():"customer"}function xi(){const[t,e]=O.useState(null),[n,r]=O.useState(null),[i,s]=O.useState(!0);return O.useEffect(()=>{const o=GP(gm,async l=>{if(e(l),r(null),!l){s(!1);return}try{const u=Nr(Je,"users",l.uid),c=await LT(u);if(c.exists()){const h=c.data();r({...h,role:fb(h.role)})}else{const h={role:"customer",name:l.email,customerId:null};await lb(u,h,{merge:!0}),r(h)}}catch(u){console.error("Failed loading user profile:",u),r({role:"customer",name:l.email,customerId:null})}finally{s(!1)}});return()=>o()},[]),{user:t,profile:n,loading:i}}async function pb(t,e){return HP(gm,t,e)}async function mb(){return QP(gm)}function gb(){const{user:t,profile:e}=xi(),n=yo(),[r,i]=O.useState(!1),s=(e==null?void 0:e.role)||"customer",o=s==="admin"||s==="staff",l=async()=>{await mb(),n("/login")},u=({to:c,children:h})=>p.jsx(Ey,{to:c,onClick:()=>i(!1),className:({isActive:m})=>`text-xs tracking-widest uppercase transition-colors duration-200 ${m?"text-neutral-900":"text-neutral-400 hover:text-neutral-900"}`,children:h});return p.jsxs("div",{className:"min-h-screen bg-white",children:[p.jsxs("header",{className:"sticky top-0 z-50 bg-white border-b border-neutral-100",children:[p.jsx("div",{className:"max-w-7xl mx-auto px-6 lg:px-8",children:p.jsxs("div",{className:"flex items-center justify-between h-16 lg:h-20",children:[p.jsx(Ey,{to:"/",className:"text-lg font-light tracking-tight",children:"CUSTOMER OPS"}),p.jsx("nav",{className:"hidden lg:flex items-center gap-10",children:o?p.jsxs(p.Fragment,{children:[p.jsx(u,{to:"/orders",children:"Orders"}),p.jsx(u,{to:"/production",children:"Production"}),p.jsx(u,{to:"/customers",children:"Customers"}),p.jsx(u,{to:"/products",children:"Products"})]}):p.jsxs(p.Fragment,{children:[p.jsx(u,{to:"/dashboard",children:"Dashboard"}),p.jsx(u,{to:"/orders",children:"My Orders"})]})}),p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsxs("div",{className:"hidden sm:block text-right",children:[p.jsx("p",{className:"text-xs text-neutral-900",children:(e==null?void 0:e.name)||(t==null?void 0:t.email)}),p.jsx("p",{className:"text-2xs text-neutral-400 uppercase tracking-wider",children:s})]}),p.jsx("button",{onClick:l,className:"text-xs tracking-widest uppercase text-neutral-400 hover:text-neutral-900 transition-colors",children:"Exit"}),p.jsx("button",{onClick:()=>i(!r),className:"lg:hidden p-2",children:p.jsxs("div",{className:"w-5 h-4 flex flex-col justify-between",children:[p.jsx("span",{className:`h-px bg-neutral-900 transition-all ${r?"rotate-45 translate-y-1.5":""}`}),p.jsx("span",{className:`h-px bg-neutral-900 transition-opacity ${r?"opacity-0":""}`}),p.jsx("span",{className:`h-px bg-neutral-900 transition-all ${r?"-rotate-45 -translate-y-1.5":""}`})]})})]})]})}),r&&p.jsx("nav",{className:"lg:hidden border-t border-neutral-100 py-6 px-6 space-y-4 bg-white",children:o?p.jsxs(p.Fragment,{children:[p.jsx(u,{to:"/orders",children:"Orders"}),p.jsx(u,{to:"/production",children:"Production"}),p.jsx(u,{to:"/customers",children:"Customers"}),p.jsx(u,{to:"/products",children:"Products"})]}):p.jsxs(p.Fragment,{children:[p.jsx(u,{to:"/dashboard",children:"Dashboard"}),p.jsx(u,{to:"/orders",children:"My Orders"})]})})]}),p.jsx("main",{className:"max-w-7xl mx-auto px-6 lg:px-8 py-12 lg:py-16",children:p.jsx(KR,{})}),p.jsx("footer",{className:"border-t border-neutral-100 py-8",children:p.jsxs("div",{className:"max-w-7xl mx-auto px-6 lg:px-8 flex items-center justify-between",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase",children:"Boardroom clarity. Execution-grade tracking."}),p.jsx("p",{className:"text-2xs text-neutral-300",children:" 2024"})]})})]})}function yb(){var E;const{user:t,loading:e}=xi(),r=((E=Ei().state)==null?void 0:E.from)||"/",[i,s]=O.useState(""),[o,l]=O.useState(""),[u,c]=O.useState(!1),[h,m]=O.useState("");if(!e&&t)return p.jsx(to,{to:r,replace:!0});const g=async R=>{if(R.preventDefault(),!(!i.trim()||!o)){c(!0),m("");try{await pb(i.trim(),o)}catch(P){P.code==="auth/invalid-credential"?m("Invalid email or password"):m("Unable to sign in")}finally{c(!1)}}};return e?p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx("div",{className:"w-4 h-4 border border-neutral-900 border-t-transparent animate-spin"})}):p.jsxs("div",{className:"min-h-screen bg-white flex",children:[p.jsx("div",{className:"hidden lg:flex lg:w-1/2 bg-neutral-50 items-center justify-center p-16",children:p.jsxs("div",{className:"max-w-md",children:[p.jsxs("h1",{className:"text-5xl font-extralight tracking-tight text-neutral-900 leading-tight",children:["CUSTOMER",p.jsx("br",{}),"OPS PORTAL"]}),p.jsx("p",{className:"mt-8 text-sm text-neutral-500 leading-relaxed tracking-wide",children:"Order management, production planning, and client collaboration  unified in one elegant workspace."}),p.jsxs("div",{className:"mt-16 flex items-center gap-8 text-2xs tracking-widest text-neutral-400 uppercase",children:[p.jsx("span",{children:"Orders"}),p.jsx("span",{children:""}),p.jsx("span",{children:"Production"}),p.jsx("span",{children:""}),p.jsx("span",{children:"Collaboration"})]})]})}),p.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 lg:p-16",children:p.jsxs("div",{className:"w-full max-w-sm animate-in",children:[p.jsx("div",{className:"lg:hidden mb-16 text-center",children:p.jsx("h1",{className:"text-2xl font-extralight tracking-tight",children:"CUSTOMER OPS"})}),p.jsxs("div",{className:"mb-12",children:[p.jsx("h2",{className:"text-2xl font-light tracking-tight",children:"Sign in"}),p.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Enter your credentials to continue"})]}),p.jsxs("form",{onSubmit:g,className:"space-y-8",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Email"}),p.jsx("input",{type:"email",value:i,onChange:R=>s(R.target.value),className:"input-elite",placeholder:"you@company.com",disabled:u})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Password"}),p.jsx("input",{type:"password",value:o,onChange:R=>l(R.target.value),className:"input-elite",placeholder:"",disabled:u})]}),h&&p.jsx("p",{className:"text-sm text-red-600",children:h}),p.jsx("button",{type:"submit",disabled:u,className:"btn-primary w-full mt-4",children:u?"Signing in...":"Continue"})]}),p.jsxs("div",{className:"mt-16 pt-8 border-t border-neutral-100",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"Demo Accounts"}),p.jsxs("div",{className:"space-y-2 text-xs text-neutral-500",children:[p.jsxs("p",{children:[p.jsx("span",{className:"text-neutral-900",children:"Admin:"})," mallikamin@gmail.com"]}),p.jsxs("p",{children:[p.jsx("span",{className:"text-neutral-900",children:"Staff:"})," staff@customerops.com"]}),p.jsxs("p",{children:[p.jsx("span",{className:"text-neutral-900",children:"Customer:"})," customer@customerops.com"]}),p.jsx("p",{className:"text-neutral-400 mt-2",children:"Password: [role]123"})]})]})]})})]})}async function vb(t){const e=await LT(Nr(Je,"orders",t));return e.exists()?{id:e.id,...e.data()}:null}async function ym(t=null){let e=ns(Zt(Je,"orders"),rs("createdAt","desc"));return t&&(e=ns(Zt(Je,"orders"),ib("customerId","==",t),rs("createdAt","desc"))),(await ds(e)).docs.map(r=>({id:r.id,...r.data()}))}async function _b(t){const e=await So(Zt(Je,"orders"),{...t,status:"submitted",createdAt:cn(),updatedAt:cn()});return await If(e.id,{type:"created",message:"Order created",createdByUid:t.createdByUid}),e.id}async function Uv(t,e){await rd(Nr(Je,"orders",t),{...e,updatedAt:cn()})}async function wb(t){const e=ns(Zt(Je,"orders",t,"updates"),rs("createdAt","desc"));return(await ds(e)).docs.map(r=>({id:r.id,...r.data()}))}async function If(t,{type:e,message:n,createdByUid:r,createdByName:i}){await So(Zt(Je,"orders",t,"updates"),{type:e,message:n,createdByUid:r,createdByName:i||null,createdAt:cn()})}const Fv={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400",cancelled:"bg-red-50 text-red-600"};function Eb(){var l;const{profile:t}=xi(),[e,n]=O.useState([]),[r,i]=O.useState(!0);O.useEffect(()=>{t!=null&&t.customerId?ym(t.customerId).then(n).finally(()=>i(!1)):i(!1)},[t==null?void 0:t.customerId]);const s=e.slice(0,5),o=e.filter(u=>!["closed","cancelled"].includes(u.status));return p.jsxs("div",{className:"animate-in",children:[p.jsxs("div",{className:"mb-16",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"Dashboard"}),p.jsxs("h1",{className:"text-4xl font-extralight tracking-tight",children:["Welcome back, ",((l=t==null?void 0:t.name)==null?void 0:l.split(" ")[0])||"there"]})]}),p.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 mb-16",children:[{label:"Total Orders",value:e.length},{label:"Active",value:o.length},{label:"In Progress",value:e.filter(u=>u.status==="in_progress").length},{label:"Delivered",value:e.filter(u=>u.status==="delivered").length}].map((u,c)=>p.jsxs("div",{children:[p.jsx("p",{className:"text-4xl font-extralight text-neutral-900",children:u.value}),p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mt-2",children:u.label})]},c))}),p.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase",children:"Recent Orders"}),p.jsx(cr,{to:"/orders",className:"text-xs text-neutral-500 hover:text-neutral-900",children:"View all "})]}),r?p.jsx("div",{className:"py-16 text-center",children:p.jsx("div",{className:"w-4 h-4 border border-neutral-900 border-t-transparent animate-spin mx-auto"})}):s.length===0?p.jsxs("div",{className:"py-16 text-center border border-neutral-100",children:[p.jsx("p",{className:"text-sm text-neutral-500 mb-6",children:"No orders yet"}),p.jsx(cr,{to:"/orders/new",className:"btn-primary",children:"Create Order"})]}):p.jsx("div",{className:"border border-neutral-100 divide-y divide-neutral-100",children:s.map(u=>{var c;return p.jsx(cr,{to:`/orders/${u.id}`,className:"block p-6 hover:bg-neutral-50 transition-colors",children:p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-sm font-medium text-neutral-900",children:u.title}),u.summary&&p.jsx("p",{className:"text-sm text-neutral-500 mt-1 line-clamp-1",children:u.summary})]}),p.jsx("span",{className:`badge ${Fv[u.status]||Fv.submitted}`,children:(c=u.status)==null?void 0:c.replace(/_/g," ")})]})},u.id)})}),p.jsx("div",{className:"mt-8",children:p.jsx(cr,{to:"/orders/new",className:"btn-secondary",children:"New Order"})})]})}const Bv={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400",cancelled:"bg-red-50 text-red-600"},Tb=["all","submitted","confirmed","in_progress","delivered","closed"];function Ib(){const t=yo(),{profile:e}=xi(),n=(e==null?void 0:e.role)==="admin"||(e==null?void 0:e.role)==="staff",[r,i]=O.useState([]),[s,o]=O.useState(!0),[l,u]=O.useState(""),[c,h]=O.useState("all");O.useEffect(()=>{const g=n?null:e==null?void 0:e.customerId;ym(g).then(i).finally(()=>o(!1))},[e,n]);const m=O.useMemo(()=>{let g=r;if(c!=="all"&&(g=g.filter(E=>E.status===c)),l.trim()){const E=l.toLowerCase();g=g.filter(R=>{var P,D,x;return((P=R.title)==null?void 0:P.toLowerCase().includes(E))||((D=R.customerId)==null?void 0:D.toLowerCase().includes(E))||((x=R.summary)==null?void 0:x.toLowerCase().includes(E))})}return g},[r,l,c]);return p.jsxs("div",{className:"animate-in",children:[p.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:n?"All Orders":"My Orders"}),p.jsx("h1",{className:"text-4xl font-extralight tracking-tight",children:"Orders"})]}),p.jsx(cr,{to:"/orders/new",className:"btn-primary",children:"New Order"})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[p.jsx("div",{className:"flex-1",children:p.jsx("input",{type:"text",value:l,onChange:g=>u(g.target.value),placeholder:"Search orders...",className:"input-elite"})}),p.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:Tb.map(g=>p.jsx("button",{onClick:()=>h(g),className:`px-4 py-2 text-2xs tracking-widest uppercase whitespace-nowrap transition-colors ${c===g?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-500 hover:bg-neutral-200"}`,children:g==="all"?"All":g.replace(/_/g," ")},g))})]}),s?p.jsx("div",{className:"py-24 text-center",children:p.jsx("div",{className:"w-4 h-4 border border-neutral-900 border-t-transparent animate-spin mx-auto"})}):m.length===0?p.jsxs("div",{className:"py-24 text-center border border-dashed border-neutral-200",children:[p.jsx("p",{className:"text-sm text-neutral-400 mb-6",children:l||c!=="all"?"No orders match your filters":"No orders yet"}),!l&&c==="all"&&p.jsx(cr,{to:"/orders/new",className:"btn-secondary",children:"Create First Order"})]}):p.jsxs("div",{className:"border border-neutral-100",children:[p.jsxs("div",{className:"hidden lg:grid lg:grid-cols-12 gap-4 px-6 py-4 bg-neutral-50 text-2xs tracking-widest text-neutral-400 uppercase",children:[p.jsx("div",{className:"col-span-4",children:"Order"}),n&&p.jsx("div",{className:"col-span-2",children:"Customer"}),p.jsx("div",{className:n?"col-span-2":"col-span-4",children:"Status"}),p.jsx("div",{className:"col-span-2",children:"Date"}),p.jsx("div",{className:"col-span-2 text-right",children:"Actions"})]}),p.jsx("div",{className:"divide-y divide-neutral-100",children:m.map(g=>{var E,R,P,D;return p.jsxs("div",{onClick:()=>t(`/orders/${g.id}`),className:"grid grid-cols-1 lg:grid-cols-12 gap-2 lg:gap-4 px-6 py-5 hover:bg-neutral-50 cursor-pointer transition-colors",children:[p.jsxs("div",{className:"lg:col-span-4",children:[p.jsx("p",{className:"text-sm font-medium text-neutral-900",children:g.title}),g.summary&&p.jsx("p",{className:"text-xs text-neutral-400 mt-1 line-clamp-1 hidden lg:block",children:g.summary})]}),n&&p.jsx("div",{className:"lg:col-span-2",children:p.jsx("p",{className:"text-xs text-neutral-500",children:g.customerId||""})}),p.jsx("div",{className:n?"lg:col-span-2":"lg:col-span-4",children:p.jsx("span",{className:`badge ${Bv[g.status]||Bv.submitted}`,children:(E=g.status)==null?void 0:E.replace(/_/g," ")})}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx("p",{className:"text-xs text-neutral-400",children:((D=(P=(R=g.createdAt)==null?void 0:R.toDate)==null?void 0:P.call(R))==null?void 0:D.toLocaleDateString())||""})}),p.jsx("div",{className:"lg:col-span-2 text-right",children:p.jsx("span",{className:"text-xs text-neutral-400 hover:text-neutral-900",children:"View "})})]},g.id)})})]})]})}async function xb(t){const e=ns(Zt(Je,"orders",t,"tasks"),rs("createdAt","asc"));return(await ds(e)).docs.map(r=>({id:r.id,...r.data()}))}async function Sb(t,e){return(await So(Zt(Je,"orders",t,"tasks"),{title:e.title,status:"todo",assigneeUid:e.assigneeUid||null,parentTaskId:e.parentTaskId||null,dueDate:e.dueDate||null,createdByUid:e.createdByUid,createdAt:cn()})).id}async function Rb(t,e,n){await rd(Nr(Je,"orders",t,"tasks",e),{...n,updatedAt:cn()})}async function Ab(t){const e=ns(Zt(Je,"orders",t,"comments"),rs("createdAt","asc"));return(await ds(e)).docs.map(r=>({id:r.id,...r.data()}))}async function Cb(t,{message:e,createdByUid:n,createdByName:r,parentId:i=null}){await So(Zt(Je,"orders",t,"comments"),{message:e,createdByUid:n,createdByName:r,parentId:i,createdAt:cn()})}async function UT(){return(await ds(Zt(Je,"users"))).docs.map(e=>({id:e.id,...e.data()})).filter(e=>{const n=(e.role||"").toLowerCase();return n==="admin"||n==="staff"}).sort((e,n)=>(e.name||"").localeCompare(n.name||""))}const Pb=["submitted","confirmed","in_progress","delivered","closed","cancelled"],eh=["todo","doing","blocked","done"],zv={submitted:"bg-neutral-100 text-neutral-600",confirmed:"bg-blue-50 text-blue-700",in_progress:"bg-amber-50 text-amber-700",delivered:"bg-emerald-50 text-emerald-700",closed:"bg-neutral-100 text-neutral-400",cancelled:"bg-red-50 text-red-600",todo:"bg-neutral-100 text-neutral-600",doing:"bg-blue-50 text-blue-700",blocked:"bg-red-50 text-red-600",done:"bg-emerald-50 text-emerald-700"};function kb(){var se,Te,fe,Ie,ft,ze,tt;const{orderId:t}=bR(),e=yo(),{user:n,profile:r}=xi(),i=(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.role)==="staff",[s,o]=O.useState(null),[l,u]=O.useState([]),[c,h]=O.useState([]),[m,g]=O.useState([]),[E,R]=O.useState([]),[P,D]=O.useState(!0),[x,_]=O.useState(""),[A,V]=O.useState(""),[U,B]=O.useState(null),[y,v]=O.useState(!1),[T,I]=O.useState("tasks"),S=async()=>{const[$,_e,Oe,Ut,In]=await Promise.all([vb(t),xb(t),Ab(t),wb(t),i?UT():Promise.resolve([])]);o($),u(_e),h(Oe),g(Ut),R(In),D(!1)};O.useEffect(()=>{S()},[t]);const N=O.useMemo(()=>{const $=c.filter(Oe=>!Oe.parentId),_e=c.filter(Oe=>Oe.parentId);return $.map(Oe=>({...Oe,replies:_e.filter(Ut=>Ut.parentId===Oe.id)}))},[c]),C=O.useMemo(()=>l.filter($=>!$.parentTaskId),[l]),Ae=O.useMemo(()=>{const $={};return l.filter(_e=>_e.parentTaskId).forEach(_e=>{$[_e.parentTaskId]||($[_e.parentTaskId]=[]),$[_e.parentTaskId].push(_e)}),$},[l]),at=async $=>{!i||$===s.status||(v(!0),await Uv(t,{status:$}),await If(t,{type:"status_change",message:`Status changed to ${$.replace(/_/g," ")}`,createdByUid:n.uid,createdByName:r==null?void 0:r.name}),await S(),v(!1))},fn=async $=>{var Oe;if(!i)return;v(!0);const _e=((Oe=E.find(Ut=>Ut.id===$))==null?void 0:Oe.name)||"Unassigned";await Uv(t,{assignedToUid:$||null}),await If(t,{type:"assignment",message:$?`Assigned to ${_e}`:"Unassigned",createdByUid:n.uid,createdByName:r==null?void 0:r.name}),await S(),v(!1)},vt=async()=>{x.trim()&&(v(!0),await Sb(t,{title:x.trim(),createdByUid:n.uid}),_(""),await S(),v(!1))},q=async($,_e)=>{v(!0),await Rb(t,$,{status:_e}),await S(),v(!1)},ie=async()=>{A.trim()&&(v(!0),await Cb(t,{message:A.trim(),createdByUid:n.uid,createdByName:r==null?void 0:r.name,parentId:U}),V(""),B(null),await S(),v(!1))};return P?p.jsx("div",{className:"py-24 text-center",children:p.jsx("div",{className:"w-4 h-4 border border-neutral-900 border-t-transparent animate-spin mx-auto"})}):s?p.jsxs("div",{className:"animate-in",children:[p.jsx("button",{onClick:()=>e(-1),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-8",children:" Back to orders"}),p.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-6 mb-12 pb-12 border-b border-neutral-100",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"Order"}),p.jsx("h1",{className:"text-3xl font-extralight tracking-tight mb-2",children:s.title}),s.summary&&p.jsx("p",{className:"text-sm text-neutral-500",children:s.summary}),p.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-4",children:[p.jsx("span",{className:`badge ${zv[s.status]}`,children:(se=s.status)==null?void 0:se.replace(/_/g," ")}),p.jsxs("span",{className:"text-xs text-neutral-400",children:["Customer: ",s.customerId]}),s.assignedToUid&&p.jsxs("span",{className:"text-xs text-neutral-400",children:["Owner: ",((Te=E.find($=>$.id===s.assignedToUid))==null?void 0:Te.name)||""]})]})]}),i&&p.jsxs("div",{className:"flex flex-wrap gap-3",children:[p.jsx("select",{value:s.status,onChange:$=>at($.target.value),disabled:y,className:"input-elite text-sm py-2",children:Pb.map($=>p.jsx("option",{value:$,children:$.replace(/_/g," ")},$))}),p.jsxs("select",{value:s.assignedToUid||"",onChange:$=>fn($.target.value),disabled:y,className:"input-elite text-sm py-2",children:[p.jsx("option",{value:"",children:"Unassigned"}),E.map($=>p.jsx("option",{value:$.id,children:$.name},$.id))]})]})]}),p.jsx("div",{className:"flex gap-8 mb-8 border-b border-neutral-100",children:["tasks","comments","activity"].map($=>p.jsxs("button",{onClick:()=>I($),className:`pb-4 text-xs tracking-widest uppercase transition-colors ${T===$?"text-neutral-900 border-b-2 border-neutral-900":"text-neutral-400 hover:text-neutral-600"}`,children:[$," ",$==="tasks"&&`(${l.length})`,$==="comments"&&`(${c.length})`]},$))}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[p.jsxs("div",{className:"lg:col-span-2",children:[T==="tasks"&&p.jsxs("div",{children:[p.jsxs("div",{className:"flex gap-3 mb-8",children:[p.jsx("input",{type:"text",value:x,onChange:$=>_($.target.value),onKeyDown:$=>$.key==="Enter"&&vt(),placeholder:"Add a task...",className:"input-elite flex-1",disabled:y}),p.jsx("button",{onClick:vt,disabled:y||!x.trim(),className:"btn-primary",children:"Add"})]}),C.length===0?p.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:p.jsx("p",{className:"text-sm text-neutral-400",children:"No tasks yet"})}):p.jsx("div",{className:"space-y-3",children:C.map($=>{var _e,Oe,Ut,In;return p.jsxs("div",{className:"border border-neutral-100 p-5",children:[p.jsxs("div",{className:"flex items-start justify-between gap-4",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("p",{className:"text-sm font-medium text-neutral-900",children:$.title}),$.dueDate&&p.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:["Due: ",(Ut=(Oe=(_e=$.dueDate)==null?void 0:_e.toDate)==null?void 0:Oe.call(_e))==null?void 0:Ut.toLocaleDateString()]})]}),p.jsx("select",{value:$.status,onChange:Ce=>q($.id,Ce.target.value),disabled:y,className:`badge cursor-pointer ${zv[$.status]}`,children:eh.map(Ce=>p.jsx("option",{value:Ce,children:Ce},Ce))})]}),((In=Ae[$.id])==null?void 0:In.length)>0&&p.jsx("div",{className:"mt-4 pl-4 border-l-2 border-neutral-100 space-y-2",children:Ae[$.id].map(Ce=>p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("p",{className:"text-xs text-neutral-600",children:Ce.title}),p.jsx("select",{value:Ce.status,onChange:Ct=>q(Ce.id,Ct.target.value),disabled:y,className:"text-2xs bg-transparent border-0 text-neutral-400",children:eh.map(Ct=>p.jsx("option",{value:Ct,children:Ct},Ct))})]},Ce.id))})]},$.id)})})]}),T==="comments"&&p.jsxs("div",{children:[p.jsxs("div",{className:"mb-8",children:[U&&p.jsxs("div",{className:"flex items-center justify-between text-xs text-neutral-400 mb-2",children:[p.jsx("span",{children:"Replying to comment..."}),p.jsx("button",{onClick:()=>B(null),children:"Cancel"})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("input",{type:"text",value:A,onChange:$=>V($.target.value),onKeyDown:$=>$.key==="Enter"&&ie(),placeholder:"Add a comment...",className:"input-elite flex-1",disabled:y}),p.jsx("button",{onClick:ie,disabled:y||!A.trim(),className:"btn-primary",children:"Post"})]})]}),N.length===0?p.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:p.jsx("p",{className:"text-sm text-neutral-400",children:"No comments yet"})}):p.jsx("div",{className:"space-y-6",children:N.map($=>{var _e;return p.jsxs("div",{children:[p.jsxs("div",{className:`p-4 ${$.createdByUid===(n==null?void 0:n.uid)?"bg-neutral-900 text-white":"bg-neutral-50"}`,children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("p",{className:`text-xs ${$.createdByUid===(n==null?void 0:n.uid)?"text-neutral-400":"text-neutral-500"}`,children:$.createdByName||"Unknown"}),p.jsx("button",{onClick:()=>B($.id),className:`text-xs ${$.createdByUid===(n==null?void 0:n.uid),"text-neutral-400"} hover:underline`,children:"Reply"})]}),p.jsx("p",{className:"text-sm",children:$.message})]}),((_e=$.replies)==null?void 0:_e.length)>0&&p.jsx("div",{className:"ml-6 mt-2 space-y-2",children:$.replies.map(Oe=>p.jsxs("div",{className:`p-3 ${Oe.createdByUid===(n==null?void 0:n.uid)?"bg-neutral-800 text-white":"bg-neutral-100"}`,children:[p.jsx("p",{className:`text-xs mb-1 ${Oe.createdByUid===(n==null?void 0:n.uid)?"text-neutral-400":"text-neutral-500"}`,children:Oe.createdByName}),p.jsx("p",{className:"text-xs",children:Oe.message})]},Oe.id))})]},$.id)})})]}),T==="activity"&&p.jsx("div",{children:m.length===0?p.jsx("div",{className:"py-16 text-center border border-dashed border-neutral-200",children:p.jsx("p",{className:"text-sm text-neutral-400",children:"No activity yet"})}):p.jsx("div",{className:"space-y-4",children:m.map($=>{var _e;return p.jsxs("div",{className:"flex gap-4",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-neutral-300 mt-1.5 flex-shrink-0"}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm text-neutral-700",children:$.message}),p.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:[$.createdByName||"System",((_e=$.createdAt)==null?void 0:_e.toDate)&&`  ${$.createdAt.toDate().toLocaleString()}`]})]})]},$.id)})})})]}),p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"Order Details"}),p.jsxs("div",{className:"space-y-3 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-neutral-500",children:"Status"}),p.jsx("span",{className:"text-neutral-900",children:(fe=s.status)==null?void 0:fe.replace(/_/g," ")})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-neutral-500",children:"Customer"}),p.jsx("span",{className:"text-neutral-900",children:s.customerId})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-neutral-500",children:"Created"}),p.jsx("span",{className:"text-neutral-900",children:((ze=(ft=(Ie=s.createdAt)==null?void 0:Ie.toDate)==null?void 0:ft.call(Ie))==null?void 0:ze.toLocaleDateString())||""})]}),s.assignedToUid&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-neutral-500",children:"Owner"}),p.jsx("span",{className:"text-neutral-900",children:((tt=E.find($=>$.id===s.assignedToUid))==null?void 0:tt.name)||""})]})]})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"Progress"}),p.jsx("div",{className:"space-y-2",children:eh.map($=>{const _e=l.filter(Oe=>Oe.status===$).length;return p.jsxs("div",{className:"flex items-center justify-between text-xs",children:[p.jsx("span",{className:"text-neutral-500 capitalize",children:$}),p.jsx("span",{className:"text-neutral-900",children:_e})]},$)})})]})]})]})]}):p.jsxs("div",{className:"py-24 text-center",children:[p.jsx("p",{className:"text-sm text-neutral-500 mb-6",children:"Order not found"}),p.jsx("button",{onClick:()=>e(-1),className:"btn-secondary",children:"Go Back"})]})}async function FT(){const t=ns(Zt(Je,"customers"),rs("name","asc"));return(await ds(t)).docs.map(n=>({id:n.id,...n.data()}))}async function Nb(t){return(await So(Zt(Je,"customers"),{...t,active:!0,createdAt:cn(),updatedAt:cn()})).id}async function Db(t,e){await rd(Nr(Je,"customers",t),{...e,updatedAt:cn()})}async function bb(t){await MT(Nr(Je,"customers",t))}function Ob(){const t=yo(),{user:e,profile:n}=xi(),r=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="staff",[i,s]=O.useState(""),[o,l]=O.useState(""),[u,c]=O.useState((n==null?void 0:n.customerId)||""),[h,m]=O.useState(""),[g,E]=O.useState(""),[R,P]=O.useState([]),[D,x]=O.useState([]),[_,A]=O.useState(!1),[V,U]=O.useState("");O.useEffect(()=>{r&&Promise.all([FT(),UT()]).then(([y,v])=>{P(y),x(v)})},[r]);const B=async y=>{if(y.preventDefault(),U(""),!i.trim()){U("Please enter an order title");return}const v=r?u:n==null?void 0:n.customerId;if(!v){U("Please select a customer");return}A(!0);try{const T=await _b({customerId:v,title:i.trim(),summary:o.trim(),assignedToUid:h||null,deliveryDate:g||null,createdByUid:e.uid});t(`/orders/${T}`)}catch{U("Failed to create order")}finally{A(!1)}};return p.jsxs("div",{className:"max-w-2xl mx-auto animate-in",children:[p.jsx("button",{onClick:()=>t(-1),className:"text-xs text-neutral-400 hover:text-neutral-900 mb-8",children:" Back"}),p.jsxs("div",{className:"mb-12",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"New"}),p.jsx("h1",{className:"text-3xl font-extralight tracking-tight",children:"Create Order"})]}),p.jsxs("form",{onSubmit:B,className:"space-y-8",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Order Title *"}),p.jsx("input",{type:"text",value:i,onChange:y=>s(y.target.value),placeholder:"e.g., Q1 Packaging Order",className:"input-elite",disabled:_})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Description"}),p.jsx("textarea",{value:o,onChange:y=>l(y.target.value),placeholder:"Brief description of the order...",rows:3,className:"input-elite resize-none",disabled:_})]}),r&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Customer *"}),p.jsxs("select",{value:u,onChange:y=>c(y.target.value),className:"input-elite",disabled:_,children:[p.jsx("option",{value:"",children:"Select customer..."}),R.map(y=>p.jsx("option",{value:y.id,children:y.name},y.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Assign To"}),p.jsxs("select",{value:h,onChange:y=>m(y.target.value),className:"input-elite",disabled:_,children:[p.jsx("option",{value:"",children:"Unassigned"}),D.map(y=>p.jsx("option",{value:y.id,children:y.name},y.id))]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Delivery Date"}),p.jsx("input",{type:"date",value:g,onChange:y=>E(y.target.value),className:"input-elite",disabled:_})]})]}),!r&&(n==null?void 0:n.customerId)&&p.jsx("div",{className:"p-4 bg-neutral-50",children:p.jsxs("p",{className:"text-xs text-neutral-500",children:["Creating order for: ",p.jsx("span",{className:"text-neutral-900",children:n.customerId})]})}),V&&p.jsx("p",{className:"text-sm text-red-600",children:V}),p.jsxs("div",{className:"flex items-center gap-4 pt-4",children:[p.jsx("button",{type:"submit",disabled:_,className:"btn-primary",children:_?"Creating...":"Create Order"}),p.jsx("button",{type:"button",onClick:()=>t(-1),className:"btn-ghost",children:"Cancel"})]})]})]})}function Lb(){const[t,e]=O.useState([]),[n,r]=O.useState(!0),[i,s]=O.useState(!1),[o,l]=O.useState(null),[u,c]=O.useState(!1),[h,m]=O.useState(""),[g,E]=O.useState(""),[R,P]=O.useState(""),[D,x]=O.useState("");O.useEffect(()=>{_()},[]);const _=async()=>{r(!0);const v=await FT();e(v),r(!1)},A=()=>{E(""),P(""),x(""),l(null),s(!1)},V=v=>{E(v.name||""),P(v.contactEmail||""),x(v.contactPhone||""),l(v),s(!0)},U=async v=>{v.preventDefault(),g.trim()&&(c(!0),o?await Db(o.id,{name:g.trim(),contactEmail:R,contactPhone:D}):await Nb({name:g.trim(),contactEmail:R,contactPhone:D}),A(),await _(),c(!1))},B=async v=>{confirm("Delete this customer?")&&(c(!0),await bb(v),await _(),c(!1))},y=t.filter(v=>{var T,I;return((T=v.name)==null?void 0:T.toLowerCase().includes(h.toLowerCase()))||((I=v.contactEmail)==null?void 0:I.toLowerCase().includes(h.toLowerCase()))});return p.jsxs("div",{className:"animate-in",children:[p.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"Management"}),p.jsx("h1",{className:"text-4xl font-extralight tracking-tight",children:"Customers"})]}),p.jsx("button",{onClick:()=>{A(),s(!0)},className:"btn-primary",children:"Add Customer"})]}),i&&p.jsxs("div",{className:"border border-neutral-100 p-8 mb-8",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-6",children:o?"Edit Customer":"New Customer"}),p.jsxs("form",{onSubmit:U,className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Name *"}),p.jsx("input",{type:"text",value:g,onChange:v=>E(v.target.value),className:"input-elite"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Email"}),p.jsx("input",{type:"email",value:R,onChange:v=>P(v.target.value),className:"input-elite"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Phone"}),p.jsx("input",{type:"text",value:D,onChange:v=>x(v.target.value),className:"input-elite"})]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{type:"submit",disabled:u,className:"btn-primary",children:o?"Save":"Add"}),p.jsx("button",{type:"button",onClick:A,className:"btn-ghost",children:"Cancel"})]})]})]}),p.jsx("div",{className:"mb-8",children:p.jsx("input",{type:"text",value:h,onChange:v=>m(v.target.value),placeholder:"Search customers...",className:"input-elite max-w-md"})}),n?p.jsx("div",{className:"py-24 text-center",children:p.jsx("div",{className:"w-4 h-4 border border-neutral-900 border-t-transparent animate-spin mx-auto"})}):y.length===0?p.jsx("div",{className:"py-24 text-center border border-dashed border-neutral-200",children:p.jsx("p",{className:"text-sm text-neutral-400",children:"No customers found"})}):p.jsx("div",{className:"border border-neutral-100 divide-y divide-neutral-100",children:y.map(v=>p.jsxs("div",{className:"flex items-center justify-between px-6 py-5",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-neutral-900",children:v.name}),p.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:v.contactEmail||""})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{onClick:()=>V(v),className:"text-xs text-neutral-400 hover:text-neutral-900",children:"Edit"}),p.jsx("button",{onClick:()=>B(v.id),className:"text-xs text-red-400 hover:text-red-600",children:"Delete"})]})]},v.id))})]})}async function Vb(t=!1){let n=(await ds(ns(Zt(Je,"products"),rs("name","asc")))).docs.map(r=>({id:r.id,...r.data()}));return t&&(n=n.filter(r=>r.active!==!1)),n}async function Mb(t){return(await So(Zt(Je,"products"),{...t,active:!0,createdAt:cn(),updatedAt:cn()})).id}async function $v(t,e){await rd(Nr(Je,"products",t),{...e,updatedAt:cn()})}async function jb(t){await MT(Nr(Je,"products",t))}function Ub(){const[t,e]=O.useState([]),[n,r]=O.useState(!0),[i,s]=O.useState(!1),[o,l]=O.useState(null),[u,c]=O.useState(!1),[h,m]=O.useState(""),[g,E]=O.useState(""),[R,P]=O.useState(""),[D,x]=O.useState(""),[_,A]=O.useState("");O.useEffect(()=>{V()},[]);const V=async()=>{r(!0);const S=await Vb();e(S),r(!1)},U=()=>{E(""),P(""),x(""),A(""),l(null),s(!1)},B=S=>{var N;E(S.name||""),P(S.sku||""),x(((N=S.price)==null?void 0:N.toString())||""),A(S.category||""),l(S),s(!0)},y=async S=>{if(S.preventDefault(),!g.trim())return;c(!0);const N={name:g.trim(),sku:R,price:parseFloat(D)||0,category:_};o?await $v(o.id,N):await Mb(N),U(),await V(),c(!1)},v=async S=>{c(!0),await $v(S.id,{active:!S.active}),await V(),c(!1)},T=async S=>{confirm("Delete this product?")&&(c(!0),await jb(S),await V(),c(!1))},I=t.filter(S=>{var N,C;return((N=S.name)==null?void 0:N.toLowerCase().includes(h.toLowerCase()))||((C=S.sku)==null?void 0:C.toLowerCase().includes(h.toLowerCase()))});return p.jsxs("div",{className:"animate-in",children:[p.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"Catalog"}),p.jsx("h1",{className:"text-4xl font-extralight tracking-tight",children:"Products"})]}),p.jsx("button",{onClick:()=>{U(),s(!0)},className:"btn-primary",children:"Add Product"})]}),i&&p.jsxs("div",{className:"border border-neutral-100 p-8 mb-8",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-6",children:o?"Edit Product":"New Product"}),p.jsxs("form",{onSubmit:y,className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Name *"}),p.jsx("input",{type:"text",value:g,onChange:S=>E(S.target.value),className:"input-elite"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"SKU"}),p.jsx("input",{type:"text",value:R,onChange:S=>P(S.target.value),className:"input-elite"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Price"}),p.jsx("input",{type:"number",step:"0.01",value:D,onChange:S=>x(S.target.value),className:"input-elite"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-2xs font-medium tracking-widest text-neutral-500 uppercase mb-3",children:"Category"}),p.jsx("input",{type:"text",value:_,onChange:S=>A(S.target.value),className:"input-elite"})]})]}),p.jsxs("div",{className:"flex gap-4",children:[p.jsx("button",{type:"submit",disabled:u,className:"btn-primary",children:o?"Save":"Add"}),p.jsx("button",{type:"button",onClick:U,className:"btn-ghost",children:"Cancel"})]})]})]}),p.jsx("div",{className:"mb-8",children:p.jsx("input",{type:"text",value:h,onChange:S=>m(S.target.value),placeholder:"Search products...",className:"input-elite max-w-md"})}),n?p.jsx("div",{className:"py-24 text-center",children:p.jsx("div",{className:"w-4 h-4 border border-neutral-900 border-t-transparent animate-spin mx-auto"})}):I.length===0?p.jsx("div",{className:"py-24 text-center border border-dashed border-neutral-200",children:p.jsx("p",{className:"text-sm text-neutral-400",children:"No products found"})}):p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:I.map(S=>{var N;return p.jsxs("div",{className:`border p-6 ${S.active===!1?"border-neutral-100 opacity-50":"border-neutral-200"}`,children:[p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-medium text-neutral-900",children:S.name}),S.sku&&p.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:["SKU: ",S.sku]})]}),S.active===!1&&p.jsx("span",{className:"badge bg-neutral-100 text-neutral-400",children:"Inactive"})]}),p.jsxs("p",{className:"text-lg font-light mt-4",children:["$",((N=S.price)==null?void 0:N.toFixed(2))||"0.00"]}),S.category&&p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mt-2",children:S.category}),p.jsxs("div",{className:"flex gap-4 mt-6 pt-4 border-t border-neutral-100",children:[p.jsx("button",{onClick:()=>v(S),className:"text-xs text-neutral-400 hover:text-neutral-900",children:S.active===!1?"Activate":"Deactivate"}),p.jsx("button",{onClick:()=>B(S),className:"text-xs text-neutral-400 hover:text-neutral-900",children:"Edit"}),p.jsx("button",{onClick:()=>T(S.id),className:"text-xs text-red-400 hover:text-red-600",children:"Delete"})]})]},S.id)})})]})}const Fb={submitted:"bg-neutral-200",confirmed:"bg-blue-200",in_progress:"bg-amber-200",delivered:"bg-emerald-200",closed:"bg-neutral-100",cancelled:"bg-red-100"};function Bb(){const[t,e]=O.useState([]),[n,r]=O.useState(!0),[i,s]=O.useState({daily:100,utilized:0}),[o,l]=O.useState("calendar");O.useEffect(()=>{ym().then(g=>{e(g);const E=g.filter(R=>["confirmed","in_progress"].includes(R.status));s(R=>({...R,utilized:E.length*10})),r(!1)})},[]);const u=O.useMemo(()=>({submitted:t.filter(g=>g.status==="submitted"),confirmed:t.filter(g=>g.status==="confirmed"),in_progress:t.filter(g=>g.status==="in_progress"),delivered:t.filter(g=>g.status==="delivered")}),[t]),c=new Date,h=O.useMemo(()=>{const g=[],E=new Date(c);E.setDate(E.getDate()-E.getDay());for(let R=0;R<4;R++){const P=[];for(let D=0;D<7;D++){const x=new Date(E);x.setDate(E.getDate()+R*7+D);const _=t.filter(A=>{var U;return A.deliveryDate?((U=A.deliveryDate)!=null&&U.toDate?A.deliveryDate.toDate():new Date(A.deliveryDate)).toDateString()===x.toDateString():!1});P.push({date:x,orders:_})}g.push(P)}return g},[t]),m=Math.min(i.utilized/i.daily*100,100);return p.jsxs("div",{className:"animate-in",children:[p.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 mb-12",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mb-4",children:"Planning"}),p.jsx("h1",{className:"text-4xl font-extralight tracking-tight",children:"Production"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>l("calendar"),className:`px-4 py-2 text-2xs tracking-widest uppercase ${o==="calendar"?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-500"}`,children:"Calendar"}),p.jsx("button",{onClick:()=>l("list"),className:`px-4 py-2 text-2xs tracking-widest uppercase ${o==="list"?"bg-neutral-900 text-white":"bg-neutral-100 text-neutral-500"}`,children:"Pipeline"})]})]}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8 mb-12 pb-12 border-b border-neutral-100",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-4xl font-extralight text-neutral-900",children:u.submitted.length}),p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mt-2",children:"Pending Review"})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-4xl font-extralight text-neutral-900",children:u.confirmed.length}),p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mt-2",children:"Confirmed"})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-4xl font-extralight text-neutral-900",children:u.in_progress.length}),p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mt-2",children:"In Production"})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-4xl font-extralight text-neutral-900",children:u.delivered.length}),p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase mt-2",children:"Delivered"})]})]}),p.jsxs("div",{className:"mb-12",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase",children:"Capacity Utilization"}),p.jsxs("p",{className:"text-sm text-neutral-900",children:[Math.round(m),"%"]})]}),p.jsx("div",{className:"h-2 bg-neutral-100 overflow-hidden",children:p.jsx("div",{className:`h-full transition-all duration-500 ${m>80?"bg-red-400":m>50?"bg-amber-400":"bg-emerald-400"}`,style:{width:`${m}%`}})}),p.jsxs("div",{className:"flex justify-between mt-2 text-xs text-neutral-400",children:[p.jsx("span",{children:"0"}),p.jsxs("span",{children:["Daily capacity: ",i.daily," units"]})]})]}),n?p.jsx("div",{className:"py-24 text-center",children:p.jsx("div",{className:"w-4 h-4 border border-neutral-900 border-t-transparent animate-spin mx-auto"})}):o==="calendar"?p.jsx("div",{children:p.jsxs("div",{className:"grid grid-cols-7 gap-px bg-neutral-200 border border-neutral-200",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(g=>p.jsx("div",{className:"bg-neutral-50 p-3 text-center",children:p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase",children:g})},g)),h.map((g,E)=>g.map((R,P)=>{const D=R.date.toDateString()===c.toDateString(),x=R.date<c&&!D;return p.jsxs("div",{className:`bg-white p-3 min-h-[100px] ${x?"opacity-50":""}`,children:[p.jsx("p",{className:`text-xs mb-2 ${D?"text-neutral-900 font-medium":"text-neutral-400"}`,children:R.date.getDate()}),p.jsxs("div",{className:"space-y-1",children:[R.orders.slice(0,3).map(_=>p.jsx(cr,{to:`/orders/${_.id}`,className:`block p-1.5 text-2xs truncate ${Fb[_.status]}`,children:_.title},_.id)),R.orders.length>3&&p.jsxs("p",{className:"text-2xs text-neutral-400",children:["+",R.orders.length-3," more"]})]})]},`${E}-${P}`)}))]})}):p.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:["submitted","confirmed","in_progress","delivered"].map(g=>p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("p",{className:"text-2xs tracking-widest text-neutral-400 uppercase",children:g.replace(/_/g," ")}),p.jsx("span",{className:"text-xs text-neutral-400",children:u[g].length})]}),p.jsxs("div",{className:"space-y-3",children:[u[g].map(E=>p.jsxs(cr,{to:`/orders/${E.id}`,className:"block border border-neutral-100 p-4 hover:border-neutral-300 transition-colors",children:[p.jsx("p",{className:"text-sm font-medium text-neutral-900 truncate",children:E.title}),p.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:E.customerId})]},E.id)),u[g].length===0&&p.jsx("div",{className:"border border-dashed border-neutral-200 p-4 text-center",children:p.jsx("p",{className:"text-xs text-neutral-400",children:"No orders"})})]})]},g))})]})}function iu({children:t,allowRoles:e}){const{user:n,profile:r,loading:i}=xi(),s=Ei();if(i)return p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-white",children:p.jsx("div",{className:"w-4 h-4 border border-neutral-900 border-t-transparent animate-spin"})});if(!n)return p.jsx(to,{to:"/login",state:{from:s.pathname},replace:!0});if(e&&e.length>0){const o=(r==null?void 0:r.role)||"customer";if(!e.includes(o))return p.jsx(to,{to:"/",replace:!0})}return t}function zb(){const{profile:t,loading:e}=xi();if(e)return null;const n=(t==null?void 0:t.role)||"customer";return n==="admin"||n==="staff"?p.jsx(to,{to:"/orders",replace:!0}):p.jsx(to,{to:"/dashboard",replace:!0})}const $b=tA([{path:"/login",element:p.jsx(yb,{})},{path:"/",element:p.jsx(iu,{children:p.jsx(gb,{})}),children:[{index:!0,element:p.jsx(zb,{})},{path:"dashboard",element:p.jsx(Eb,{})},{path:"orders",element:p.jsx(Ib,{})},{path:"orders/new",element:p.jsx(Ob,{})},{path:"orders/:orderId",element:p.jsx(kb,{})},{path:"customers",element:p.jsx(iu,{allowRoles:["admin","staff"],children:p.jsx(Lb,{})})},{path:"products",element:p.jsx(iu,{allowRoles:["admin","staff"],children:p.jsx(Ub,{})})},{path:"production",element:p.jsx(iu,{allowRoles:["admin","staff"],children:p.jsx(Bb,{})})}]},{path:"*",element:p.jsx(to,{to:"/",replace:!0})}]);th.createRoot(document.getElementById("root")).render(p.jsx(n_.StrictMode,{children:p.jsx(uA,{router:$b})}));
